import{c as Ye,b as V,r as u,s as y,l as I,j as e,q as be,u as Be,L as _}from"./main-BSajwT7t.js";import{D as Ze,a as We,b as Qe,c as Je,d as Xe,e as Ke}from"./dialog-CToh4lty.js";import{B as p}from"./button-49_9eRW2.js";import{L as me}from"./label-Dd1EhhTc.js";import{S as et,a as tt,b as at,c as st,d as rt}from"./select-7trEcF9g.js";import{I as Se}from"./input-xqPBO_Zl.js";import{u as it}from"./use-toast-CI7Qu0JR.js";import{S as pe}from"./send-D2LPRPSI.js";import{U as fe}from"./users-De1bkoUV.js";import{C as A}from"./calendar-DetO6w5d.js";import{C as q}from"./clock-DUfJelbJ.js";import{X as dt}from"./x-Wvu9FBm3.js";import{E as nt}from"./EventDetailsModal-Bth84Ell.js";import{C as T}from"./card-Bocxgg1Q.js";import{B as E}from"./badge-CfC7p-Az.js";import{S as lt}from"./StatsCard-CRzmcd_P.js";import"./DashboardHeader-DHleEAdk.js";import{E as P}from"./EmptyState-iKaJFnss.js";import"./dropdown-menu-Ni8Q_KuQ.js";import{u as Z}from"./useRedisCache-Bcf7HeY8.js";import{s as ot,f as M}from"./format-B5colFmK.js";import{s as ct}from"./subDays-DYXO191S.js";import{e as mt}from"./endOfDay-BZ13SNr-.js";import{t as je,c as xt,m as Te,a as Ae}from"./en-US-DaE-csDX.js";import{B as U}from"./book-open-BqVBcqQl.js";import{T as xe}from"./trending-up-hgXaA--6.js";import{m as j}from"./proxy-Bb-A2TUD.js";import{S as Ie}from"./sparkles-B1tExfAz.js";import{T as gt}from"./target-Cq_bYOkK.js";import{V as Ce}from"./video-GMK5YjAg.js";import{F}from"./file-text-Bwu_iaa-.js";import{T as Y}from"./triangle-alert-DjEph2_C.js";import{C as ut}from"./circle-check-CZIrgVO6.js";import{f as ge}from"./formatDistanceToNow-sn9sU9NS.js";import{C as Ee}from"./chart-column-BmPD_DCR.js";import{C as ze}from"./chevron-right-DUVlURpD.js";import{p as G}from"./pt-BR-D0BJ_iDf.js";import"./index-BSMAqeIB.js";import"./index-D0BS1fLY.js";import"./Combination-DKLEa6f3.js";import"./SidebarPremium-C1f4icTt.js";import"./house-BkBGIUz8.js";import"./graduation-cap-pwvok64K.js";import"./message-circle-DVaucFfj.js";import"./settings-Blsx5C_z.js";import"./brain-BPIciAtW.js";import"./index-DV-1B3c4.js";import"./index-DmwWW5NH.js";import"./index-qH7N8Pcj.js";import"./index-4Tq-pSUS.js";import"./chevron-down-DWk6v4aT.js";import"./check-BLcdb3Nz.js";import"./chevron-up-C-64FT3m.js";import"./redisCache-CYYpuKE4.js";import"./map-pin-Ed5qSEFg.js";import"./user-C_KdkjIX.js";import"./square-pen-BMgVe-EP.js";import"./copy-DlSUrt5X.js";import"./trash-2-BUy2_VOi.js";import"./index-C1usw-Qd.js";import"./addDays-ByTXhFEf.js";import"./constructNow-BZVcxkR5.js";import"./differenceInCalendarMonths-CtUCBvak.js";import"./endOfMonth-B3jF8fTW.js";import"./getRoundingMethod-D0I6Z7xl.js";const ht=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ue=Ye("activity",ht),bt=({open:s,onClose:a,activity:r,onSuccess:i})=>{const{user:d}=V(),{toast:m}=it(),[h,b]=u.useState([]),[c,n]=u.useState(""),[x,g]=u.useState(""),[C,v]=u.useState("23:59"),[N,w]=u.useState(!1),[W,z]=u.useState(!1);u.useEffect(()=>{if(s&&d){R();const l=new Date;l.setDate(l.getDate()+7),g(l.toISOString().split("T")[0])}},[s,d]);const R=async()=>{try{z(!0);const{data:l,error:$}=await y.from("classes").select("id, name, subject, is_active").eq("created_by",d.id).eq("is_active",!0).order("name",{ascending:!0});if($)throw $;b(l||[])}catch(l){I.error("Erro ao carregar turmas:",l),m({title:"Erro ao carregar turmas",description:l.message,variant:"destructive"})}finally{z(!1)}},Q=async()=>{if(!c){m({title:"Selecione uma turma",description:"Escolha a turma para postar a atividade.",variant:"destructive"});return}if(!x){m({title:"Defina a data de entrega",description:"A data de entrega é obrigatória.",variant:"destructive"});return}try{w(!0);const l=`${x}T${C}:00`,{error:$}=await y.from("activities").update({due_date:l,status:"published"}).eq("id",r.id);if($)throw I.error("Erro ao atualizar atividade:",$),$;const{data:H,error:X}=await y.from("activity_class_assignments").insert({activity_id:r.id,class_id:c,assigned_at:new Date().toISOString()}).select().single();if(X)throw X;const{error:O}=await y.from("classes").update({updated_at:new Date().toISOString()}).eq("id",c);O&&I.warn("Erro ao atualizar updated_at da turma ao postar atividade (dashboard):",O),m({title:"✅ Atividade postada!",description:"A atividade foi postada para a turma selecionada."}),i&&i(H),a()}catch(l){I.error("Erro ao postar atividade:",l),m({title:"Erro ao postar atividade",description:l.message,variant:"destructive"})}finally{w(!1)}},J=()=>{N||(n(""),g(""),v("23:59"),a())};return e.jsx(Ze,{open:s,onOpenChange:J,children:e.jsxs(We,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsxs(Je,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-blue-600"}),"Postar Atividade"]}),e.jsx(Xe,{children:"Escolha a turma e defina a data de entrega para postar esta atividade."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Atividade:"}),e.jsx("p",{className:"font-semibold",children:r?.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(me,{htmlFor:"class",children:[e.jsx(fe,{className:"w-4 h-4 inline mr-1"}),"Turma *"]}),W?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(be,{size:"sm"})}):e.jsxs(et,{value:c,onValueChange:n,children:[e.jsx(tt,{id:"class",children:e.jsx(at,{placeholder:"Selecione a turma..."})}),e.jsx(st,{children:h.map(l=>e.jsxs(rt,{value:l.id,children:[l.name," ",l.subject&&`- ${l.subject}`]},l.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(me,{htmlFor:"due-date",children:[e.jsx(A,{className:"w-4 h-4 inline mr-1"}),"Data de Entrega *"]}),e.jsx(Se,{id:"due-date",type:"date",value:x,onChange:l=>g(l.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(me,{htmlFor:"due-time",children:[e.jsx(q,{className:"w-4 h-4 inline mr-1"}),"Hora de Entrega"]}),e.jsx(Se,{id:"due-time",type:"time",value:C,onChange:l=>v(l.target.value)})]})]}),e.jsxs(Ke,{children:[e.jsxs(p,{variant:"outline",onClick:J,disabled:N,children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),e.jsx(p,{onClick:Q,disabled:N||!c||!x,children:N?e.jsxs(e.Fragment,{children:[e.jsx(be,{size:"sm",className:"mr-2"}),"Postando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Postar Atividade"]})})]})]})})};function pt(s,a){return je(s,a?.in).getDay()}function ft(s,a){const r=()=>xt(a?.in,NaN),d=Nt(s);let m;if(d.date){const n=wt(d.date,2);m=kt(n.restDateString,n.year)}if(!m||isNaN(+m))return r();const h=+m;let b=0,c;if(d.time&&(b=_t(d.time),isNaN(b)))return r();if(d.timezone){if(c=Dt(d.timezone),isNaN(c))return r()}else{const n=new Date(h+b),x=je(0,a?.in);return x.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),x.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),x}return je(h+b+c,a?.in)}const re={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},jt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,vt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Nt(s){const a={},r=s.split(re.dateTimeDelimiter);let i;if(r.length>2)return a;if(/:/.test(r[0])?i=r[0]:(a.date=r[0],i=r[1],re.timeZoneDelimiter.test(a.date)&&(a.date=s.split(re.timeZoneDelimiter)[0],i=s.substr(a.date.length,s.length))),i){const d=re.timezone.exec(i);d?(a.time=i.replace(d[1],""),a.timezone=d[1]):a.time=i}return a}function wt(s,a){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),i=s.match(r);if(!i)return{year:NaN,restDateString:""};const d=i[1]?parseInt(i[1]):null,m=i[2]?parseInt(i[2]):null;return{year:m===null?d:m*100,restDateString:s.slice((i[1]||i[2]).length)}}function kt(s,a){if(a===null)return new Date(NaN);const r=s.match(jt);if(!r)return new Date(NaN);const i=!!r[4],d=B(r[1]),m=B(r[2])-1,h=B(r[3]),b=B(r[4]),c=B(r[5])-1;if(i)return At(a,b,c)?St(a,b,c):new Date(NaN);{const n=new Date(0);return!Et(a,m,h)||!Tt(a,d)?new Date(NaN):(n.setUTCFullYear(a,m,Math.max(d,h)),n)}}function B(s){return s?parseInt(s):1}function _t(s){const a=s.match(yt);if(!a)return NaN;const r=he(a[1]),i=he(a[2]),d=he(a[3]);return It(r,i,d)?r*Te+i*Ae+d*1e3:NaN}function he(s){return s&&parseFloat(s.replace(",","."))||0}function Dt(s){if(s==="Z")return 0;const a=s.match(vt);if(!a)return 0;const r=a[1]==="+"?-1:1,i=parseInt(a[2]),d=a[3]&&parseInt(a[3])||0;return zt(i,d)?r*(i*Te+d*Ae):NaN}function St(s,a,r){const i=new Date(0);i.setUTCFullYear(s,0,4);const d=i.getUTCDay()||7,m=(a-1)*7+r+1-d;return i.setUTCDate(i.getUTCDate()+m),i}const Ct=[31,null,31,30,31,30,31,31,30,31,30,31];function $e(s){return s%400===0||s%4===0&&s%100!==0}function Et(s,a,r){return a>=0&&a<=11&&r>=1&&r<=(Ct[a]||($e(s)?29:28))}function Tt(s,a){return a>=1&&a<=($e(s)?366:365)}function At(s,a,r){return a>=1&&a<=53&&r>=0&&r<=6}function It(s,a,r){return s===24?a===0&&r===0:r>=0&&r<60&&a>=0&&a<60&&s>=0&&s<25}function zt(s,a){return a>=0&&a<=59}const $t=()=>{const{user:s}=V(),a=u.useCallback(async()=>{if(!s?.id)return null;try{const{data:r,error:i}=await y.from("classes").select("id").eq("created_by",s.id).eq("is_active",!0);if(i)throw i;let d=0;if(r&&r.length>0){const v=r.map(z=>z.id),{data:N,error:w}=await y.from("class_members").select("user_id").in("class_id",v).eq("role","student");if(w)throw w;d=new Set((N||[]).map(z=>z.user_id)).size}const h=(await y.from("activities").select("id").eq("created_by",s.id)).data?.map(v=>v.id)||[],{data:b}=await y.from("submissions").select("id",{count:"exact",head:!0}).in("activity_id",h).eq("status","submitted"),{data:c}=await y.from("submissions").select("grade").in("activity_id",h).not("grade","is",null),n=c?.length>0?c.reduce((v,N)=>v+N.grade,0)/c.length:0,x=new Date;x.setHours(0,0,0,0);const g=new Date(x);g.setDate(g.getDate()+1);const{data:C}=await y.from("submissions").select("id",{count:"exact",head:!0}).in("activity_id",h).gte("graded_at",x.toISOString()).lt("graded_at",g.toISOString());return{totalClasses:r?.length||0,totalStudents:d,totalActivities:h.length,pendingGrading:b?.length||0,avgGrade:Number(n.toFixed(1)),todayCorrections:C?.length||0}}catch(r){throw I.error("[useDashboardStats] Error:",r),r}},[s?.id]);return Z(`teacher:dashboard:stats:${s?.id}`,a,{ttl:300,enabled:!!s?.id,staleTime:120*1e3})},Pt=(s=7)=>{const{user:a}=V(),r=u.useCallback(async()=>{if(!a?.id)return{today:[],upcoming:[]};try{const i=new Date,d=new Date(i.getFullYear(),i.getMonth(),i.getDate()),m=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),h=new Date(i.getTime()+s*24*60*60*1e3),{data:b,error:c}=await y.from("calendar_events").select(`
          *,
          class:classes(name, subject),
          activity:activities(title, type)
        `).eq("created_by",a.id).gte("start_time",d.toISOString()).lt("start_time",m.toISOString()).eq("is_cancelled",!1).order("start_time",{ascending:!0});if(c)throw c;const{data:n,error:x}=await y.from("calendar_events").select(`
          *,
          class:classes(name, subject),
          activity:activities(title, type)
        `).eq("created_by",a.id).gte("start_time",m.toISOString()).lte("start_time",h.toISOString()).eq("is_cancelled",!1).order("start_time",{ascending:!0}).limit(10);if(x)throw x;return{today:(b||[]).map(g=>({...g,class_name:g.class?.name||"Aula Geral",class_subject:g.class?.subject||"",activity_title:g.activity?.title||"",activity_type:g.activity?.type||""})),upcoming:(n||[]).map(g=>({...g,class_name:g.class?.name||"Aula Geral",class_subject:g.class?.subject||"",activity_title:g.activity?.title||"",activity_type:g.activity?.type||""}))}}catch(i){return I.error("[useDashboardEvents] Error:",i),{today:[],upcoming:[]}}},[a?.id,s]);return Z(`teacher:dashboard:events:${a?.id}:${s}`,r,{ttl:180,enabled:!!a?.id,staleTime:60*1e3})},Mt=(s=10)=>{const{user:a}=V(),r=u.useCallback(async()=>{if(!a?.id)return[];try{const{data:i}=await y.from("activities").select("id").eq("created_by",a.id),d=i?.map(N=>N.id)||[];if(d.length===0)return{submissions:[],weeklySubmissions:[0,0,0,0,0,0,0],weeklyTotal:0};const{data:m,error:h}=await y.from("submissions").select(`
          *,
          activity:activities(title),
          student:profiles!student_id(full_name)
        `).in("activity_id",d).eq("status","submitted").order("submitted_at",{ascending:!0}).limit(s);if(h)throw h;const b=new Date,c=ot(ct(b,6)),n=mt(b),{data:x}=await y.from("submissions").select("submitted_at").in("activity_id",d).gte("submitted_at",c.toISOString()).lte("submitted_at",n.toISOString()),g=[0,0,0,0,0,0,0];x?.forEach(N=>{const w=pt(ft(N.submitted_at));g[w===0?6:w-1]++});const C=x?.length||0;return{submissions:(m||[]).map(N=>({...N,student_name:N.student?.full_name||"Aluno",activity_title:N.activity?.title||"Atividade"})),weeklySubmissions:g,weeklyTotal:C}}catch(i){return I.error("[useDashboardSubmissions] Error:",i),{submissions:[],weeklySubmissions:[0,0,0,0,0,0,0],weeklyTotal:0}}},[a?.id,s]);return Z(`teacher:dashboard:submissions:${a?.id}:${s}`,r,{ttl:120,enabled:!!a?.id,staleTime:30*1e3})},qt=(s=6)=>{const{user:a}=V(),r=u.useCallback(async()=>{if(!a?.id)return[];try{const{data:i}=await y.from("activities").select("id").eq("created_by",a.id),d=i?.map(n=>n.id)||[];if(d.length===0)return[];const{data:m,error:h}=await y.from("submissions").select(`
          student_id,
          grade,
          student:profiles!student_id(full_name)
        `).in("activity_id",d).not("grade","is",null);if(h)throw h;const b={};return(m||[]).forEach(n=>{b[n.student_id]||(b[n.student_id]={grades:[],name:n.student?.full_name||"Aluno"}),b[n.student_id].grades.push(n.grade)}),Object.entries(b).map(([n,x])=>({id:n,name:x.name,avgGrade:x.grades.reduce((g,C)=>g+C,0)/x.grades.length,totalActivities:x.grades.length})).filter(n=>n.avgGrade<s).sort((n,x)=>n.avgGrade-x.avgGrade).slice(0,10)}catch(i){return I.error("[useDashboardAlerts] Error:",i),[]}},[a?.id,s]);return Z(`teacher:dashboard:alerts:${a?.id}:${s}`,r,{ttl:600,enabled:!!a?.id,staleTime:300*1e3})},Ft=()=>{const{user:s}=V(),a=u.useCallback(async()=>{if(!s?.id)return{classes:[],activities:[]};try{const{data:r,error:i}=await y.from("classes").select(`
          *,
          class_members(count)
        `).eq("created_by",s.id).eq("is_active",!0).order("created_at",{ascending:!1}).limit(5);if(i)throw i;const d=(r||[]).map(c=>({...c,student_count:c.class_members?.[0]?.count||0})),{data:m,error:h}=await y.from("activities").select(`
          *,
          activity_class_assignments(class:classes(name))
        `).eq("created_by",s.id).order("created_at",{ascending:!1}).limit(5);if(h)throw h;const b=(m||[]).map(c=>({...c,class_name:c.activity_class_assignments?.[0]?.class?.name||"Sem turma"}));return{classes:d,activities:b}}catch(r){return I.error("[useDashboardRecentData] Error:",r),{classes:[],activities:[]}}},[s?.id]);return Z(`teacher:dashboard:recent:${s?.id}`,a,{ttl:300,enabled:!!s?.id,staleTime:120*1e3})},Pe=u.memo(({stats:s})=>{const a=[{label:"Corrigir atividades pendentes",subtitle:`${s?.pendingGrading||0} submissões aguardando`,icon:F,href:"/dashboard/corrections",gradient:"from-amber-500 to-orange-500",show:!0},{label:"Planejar próxima aula",subtitle:"Ver calendário e eventos",icon:A,href:"/dashboard/calendar",gradient:"from-blue-600 to-cyan-600",show:!0},{label:"Criar nova atividade",subtitle:"Gere conteúdo automaticamente",icon:Ie,href:"/dashboard/activities/create",gradient:"from-purple-600 to-pink-600",show:!0}].filter(r=>r.show);return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:a.map((r,i)=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(_,{to:r.href,children:e.jsx(T,{className:"p-6 hover:shadow-lg transition-all cursor-pointer border-2 hover:border-blue-300 dark:hover:border-blue-700 group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${r.gradient} shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(r.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:r.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.subtitle})]}),e.jsx(ze,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"})]})})})},r.label))})});Pe.displayName="PriorityActions";const Ja=()=>{const{user:s,profile:a}=V(),r=Be(),[i,d]=u.useState(7),[m,h]=u.useState(!1),[b,c]=u.useState(null),[n,x]=u.useState(!1),[g,C]=u.useState(null),[v,N]=u.useState(1),w=6,[W,z]=u.useState([]),R=u.useCallback(t=>{d(t),N(1)},[]),Q=u.useCallback(t=>{C(t),x(!0)},[]),J=u.useCallback(t=>{r(`/dashboard/students/${t}`)},[r]),{data:l,loading:$}=$t(),{data:H,loading:X,refetch:O}=Pt(i),{data:ie,loading:Me,refetch:ye}=Mt(),{data:K}=qt(),{data:qe,loading:Fe}=Ft();u.useEffect(()=>{(async()=>{if(!s?.id){z([]);return}try{const{data:o,error:f}=await y.from("notifications").select("*").eq("user_id",s.id).order("created_at",{ascending:!1}).limit(20);if(f)throw f;z(o||[])}catch(o){I.error("[TeacherDashboard] Error loading notifications for feed:",o)}})()},[s?.id]);const Oe=u.useCallback(()=>{O(),ye()},[O,ye]),Ge=u.useCallback(()=>{O()},[O]),ve=H?.upcoming?.slice((v-1)*w,v*w),de=Math.ceil(H?.upcoming?.length/w),ne=u.useCallback(t=>{N(t)},[]),{today:le=[],upcoming:oe=[]}=H||{},{classes:ee=[],activities:te=[]}=qe||{},ce=ie?.submissions||[],Ne=ie?.weeklySubmissions||[],we=ie?.weeklyTotal||0,ae=t=>t?!!(t.is_published||t.is_draft===!1||t.status&&t.status!=="draft"):!1;if($&&X&&Me&&Fe)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(be,{size:"lg",text:"Carregando dashboard..."})});const Ve=a?.full_name?.split(" ")[0]||"Professor",Ue=[{title:"Total de Turmas",value:l?.totalClasses||0,icon:U,gradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50 dark:bg-blue-950/30",change:`${l?.totalStudents||0} alunos`},{title:"Total de Alunos",value:l?.totalStudents||0,icon:fe,gradient:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-50 dark:bg-cyan-950/30"},{title:"Média Geral",value:l?.avgGrade||0,icon:xe,gradient:"from-emerald-500 to-teal-500",bgColor:"bg-emerald-50 dark:bg-emerald-950/30",change:(l?.avgGrade||0)>=7?"Excelente":"Pode melhorar"},{title:"Aguardando Correção",value:l?.pendingGrading||0,icon:q,gradient:"from-amber-500 to-orange-500",bgColor:"bg-amber-50 dark:bg-amber-950/30",change:`${l?.todayCorrections||0} hoje`}],Re=(W||[]).filter(t=>t.type==="plagiarism_alert"||t.type==="ai_detection"),se=[];ce.forEach(t=>{t.submitted_at&&se.push({id:`submission-${t.id}`,kind:"submission",timestamp:new Date(t.submitted_at),sub:t})}),[...le,...oe].forEach(t=>{t.type==="deadline"&&t.start_time&&se.push({id:`deadline-${t.id}`,kind:"deadline",timestamp:new Date(t.start_time),event:t})}),Re.forEach(t=>{t.created_at&&se.push({id:`notification-${t.id}`,kind:t.type==="ai_detection"?"ai_detection":"plagiarism",timestamp:new Date(t.created_at),notification:t})});const ke=new Date,He=new Date(ke.getTime()-10080*60*1e3),Le=new Date(ke.getTime()+10080*60*1e3),_e=se.filter(t=>t.timestamp?t.timestamp>=He&&t.timestamp<=Le:!1);_e.sort((t,o)=>o.timestamp-t.timestamp);const De=_e.slice(0,10);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50/30 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm",children:e.jsx(Ie,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Olá, ",Ve]}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Vamos reduzir seu trabalho extraclasse hoje"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsxs("span",{children:[l?.totalClasses||0," turmas"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsxs("span",{children:[l?.totalStudents||0," alunos"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsxs("span",{children:[l?.pendingGrading||0," correções"]})]})]})]})}),e.jsx(Pe,{stats:l}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Ue.map((t,o)=>e.jsx(lt,{title:t.title,value:t.value,icon:t.icon,gradient:t.gradient,bgColor:t.bgColor,change:t.change,delay:o*.1},t.title))}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500",children:e.jsx(gt,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Hoje"}),e.jsx(E,{className:"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",children:M(new Date,"EEEE, d MMMM",{locale:G})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{className:"p-6 border-2 border-blue-100 dark:border-blue-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Agenda de Hoje"})]}),e.jsx(_,{to:"/dashboard/calendar",children:e.jsx(p,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:"Ver Calendário"})})]}),e.jsx("div",{className:"space-y-3",children:le.length>0?le.map((t,o)=>{const f=t.type==="meeting",D=t.type==="activity",S=t.type==="deadline",k=f?Ce:D?F:S?Y:A,L={meeting:"border-l-purple-500 bg-purple-50/50 dark:bg-purple-950/20",activity:"border-l-orange-500 bg-orange-50/50 dark:bg-orange-950/20",deadline:"border-l-red-500 bg-red-50/50 dark:bg-red-950/20",event:"border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20"};return e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.1},onClick:()=>Q(t),className:`p-4 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-blue-400 cursor-pointer transition-all border-l-4 ${L[t.type]||L.event}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${f?"bg-purple-100":D?"bg-orange-100":S?"bg-red-100":"bg-blue-100"}`,children:e.jsx(k,{className:`w-6 h-6 ${f?"text-purple-600":D?"text-orange-600":S?"text-red-600":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[t.class_name?e.jsx("div",{className:"mb-2",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600"}),t.class_name,t.class_subject&&e.jsx("span",{className:"text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded font-medium",children:t.class_subject})]})}):e.jsx("div",{className:"mb-2",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-gray-600"}),"Evento Geral"]})}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:t.title}),t.activity_title&&e.jsxs("div",{className:"flex items-center gap-2 text-sm bg-white dark:bg-gray-800 p-2 rounded-lg border border-gray-200 dark:border-gray-700 mb-2",children:[e.jsx(F,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.activity_title}),t.activity_type&&e.jsx("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-1 rounded font-medium",children:t.activity_type})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:M(new Date(t.start_time),"HH:mm")}),t.end_time&&e.jsxs("span",{children:["- ",M(new Date(t.end_time),"HH:mm")]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(E,{variant:"outline",className:"text-xs",children:M(new Date(t.start_time),"dd/MM",{locale:G})})})]})]},t.id)}):e.jsx(P,{icon:A,title:"Nenhum evento hoje",description:"Sua agenda está livre hoje."})})]}),e.jsxs(T,{className:"p-6 border-2 border-amber-100 dark:border-amber-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-100 dark:bg-amber-900/30",children:e.jsx(F,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Correções Pendentes"})]}),e.jsx(_,{to:"/dashboard/corrections",children:e.jsx(p,{variant:"ghost",size:"sm",className:"text-amber-600 hover:text-amber-700",children:"Ver Todas"})})]}),e.jsx("div",{className:"space-y-3",children:ce.length>0?ce.slice(0,5).map((t,o)=>e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-white font-bold",children:t.student_name?.[0]||"A"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.student_name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.activity_title})]})]}),e.jsx(_,{to:`/dashboard/grading/${t.id}`,children:e.jsx(p,{size:"sm",className:"bg-gradient-to-r from-amber-600 to-orange-600",children:"Corrigir"})})]},t.id)):e.jsx(P,{icon:ut,title:"Nenhuma correção pendente!",description:"Parabéns! Você está em dia "})})]})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500",children:e.jsx(A,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Esta Semana"})]}),e.jsxs(T,{className:"p-6 border-2 border-indigo-100 dark:border-indigo-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900/30",children:e.jsx(A,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Próximos Eventos"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",variant:i===1?"default":"outline",onClick:()=>R(1),children:"Hoje"}),e.jsx(p,{size:"sm",variant:i===3?"default":"outline",onClick:()=>R(3),children:"3 dias"}),e.jsx(p,{size:"sm",variant:i===7?"default":"outline",onClick:()=>R(7),children:"7 dias"}),e.jsx(p,{size:"sm",variant:"ghost",onClick:()=>r("/dashboard/calendar"),children:"Ver Todos"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ve?.length>0?ve.map((t,o)=>{const f=t.type==="meeting",D=t.type==="activity",S=t.type==="deadline",k=f?Ce:D?F:S?Y:A,L={meeting:"border-l-purple-500 bg-purple-50/50 dark:bg-purple-950/20",activity:"border-l-orange-500 bg-orange-50/50 dark:bg-orange-950/20",deadline:"border-l-red-500 bg-red-50/50 dark:bg-red-950/20",event:"border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20"};return e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},onClick:()=>Q(t),className:`p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-indigo-400 cursor-pointer transition-all border-l-4 ${L[t.type]||L.event}`,children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${f?"bg-purple-100":D?"bg-orange-100":S?"bg-red-100":"bg-blue-100"}`,children:e.jsx(k,{className:`w-4 h-4 ${f?"text-purple-600":D?"text-orange-600":S?"text-red-600":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[t.class_name?e.jsx("div",{className:"mb-1",children:e.jsxs("h3",{className:"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-1 truncate",children:[e.jsx(U,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.class_name}),t.class_subject&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-1 py-0.5 rounded font-medium flex-shrink-0",children:t.class_subject})]})}):e.jsx("div",{className:"mb-1",children:e.jsxs("h3",{className:"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3 text-gray-600"}),"Evento Geral"]})}),e.jsx("h4",{className:"text-xs font-semibold text-gray-800 dark:text-gray-200 mb-1 truncate",children:t.title}),t.activity_title&&e.jsxs("div",{className:"flex items-center gap-1 text-xs bg-white dark:bg-gray-800 p-1 rounded border border-gray-200 dark:border-gray-700 mb-1",children:[e.jsx(F,{className:"w-3 h-3 text-orange-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:t.activity_title}),t.activity_type&&e.jsx("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-1 py-0.5 rounded font-medium flex-shrink-0",children:t.activity_type})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(q,{className:"w-3 h-3"}),e.jsx("span",{children:M(new Date(t.start_time),"HH:mm")}),t.end_time&&e.jsxs("span",{children:["- ",M(new Date(t.end_time),"HH:mm")]})]}),e.jsx(E,{variant:"outline",className:"text-xs px-1 py-0.5",children:M(new Date(t.start_time),"dd/MM",{locale:G})})]})]},t.id)}):e.jsx("div",{className:"col-span-2",children:e.jsx(P,{icon:A,title:"Nenhum evento próximo",description:"Seus próximos eventos aparecerão aqui."})})}),de>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mostrando ",(v-1)*w+1,"-",Math.min(v*w,oe?.length||0)," de ",oe?.length||0," eventos"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{size:"sm",variant:"outline",onClick:()=>ne(v-1),disabled:v===1,children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:de},(t,o)=>o+1).map(t=>e.jsx(p,{size:"sm",variant:v===t?"default":"outline",onClick:()=>ne(t),className:"w-8 h-8 p-0",children:t},t))}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>ne(v+1),disabled:v===de,children:"Próxima"})]})]})]})]}),K&&K.length>0&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-red-500 to-orange-500",children:e.jsx(Y,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Alunos em Risco"}),e.jsxs(E,{className:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300",children:[K.length," alunos"]})]}),e.jsxs(T,{className:"p-6 border-2 border-red-100 dark:border-red-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30",children:e.jsx(Y,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Alunos que Precisam de Atenção"})]}),e.jsx(_,{to:"/dashboard/students",children:e.jsx(p,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:"Ver Todos"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:K.map((t,o)=>e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.05},className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-white font-bold",children:t.name?.[0]||"A"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsxs(E,{className:"bg-red-100 text-red-700 text-xs mt-1",children:["Média: ",t.avgGrade.toFixed(1)]})]}),e.jsx(p,{size:"sm",onClick:()=>J(t.id),children:"Ver Detalhes"})]},t.id))})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500",children:e.jsx(ue,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Feed de Atividades e Alertas"}),e.jsx(E,{className:"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",children:"Beta"})]}),e.jsx(T,{className:"p-6 border-2 border-blue-100 dark:border-blue-800/30 shadow-lg",children:De.length>0?e.jsx("div",{className:"space-y-3",children:De.map((t,o)=>{if(t.kind==="submission"){const k=t.sub;return e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.05},className:"flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center text-white text-sm font-bold",children:k.student_name?.[0]||"A"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:[k.student_name," enviou"," ",e.jsxs("span",{className:"font-semibold",children:['"',k.activity_title,'"']})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.timestamp?ge(t.timestamp,{locale:G,addSuffix:!0}):""})]})]}),e.jsx(_,{to:`/dashboard/grading/${k.id}`,children:e.jsx(p,{size:"sm",variant:"outline",children:"Corrigir"})})]},t.id)}if(t.kind==="deadline"){const k=t.event;return e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.05},className:"flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-900 border border-blue-100 dark:border-blue-800 cursor-pointer",onClick:()=>r("/dashboard/calendar"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center",children:e.jsx(q,{className:"w-4 h-4 text-blue-600 dark:text-blue-300"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:["Prazo da atividade"," ",e.jsxs("span",{className:"font-semibold",children:['"',k.activity_title||k.title,'"']}),k.class_name&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ","• Turma ",k.class_name]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.timestamp?ge(t.timestamp,{locale:G,addSuffix:!0}):""})]})]}),e.jsx(p,{size:"sm",variant:"outline",children:"Ver calendário"})]},t.id)}const f=t.notification,D=f?.data||f?.metadata||{},S=D.submissionId||D.submission_id;return e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.05},className:"flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-900 border border-red-100 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-red-100 dark:bg-red-900/40 flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-red-600 dark:text-red-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:f.title||(t.kind==="ai_detection"?"Conteúdo gerado por IA detectado":"Plágio detectado")}),f.message&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:f.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.timestamp?ge(t.timestamp,{locale:G,addSuffix:!0}):""})]})]}),e.jsx(_,{to:S?`/dashboard/grading/${S}`:"/dashboard/corrections",children:e.jsx(p,{size:"sm",variant:"outline",children:"Ver detalhes"})})]},t.id)})}):e.jsx(P,{icon:ue,title:"Nenhuma atividade recente",description:"Novas submissões, prazos e alertas aparecerão aqui em ordem cronológica."})})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500",children:e.jsx(Ee,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Visão Geral"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(T,{className:"p-6 border-2 border-green-100 dark:border-green-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(U,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Turmas Recentes"})]}),e.jsx(_,{to:"/dashboard/classes",children:e.jsx(p,{variant:"ghost",size:"sm",children:"Ver Todas"})})]}),e.jsx("div",{className:"space-y-3",children:ee.length>0?ee.slice(0,3).map((t,o)=>e.jsx(_,{to:`/dashboard/classes/${t.id}`,children:e.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"p-4 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-green-300 dark:hover:border-green-700 transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${t.color||"from-blue-500 to-indigo-500"} flex items-center justify-center text-white font-bold`,children:t.name?.[0]||"T"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.subject," • ",t.student_count," alunos"]})]})]})})},t.id)):e.jsx(P,{icon:U,title:"Nenhuma turma encontrada",description:"Crie sua primeira turma para começar."})})]}),e.jsxs(T,{className:"p-6 border-2 border-purple-100 dark:border-purple-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(F,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Atividades Recentes"})]}),e.jsx(_,{to:"/dashboard/activities",children:e.jsx(p,{variant:"ghost",size:"sm",children:"Ver Todas"})})]}),e.jsx("div",{className:"space-y-3",children:te.length>0?te.slice(0,3).map((t,o)=>e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white flex-1",children:t.title}),e.jsx(E,{variant:ae(t)?"default":"secondary",className:"ml-2",children:ae(t)?"Postada":"Rascunho"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:t.class_name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:new Date(t.due_date)<new Date?"destructive":"default",className:"text-xs",children:new Date(t.due_date)<new Date?"Encerrada":"Aberta"}),t.submission_count!==void 0&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:[t.submission_count," ",t.submission_count===1?"submissão":"submissões"]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:M(new Date(t.due_date),"dd/MM",{locale:G})})]})]},t.id)):e.jsx(P,{icon:F,title:"Nenhuma atividade",description:"Suas atividades aparecerão aqui."})})]}),e.jsxs(T,{className:"p-6 border-2 border-orange-100 dark:border-orange-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30",children:e.jsx(q,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Para Postar"})]}),e.jsx(_,{to:"/dashboard/activities?filter=drafts",children:e.jsx(p,{variant:"ghost",size:"sm",children:"Ver Todas"})})]}),e.jsx("div",{className:"space-y-3",children:te.filter(t=>!ae(t)).length>0?te.filter(t=>!ae(t)).slice(0,3).map((t,o)=>e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-orange-300 dark:hover:border-orange-700 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white flex-1",children:t.title}),e.jsx(E,{variant:"secondary",className:"ml-2",children:"Rascunho"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t.class_name}),e.jsxs(p,{size:"sm",className:"w-full",onClick:()=>{c(t),h(!0)},children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Postar Agora"]})]},t.id)):e.jsx(P,{icon:q,title:"Nenhum rascunho",description:"Atividades não postadas aparecerão aqui."})})]})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500",children:e.jsx(Ee,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Performance Insights"}),e.jsx(E,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300",children:"Últimos 7 dias"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{className:"p-6 border-2 border-emerald-100 dark:border-emerald-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/30",children:e.jsx(ue,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Atividade da Semana"})]}),e.jsx(_,{to:"/dashboard/analytics",children:e.jsx(p,{variant:"ghost",size:"sm",className:"text-emerald-600 hover:text-emerald-700",children:"Ver Analytics"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"].map((t,o)=>{const f=Ne.length===7?Ne:[0,0,0,0,0,0,0],D=Math.max(...f,1),S=f[o]/D*100;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 text-sm font-medium text-gray-600 dark:text-gray-400",children:t}),e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:e.jsx(j.div,{initial:{width:0},animate:{width:`${S}%`},transition:{delay:.8+o*.1,duration:.6},className:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full flex items-center justify-end pr-2",children:e.jsx("span",{className:"text-xs text-white font-medium",children:f[o]})})})]},t)})}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de submissões"}),e.jsxs("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:[we||0," ",we===1?"submissão":"submissões"]})]})})]})]}),e.jsxs(T,{className:"p-6 border-2 border-purple-100 dark:border-purple-800/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(xe,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Turmas em Destaque"})]}),e.jsx(_,{to:"/dashboard/classes",children:e.jsx(p,{variant:"ghost",size:"sm",className:"text-purple-600 hover:text-purple-700",children:"Ver Todas"})})]}),e.jsx("div",{className:"space-y-3",children:(ee?.slice(0,4)||[]).length>0?ee.slice(0,4).map((t,o)=>e.jsxs(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+o*.1},className:"flex items-center gap-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${t.color||"from-purple-500 to-pink-500"} flex items-center justify-center text-white font-bold`,children:t.name?.[0]||"T"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(E,{className:"bg-purple-100 text-purple-700 text-xs",children:[t.student_count," ",t.student_count===1?"aluno":"alunos"]}),e.jsx("span",{className:"text-xs text-gray-500",children:t.subject})]})]}),e.jsx(ze,{className:"w-4 h-4 text-gray-400"})]},t.name)):e.jsx(P,{icon:xe,title:"Nenhuma turma",description:"Crie turmas para ver estatísticas."})})]})]})]}),e.jsx(bt,{open:m,onClose:()=>{h(!1),c(null)},activity:b,onSuccess:Oe}),n&&g&&e.jsx(nt,{isOpen:n,onClose:()=>{x(!1),C(null)},event:g,onEdit:()=>r("/dashboard/calendar"),onDelete:Ge})]})};export{Ja as default};
