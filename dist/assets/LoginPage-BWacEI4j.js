import{u as k,a as E,r as n,j as e,L as d,b as C,s as L}from"./main-BYt0atFx.js";import{m as p,C as S,B as b}from"./card-OcUoX-wQ.js";import{L as f,I as g}from"./label-Co3Fv3aZ.js";import{A as z,a as I}from"./alert-JiFe3Jmo.js";import{L as A,E as P,v as q,o as D}from"./authEdge-CJoN7bkE.js";import{G as F}from"./graduation-cap-DKIpJ5u0.js";import{C as B}from"./circle-alert-bxjA3bGV.js";import{M as T}from"./mail-CiL9tdOl.js";import{E as G}from"./eye-S0uEcewW.js";const U=()=>{const o=k(),{signIn:v}=E(),[a,j]=n.useState({email:"",password:""}),[c,w]=n.useState(!1),[i,x]=n.useState(!1),[u,s]=n.useState(""),h=m=>{const{name:t,value:l}=m.target;j(r=>({...r,[t]:l})),s("")},N=async m=>{if(m.preventDefault(),s(""),!a.email||!a.password){s("Por favor, preencha todos os campos");return}if(!a.email.includes("@")){s("Por favor, insira um e-mail válido");return}x(!0);try{try{await q(a.email,a.password)}catch(r){console.log("Validation error (non-blocking):",r)}const{data:t,error:l}=await v(a.email,a.password);if(l){l.message.includes("Invalid login credentials")?s("E-mail ou senha incorretos"):l.message.includes("Email not confirmed")?s("Por favor, confirme seu e-mail antes de fazer login"):s(l.message||"Erro ao fazer login. Tente novamente.");return}if(t?.user){try{await D(t.user.id)}catch(y){console.log("Login success callback error (non-blocking):",y)}const{data:r}=await L.from("profiles").select("role").eq("id",t.user.id).single();r?.role==="student"?o("/students/dashboard"):r?.role==="teacher"?o("/dashboard"):r?.role==="school"?o("/dashboard/school"):o("/dashboard")}}catch(t){console.error("Login error:",t),s("Erro ao fazer login. Tente novamente.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-slate-900/[0.04] dark:bg-grid-slate-400/[0.05] bg-[size:20px_20px]"}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md relative z-10",children:[e.jsxs(d,{to:"/",className:"flex items-center justify-center gap-2 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(F,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"TamanduAI"})]}),e.jsxs(S,{className:"p-8 bg-white dark:bg-slate-900 shadow-2xl border-0",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-slate-900 dark:text-white",children:"Bem-vindo de volta!"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Entre para continuar sua jornada educacional"})]}),u&&e.jsx(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs(z,{variant:"destructive",className:"mb-6",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx(I,{children:u})]})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"email",className:"text-slate-700 dark:text-slate-300",children:"E-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(g,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:a.email,onChange:h,className:"pl-10 h-12 bg-white dark:bg-slate-900 text-foreground border-border",disabled:i,autoComplete:"email",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{htmlFor:"password",className:"text-slate-700 dark:text-slate-300",children:"Senha"}),e.jsx(d,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Esqueceu a senha?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(g,{id:"password",name:"password",type:c?"text":"password",placeholder:"••••••••",value:a.password,onChange:h,className:"pl-10 pr-10 h-12 bg-white dark:bg-slate-900 text-foreground border-border",disabled:i,autoComplete:"current-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>w(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",tabIndex:-1,children:c?e.jsx(P,{className:"w-5 h-5"}):e.jsx(G,{className:"w-5 h-5"})})]})]}),e.jsx(b,{type:"submit",disabled:i,className:"w-full h-12 text-base whitespace-nowrap inline-flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:i?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Entrando..."})]}):e.jsx("span",{children:"Entrar"})})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white dark:bg-slate-900 text-slate-500 dark:text-slate-400",children:"Novo por aqui?"})})]}),e.jsx(d,{to:"/register",children:e.jsx(b,{type:"button",variant:"outline",className:"w-full h-12 text-base whitespace-nowrap bg-white dark:bg-slate-900 text-foreground border-border hover:bg-slate-50 dark:hover:bg-slate-800",children:"Criar uma conta"})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(d,{to:"/",className:"text-sm text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:"← Voltar para o início"})})]}),e.jsx("div",{className:"fixed top-0 left-0 w-96 h-96 bg-blue-400/20 dark:bg-blue-600/10 rounded-full blur-3xl -z-10"}),e.jsx("div",{className:"fixed bottom-0 right-0 w-96 h-96 bg-purple-400/20 dark:bg-purple-600/10 rounded-full blur-3xl -z-10"})]})};export{U as default};
