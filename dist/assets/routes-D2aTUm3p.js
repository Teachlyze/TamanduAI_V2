const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StudentDashboard-z6WyuI5C.js","assets/main-BXI8jImK.js","assets/main-j_QbkulI.css","assets/button-DhJSXayK.js","assets/card-Dts-jKab.js","assets/SidebarPremium-CqhK_O_u.js","assets/bell-De3gaLfU.js","assets/book-open-BMCImb8A.js","assets/trending-up-C_AGH9Be.js","assets/user-XMBxPeUS.js","assets/file-text-B1_cTV9D.js","assets/settings-Dn83Owos.js","assets/users-1MVt23UL.js","assets/graduation-cap-BVXXkz0b.js","assets/index-Cyt6Mlq7.js","assets/chart-column-D6pi1FRc.js","assets/x-DhRNfShw.js","assets/progress-C4xxo9fK.js","assets/index-D63a-v4Z.js","assets/circle-check-Fi_I5OIJ.js","assets/clock-Ic71-9yN.js","assets/trophy-Ozj9A4JM.js","assets/chevron-right-DFiBXpQq.js","assets/CartesianChart-CT_d4aWO.js","assets/index-Bl3P6sXQ.js","assets/BarChart-BxSKjVb3.js","assets/star-qgVESZf4.js","assets/video-BNJ0bsve.js","assets/triangle-alert-fhQdnZTc.js","assets/circle-alert-D0X6fNnu.js","assets/info-Cz_2uO3r.js","assets/StudentClassesPage-C-TM-oJS.js","assets/input-YtE9-IyT.js","assets/DashboardHeader-BC80IxDW.js","assets/SearchInput-B8_MbpHy.js","assets/search-BE_TttKm.js","assets/dropdown-menu-7nHS86TP.js","assets/index-laUz9pSU.js","assets/Combination-7NRWB7dp.js","assets/index-PCXR_M5s.js","assets/check-P2w7Pyl_.js","assets/label-DZTyMoK9.js","assets/StudentClassDetailsPage-BcKI_7Yo.js","assets/tabs-Cc_Y9tQd.js","assets/use-toast-B4cJHS9G.js","assets/utils-CwPH5tNa.js","assets/circle-check-big-BGyFuaS8.js","assets/getRoundingMethod-D0I6Z7xl.js","assets/en-US-Bd7_-tVp.js","assets/format-D0LVKLFA.js","assets/pt-BR-zMqltMoH.js","assets/isPast-DAgdE-lF.js","assets/file-Ctlo8PJd.js","assets/code-CnaNKUcP.js","assets/archive-B_LTTO2m.js","assets/download-COsSi_Yf.js","assets/textarea-C2TbCwiG.js","assets/message-square-qOrj0Hb0.js","assets/thumbs-up-DoO3fTbL.js","assets/heart-D9YPWLWs.js","assets/sparkles-CZy0JlN_.js","assets/chevron-up-3f7I9tWa.js","assets/chevron-down-vfmnlur0.js","assets/eye-CtZjPFNS.js","assets/arrow-left-Bdb18hWQ.js","assets/bot-BYtHUSiL.js","assets/StudentActivitiesPage-DaaWF3bc.js","assets/select-BYpegp6M.js","assets/index-DWCzEl6o.js","assets/StatsCard-BvzfNeJ2.js","assets/EmptyState-BgA-VgrI.js","assets/funnel-rLvg5Q-7.js","assets/StudentActivityDetailsPage-igP8_59j.js","assets/checkbox-BTFRdSl9.js","assets/clipboard-list-DArUsZqA.js","assets/save-X-LtD5pM.js","assets/formatDistanceToNow-BiSDyBrg.js","assets/constructNow-Da1hFwc5.js","assets/differenceInCalendarMonths-C4OLvtco.js","assets/endOfMonth-BZt6_lQt.js","assets/StudentPerformancePage-qaoOKL0K.js","assets/target-Dg-9Hmp2.js","assets/LineChart-BmFjTQSi.js","assets/lightbulb-aqlX02rn.js","assets/trending-down-DKmnzH0n.js","assets/StudentHistoryPage-CgzGHP5M.js","assets/exceljs.min-D4xxOZfQ.js","assets/StudentGamificationPage-BiQ6RIpD.js","assets/StudentMissionsPage-BYm0iJ2m.js","assets/StudentRankingPage-F8r_7u8g.js","assets/StudentCalendarPage-CUNJrpVi.js","assets/chevron-left-CFZ7hoC6.js","assets/isSameMonth-iICNHCxz.js","assets/subMonths-DN-7o1fr.js","assets/isToday-DelRzLgz.js","assets/isSameDay-BnIh4eio.js","assets/StudentDiscussionPage-Da9BwcP-.js","assets/StudentPublicQuizzesPage-CN6PropU.js","assets/brain-Bxac42-T.js","assets/StudentQuizPlayPage-B8m0VzcN.js","assets/play-DrhfLIYO.js","assets/StudentProfilePage-CUOqTsNr.js","assets/StudentFeedbackPage-D9XRBDwN.js","assets/StudentSettingsPage-B2divdsM.js","assets/mail-BUXdZObE.js"])))=>i.map(i=>d[i]);
import{c as y,a as A,r as n,j as e,s as R,l as E,g as t,k as C,h as T,i as s,N as I,_ as o}from"./main-BXI8jImK.js";import{S as V,M as L}from"./SidebarPremium-CqhK_O_u.js";import{B as M}from"./button-DhJSXayK.js";import{B as P}from"./bot-BYtHUSiL.js";import{X as q}from"./x-DhRNfShw.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],B=y("maximize-2",J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],$=y("minimize-2",F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],X=y("send",Q),W=({context:i={}})=>{const{user:b}=A(),[m,x]=n.useState(!1),[p,f]=n.useState(!1),[u,d]=n.useState([]),[h,v]=n.useState(""),[g,k]=n.useState(!1),_=n.useRef(null);n.useEffect(()=>{_.current&&_.current.scrollIntoView({behavior:"smooth"},[])},[u]),n.useEffect(()=>{if(m&&u.length===0){const r=i.classId?"Olá! Estou aqui para ajudar com suas dúvidas sobre esta turma. Como posso ajudar?":i.activityId?"Olá! Estou aqui para ajudar com esta atividade. Qual sua dúvida?":"Olá! Como posso ajudar você hoje?";d([{role:"assistant",content:r,timestamp:new Date}])}},[m,i]);const w=async()=>{if(!h.trim()||g)return;const r=h.trim();v(""),d(c=>[...c,{role:"user",content:r,timestamp:new Date}]),k(!0);try{const{data:{session:c}}=await R.auth.getSession(),a=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/chatbot-query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c?.access_token||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhcGJ3YWlta3VyYnVpaGF0bWl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyODY3MjksImV4cCI6MjA3NDg2MjcyOX0.x-NQQ2TtRgaUjjBZCf6j49eWOW4XSqjTFKC_KB1L56A"}`},body:JSON.stringify({message:r,class_id:i.classId,user_id:b?.id,conversation_history:u.filter(l=>l.role!=="assistant"||l.content!==u[0]?.content).slice(-6).map(l=>({role:l.role,content:l.content}))}),signal:AbortSignal.timeout(15e3)});if(!a.ok){E.warn("Edge function falhou, usando fallback");const l=N(r,i);d(D=>[...D,{role:"assistant",content:l,timestamp:new Date}]);return}const j=await a.json(),O=j.response||j.reply||"Desculpe, não consegui processar sua mensagem.";d(l=>[...l,{role:"assistant",content:O,timestamp:new Date}])}catch(c){E.error("Erro ao enviar mensagem:",c);const a=N(r);d(j=>[...j,{role:"assistant",content:a,timestamp:new Date}])}finally{k(!1)}},N=(r,c)=>{const a=r.toLowerCase();return a.includes("prazo")||a.includes("entrega")||a.includes("quando")?"Para informações sobre prazos, verifique os detalhes da atividade. Se tiver dúvidas específicas, consulte seu professor.":a.includes("nota")||a.includes("pontuação")||a.includes("avaliaç")?"As notas são atualizadas pelo professor após a correção. Você pode acompanhar seu progresso no painel de desempenho.":a.includes("como")||a.includes("ajuda")||a.includes("dúvida")?"Estou aqui para ajudar! Você pode me perguntar sobre prazos, formato de entrega, ou tirar dúvidas gerais. Para questões específicas do conteúdo, recomendo consultar o material da aula ou seu professor.":a.includes("material")||a.includes("arquivo")||a.includes("documento")?"Os materiais da aula estão disponíveis na página da turma. Verifique a seção de materiais para acessar os arquivos enviados pelo professor.":"Olá! Sou o assistente da TamanduAI. Posso ajudar com informações gerais sobre a plataforma, prazos e entregas. Para dúvidas específicas do conteúdo, recomendo entrar em contato com seu professor. Como posso ajudar?"};return m?e.jsxs("div",{className:`fixed bottom-6 right-6 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl z-50 flex flex-col transition-all ${p?"w-80 h-16":"w-96 h-[32rem]"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Assistente IA"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(!p),className:"hover:bg-white/20 p-1 rounded transition-colors",children:p?e.jsx(B,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(!1),className:"hover:bg-white/20 p-1 rounded transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50 dark:bg-slate-950",children:[u.map((r,c)=>e.jsx("div",{className:`flex ${r.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${r.role==="user"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-white dark:bg-slate-800 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-700"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:r.content})})},c)),g&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-2xl border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),e.jsx("div",{ref:_})]}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:r=>v(r.target.value),onKeyPress:r=>r.key==="Enter"&&w(),placeholder:"Digite sua mensagem...",className:"flex-1 px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:g,autoComplete:"off"}),e.jsx("button",{onClick:w,disabled:g||!h.trim(),className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0","aria-label":"Enviar mensagem",children:e.jsx(X,{className:"w-4 h-4"})})]})})]})]}):e.jsx("button",{onClick:()=>x(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all flex items-center justify-center z-50","aria-label":"Abrir chatbot",children:e.jsx(P,{className:"w-6 h-6"})})},z=t.memo(({onMenuClick:i})=>e.jsxs("div",{className:"lg:hidden sticky top-0 z-40 bg-card border-b border-border px-4 py-3 flex items-center gap-4",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Abrir menu",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-cyan-600 to-blue-700 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"T"})}),e.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-cyan-600 to-blue-700 bg-clip-text text-transparent",children:"TamanduAI"})]})]}));z.displayName="MobileHeader";const S=t.memo(({children:i})=>{const[b,m]=n.useState(!1),x=C(),p=n.useCallback(()=>m(!1),[]),f=n.useCallback(()=>m(!0),[]),u=n.useMemo(()=>{const d=x.pathname.match(/\/students\/classes\/([a-f0-9-]+)/);return d?{classId:d[1]}:{}},[x.pathname]);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(V,{isOpen:b,onClose:p}),e.jsxs("div",{className:"lg:pl-[280px] min-h-screen",children:[e.jsx(z,{onMenuClick:f}),e.jsx("main",{className:"w-full",children:i})]}),e.jsx(W,{context:u})]})});S.displayName="StudentLayout";const Y=t.lazy(()=>o(()=>import("./StudentDashboard-z6WyuI5C.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),G=t.lazy(()=>o(()=>import("./StudentClassesPage-C-TM-oJS.js"),__vite__mapDeps([31,1,2,3,4,32,33,34,35,16,36,37,18,38,39,22,40,41,7,12,14]))),H=t.lazy(()=>o(()=>import("./StudentClassDetailsPage-BcKI_7Yo.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,43,37,18,38,44,45,29,46,20,47,48,22,49,50,51,52,53,54,27,55,56,57,58,59,60,61,62,30,28,32,35,63,64,65]))),Z=t.lazy(()=>o(()=>import("./StudentActivitiesPage-DaaWF3bc.js"),__vite__mapDeps([66,1,2,4,5,3,6,7,8,9,10,11,12,13,14,15,16,43,37,18,38,67,39,68,62,40,61,69,33,22,70,32,36,41,71,20,46,29,63,28]))),K=t.lazy(()=>o(()=>import("./StudentActivityDetailsPage-igP8_59j.js"),__vite__mapDeps([72,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,43,37,18,38,41,32,56,73,67,39,68,62,40,61,17,44,33,36,22,57,28,64,20,74,19,75,65,49,48,76,77,78,79,47,50]))),U=t.lazy(()=>o(()=>import("./StudentPerformancePage-qaoOKL0K.js"),__vite__mapDeps([80,1,2,4,5,3,6,7,8,9,10,11,12,13,14,15,16,17,18,69,33,22,32,36,37,38,39,40,41,44,81,23,24,82,83,28,84,21,60]))),ee=t.lazy(()=>o(()=>import("./StudentHistoryPage-CgzGHP5M.js"),__vite__mapDeps([85,1,2,69,4,33,3,22,5,6,7,8,9,10,11,12,13,14,15,16,32,36,37,18,38,39,40,41,17,67,68,62,61,44,86,71,55,20,46,23,24,25,49,48,50]))),se=t.lazy(()=>o(()=>import("./StudentGamificationPage-BiQ6RIpD.js"),__vite__mapDeps([87,1,2,4,5,3,6,7,8,9,10,11,12,13,14,15,16,17,18,69,33,22,32,36,37,38,39,40,41,21,26]))),te=t.lazy(()=>o(()=>import("./StudentMissionsPage-BYm0iJ2m.js"),__vite__mapDeps([88,1,2,4,5,3,6,7,8,9,10,11,12,13,14,15,16,17,18,33,32,36,37,38,39,22,40,41,81]))),ae=t.lazy(()=>o(()=>import("./StudentRankingPage-F8r_7u8g.js"),__vite__mapDeps([89,1,2,4,33,3,32,36,37,18,38,39,22,40,41]))),oe=t.lazy(()=>o(()=>import("./StudentCalendarPage-CUNJrpVi.js"),__vite__mapDeps([90,1,2,4,5,3,6,7,8,9,10,11,12,13,14,15,16,91,22,20,27,92,48,79,93,49,94,77,95,50]))),re=t.lazy(()=>o(()=>import("./StudentDiscussionPage-Da9BwcP-.js"),__vite__mapDeps([96,1,2,4,33,3,32,36,37,18,38,39,22,40,41,57]))),ne=t.lazy(()=>o(()=>import("./StudentPublicQuizzesPage-CN6PropU.js"),__vite__mapDeps([97,1,2,4,33,3,32,36,37,18,38,39,22,40,41,98]))),ie=t.lazy(()=>o(()=>import("./StudentQuizPlayPage-B8m0VzcN.js"),__vite__mapDeps([99,1,2,4,33,3,32,36,37,18,38,39,22,40,41,100]))),le=t.lazy(()=>o(()=>import("./StudentProfilePage-CUOqTsNr.js"),__vite__mapDeps([101,1,2,4,32,3,33,36,37,18,38,39,22,40,41,44]))),de=t.lazy(()=>o(()=>import("./StudentFeedbackPage-D9XRBDwN.js"),__vite__mapDeps([102,1,2,4,5,3,6,7,8,9,10,11,12,13,14,15,16,33,32,36,37,18,38,39,22,40,41,57]))),ce=t.lazy(()=>o(()=>import("./StudentSettingsPage-B2divdsM.js"),__vite__mapDeps([103,1,2,4,3,5,6,7,8,9,10,11,12,13,14,15,16,104,75]))),ue=()=>e.jsx(S,{children:e.jsxs(T,{children:[e.jsx(s,{index:!0,element:e.jsx(Y,{})}),e.jsx(s,{path:"dashboard",element:e.jsx(I,{to:"/students",replace:!0})}),e.jsx(s,{path:"classes",element:e.jsx(G,{})}),e.jsx(s,{path:"classes/:classId",element:e.jsx(H,{})}),e.jsx(s,{path:"activities",element:e.jsx(Z,{})}),e.jsx(s,{path:"activities/:activityId",element:e.jsx(K,{})}),e.jsx(s,{path:"performance",element:e.jsx(U,{})}),e.jsx(s,{path:"history",element:e.jsx(ee,{})}),e.jsx(s,{path:"gamification",element:e.jsx(se,{})}),e.jsx(s,{path:"missions",element:e.jsx(te,{})}),e.jsx(s,{path:"ranking",element:e.jsx(ae,{})}),e.jsx(s,{path:"calendar",element:e.jsx(oe,{})}),e.jsx(s,{path:"discussion",element:e.jsx(re,{})}),e.jsx(s,{path:"quizzes",element:e.jsx(ne,{})}),e.jsx(s,{path:"quiz/:quizId",element:e.jsx(ie,{})}),e.jsx(s,{path:"profile",element:e.jsx(le,{})}),e.jsx(s,{path:"feedback",element:e.jsx(de,{})}),e.jsx(s,{path:"settings",element:e.jsx(ce,{})}),e.jsx(s,{path:"*",element:e.jsx(I,{to:"/students",replace:!0})})]})}),je=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{W as C,X as S,je as r};
