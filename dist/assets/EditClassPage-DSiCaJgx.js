import{r as c,j as e,m as k,u as E,k as T}from"./main-XRKQFEIr.js";import{B as i}from"./button-D4bIZ4Ty.js";import{I as v}from"./input-BrWaMOrb.js";import{L as p}from"./label-_ADcUmGf.js";import{C as j}from"./card-BEk2G2Us.js";import{c as C,D as S}from"./DashboardHeader-B78p6TYW.js";import"./dropdown-menu-DyRCHyY4.js";import{C as A}from"./CopyButton-Bo146NzA.js";import{C as B}from"./check-Cifhij8e.js";import{C as u}from"./classService-CdCOAqzz.js";import{A as D}from"./arrow-left-faOheEeC.js";import{S as F}from"./save-i4jRp2ou.js";import{A as q}from"./archive-BOEsudUe.js";import{T as L}from"./trash-2-BFBmoqwg.js";import"./Combination-TYhCc4jv.js";import"./index-ysAnX8Hi.js";import"./index-B_kCUa_t.js";import"./chevron-right-C-DpTlMS.js";import"./index-e3XtT_BD.js";import"./copy-M4T8qqHL.js";import"./notificationOrchestrator-CAq-rZNW.js";const $=({value:r="#3B82F6",onChange:t,label:h="Cor",presets:x=null,allowCustom:g=!0})=>{const[d,m]=c.useState(r),f=x||[{name:"Azul",color:"#3B82F6",gradient:"from-blue-500 to-blue-600"},{name:"Ciano",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Azul Escuro",color:"#1E40AF",gradient:"from-blue-700 to-blue-800"},{name:"Verde",color:"#10B981",gradient:"from-green-500 to-green-600"},{name:"Amarelo",color:"#F59E0B",gradient:"from-amber-500 to-amber-600"},{name:"Vermelho",color:"#EF4444",gradient:"from-red-500 to-red-600"},{name:"Indigo",color:"#6366F1",gradient:"from-indigo-500 to-indigo-600"},{name:"Teal",color:"#14B8A6",gradient:"from-teal-500 to-teal-600"},{name:"Laranja",color:"#F97316",gradient:"from-orange-500 to-orange-600"},{name:"Cyan",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Lime",color:"#84CC16",gradient:"from-lime-500 to-lime-600"},{name:"Slate",color:"#64748B",gradient:"from-slate-500 to-slate-600"}],l=s=>{t(s)},n=s=>{const b=s.target.value;m(b),t(b)};return e.jsxs("div",{children:[h&&e.jsx(p,{className:"text-sm font-semibold mb-3 block",children:h}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:f.map(s=>e.jsx("button",{type:"button",onClick:()=>l(s.color),className:`
              relative w-full aspect-square rounded-lg
              bg-gradient-to-br ${s.gradient}
              hover:scale-110 transition-transform
              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
              dark:focus:ring-offset-slate-900
            `,title:s.name,children:r===s.color&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-white dark:bg-slate-900 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(B,{className:"w-4 h-4 text-slate-900 dark:text-white"})})})},s.color))}),g&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"color",value:d,onChange:n,className:`
                w-full h-10 rounded-lg cursor-pointer
                border-2 ${C.border.default}
                focus:ring-2 focus:ring-blue-500 focus:border-blue-500
              `})}),e.jsx("div",{className:`
            flex-1 px-3 py-2 rounded-lg border ${C.border.default}
            bg-white dark:bg-slate-900 text-sm font-mono
            ${C.text.primary}
          `,children:d.toUpperCase()})]}),e.jsx("div",{className:"mt-4 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg shadow-md",style:{backgroundColor:r}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-1",children:"Cor Selecionada"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:r.toUpperCase()})]})]})})]})},se=()=>{const{classId:r}=k(),t=E(),[h,x]=c.useState(!0),[g,d]=c.useState(!1),[m,f]=c.useState(null),[l,n]=c.useState({name:"",subject:"",description:"",color:"#3B82F6"});c.useEffect(()=>{s()},[r]);const s=async()=>{try{x(!0);const a=await u.getClassById(r);f(a),n({name:a.name||"",subject:a.subject||"",description:a.description||"",color:a.color||"#3B82F6"})}catch(a){console.error("Erro ao carregar turma:",a)}finally{x(!1)}},b=async()=>{try{d(!0),await u.updateClass(r,l),alert("Turma atualizada com sucesso!"),t(`/dashboard/classes/${r}`)}catch(a){console.error("Erro ao salvar:",a),alert("Erro ao salvar. Tente novamente.")}finally{d(!1)}},N=async()=>{if(confirm("Tem certeza que deseja arquivar esta turma?"))try{await u.archiveClass(r),alert("Turma arquivada!"),t("/dashboard/classes")}catch(a){console.error("Erro ao arquivar:",a),alert("Erro ao arquivar. Tente novamente.")}},w=async()=>{if(confirm("TEM CERTEZA? Esta ação não pode ser desfeita!"))try{await u.deleteClass(r),alert("Turma deletada!"),t("/dashboard/classes")}catch(a){console.error("Erro ao deletar:",a),alert("Erro ao deletar. Tente novamente.")}},y=async()=>{try{const a=await u.generateInviteCode(r);f(o=>({...o,invite_code:a})),alert("Novo código gerado!")}catch(a){console.error("Erro:",a),alert("Erro ao gerar código.")}};return h?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(T,{size:"lg",text:"Carregando..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(i,{variant:"ghost",onClick:()=>t(`/dashboard/classes/${r}`),className:"mb-4",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(S,{title:"Editar Turma",subtitle:m?.name||"",role:"teacher"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx(j,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Nome da Turma *"}),e.jsx(v,{value:l.name,onChange:a=>n(o=>({...o,name:a.target.value})),placeholder:"Ex: Matemática 3º Ano A"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Matéria/Disciplina"}),e.jsx(v,{value:l.subject,onChange:a=>n(o=>({...o,subject:a.target.value})),placeholder:"Ex: Matemática"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Descrição"}),e.jsx("textarea",{value:l.description,onChange:a=>n(o=>({...o,description:a.target.value})),placeholder:"Descrição da turma...",rows:4,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsx($,{label:"Cor da Turma",value:l.color,onChange:a=>n(o=>({...o,color:a}))})]})}),e.jsxs(j,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Código de Convite"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{value:m?.invite_code||"",readOnly:!0}),e.jsx(A,{text:m?.invite_code||"",label:"Copiar"})]}),e.jsx(i,{variant:"outline",onClick:y,className:"w-full",children:"Gerar Novo Código"})]}),e.jsx(j,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(i,{onClick:b,disabled:g,className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),g?"Salvando...":"Salvar"]}),e.jsx(i,{variant:"outline",onClick:()=>t(`/dashboard/classes/${r}`),children:"Cancelar"})]})}),e.jsxs(j,{className:"p-6 bg-white dark:bg-slate-900 border-red-200 dark:border-red-800",children:[e.jsx("h3",{className:"font-bold text-red-600 dark:text-red-400 mb-4",children:"Zona de Perigo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{variant:"outline",onClick:N,className:"w-full text-amber-600 border-amber-300",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Arquivar Turma"]}),e.jsxs(i,{variant:"outline",onClick:w,className:"w-full text-red-600 border-red-300",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Excluir Turma"]})]})]})]})]})};export{se as default};
