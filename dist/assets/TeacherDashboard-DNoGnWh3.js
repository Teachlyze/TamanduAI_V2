import{a as ye,r,s as o,l as q,j as e,p as me,u as Ve,L as j}from"./main-CQL62Pt9.js";import{D as Le,a as Re,b as He,c as Be,d as Ue,e as We}from"./dialog-B9c0IAUh.js";import{B as l,m as v}from"./button-CXd9Ydu2.js";import{L as de}from"./label-C6FIu0Ui.js";import{S as Xe,a as Je,b as Ke,c as Qe,d as Ye}from"./select-tvX7IKuR.js";import{I as fe}from"./input-ChgTSeH3.js";import{u as Ze}from"./use-toast-Djw8A-a9.js";import{S as je}from"./send-BaqO2JPh.js";import{U as Ne}from"./users-BtfqzUVv.js";import{C as _}from"./index-zZOcwNkD.js";import{C as Q}from"./clock-sqyMS1RB.js";import{X as et}from"./x-Q__6dFVj.js";import{E as tt}from"./EventDetailsModal-CC5vDix3.js";import{C as w}from"./card-CeKCmDnl.js";import{h as X}from"./SidebarPremium--x3DStDs.js";import{S as at}from"./StatsCard-_VCgEifS.js";import{D as st}from"./DashboardHeader-CrYjSP7a.js";import{E as I}from"./EmptyState-CrflLsHx.js";import"./dropdown-menu-jZureaoX.js";import{a as ve}from"./addDays-pVIPqqUr.js";import{i as rt}from"./isToday-By0hfvNN.js";import{B as ne,C as J}from"./chevron-right-CC_eXMfz.js";import{T as it}from"./trending-up-CC7Upw_D.js";import{T as lt}from"./target-B6zYQNu4.js";import{V as we}from"./video-BREjiski.js";import{F as oe}from"./file-text-0rRUQINA.js";import{M as dt}from"./map-pin-BSh05kW8.js";import{P as ce}from"./plus-CaXgjLmQ.js";import{T as nt}from"./triangle-alert-DTtz5ZUJ.js";import{C as ot}from"./circle-check-D4gDjWOk.js";import{C as ct}from"./chart-column-BKLyUAC0.js";import{f as K}from"./format-BcFT9btV.js";import{p as mt}from"./pt-BR-CuGSKEGQ.js";import"./index-DFnaGz4y.js";import"./index-DSsiGnWz.js";import"./index-DDNZOoSI.js";import"./index-DINBhsjz.js";import"./chevron-down-YUUkz_4P.js";import"./check-sjd9Yckd.js";import"./chevron-up-BVK31s49.js";import"./user-DAj5MP6f.js";import"./square-pen-CbR7RYpw.js";import"./copy-h-QjC0o2.js";import"./trash-2-Cxkxlzod.js";import"./bell-CU7gBYYE.js";import"./settings-Dvldtua5.js";import"./house-Dxla3ep4.js";import"./graduation-cap-BjoHLR7H.js";import"./index-CtJ7EUUg.js";import"./en-US-B6HbAA6N.js";import"./constructNow-re94FRT2.js";import"./isSameDay-D5LInQhv.js";const xt=({open:x,onClose:S,activity:z,onSuccess:y})=>{const{user:C}=ye(),{toast:u}=Ze(),[b,D]=r.useState([]),[E,Y]=r.useState(""),[n,A]=r.useState(""),[T,F]=r.useState("23:59"),[f,O]=r.useState(!1),[M,$]=r.useState(!1);r.useEffect(()=>{if(x&&C){V();const a=new Date;a.setDate(a.getDate()+7),A(a.toISOString().split("T")[0])}},[x,C]);const V=async()=>{try{$(!0);const{data:a,error:g}=await o.from("classes").select("id, name, subject, is_active").eq("created_by",C.id).eq("is_active",!0).order("name",{ascending:!0});if(g)throw g;D(a||[])}catch(a){q.error("Erro ao carregar turmas:",a),u({title:"Erro ao carregar turmas",description:a.message,variant:"destructive"})}finally{$(!1)}},L=async()=>{if(!E){u({title:"Selecione uma turma",description:"Escolha a turma para postar a atividade.",variant:"destructive"});return}if(!n){u({title:"Defina a data de entrega",description:"A data de entrega Ã© obrigatÃ³ria.",variant:"destructive"});return}try{O(!0);const a=`${n}T${T}:00`,{data:g,error:R}=await o.from("activity_class_assignments").insert({activity_id:z.id,class_id:E,assigned_by:C.id,due_date:a,is_published:!0}).select().single();if(R)throw R;u({title:"âœ… Atividade postada!",description:"A atividade foi postada para a turma selecionada."}),y&&y(g),S()}catch(a){q.error("Erro ao postar atividade:",a),u({title:"Erro ao postar atividade",description:a.message,variant:"destructive"})}finally{O(!1)}},P=()=>{f||(Y(""),A(""),F("23:59"),S())};return e.jsx(Le,{open:x,onOpenChange:P,children:e.jsxs(Re,{className:"max-w-md",children:[e.jsxs(He,{children:[e.jsxs(Be,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-blue-600"}),"Postar Atividade"]}),e.jsx(Ue,{children:"Escolha a turma e defina a data de entrega para postar esta atividade."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Atividade:"}),e.jsx("p",{className:"font-semibold",children:z?.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"class",children:[e.jsx(Ne,{className:"w-4 h-4 inline mr-1"}),"Turma *"]}),M?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(me,{size:"sm"})}):e.jsxs(Xe,{value:E,onValueChange:Y,children:[e.jsx(Je,{id:"class",children:e.jsx(Ke,{placeholder:"Selecione a turma..."})}),e.jsx(Qe,{children:b.map(a=>e.jsxs(Ye,{value:a.id,children:[a.name," ",a.subject&&`- ${a.subject}`]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"due-date",children:[e.jsx(_,{className:"w-4 h-4 inline mr-1"}),"Data de Entrega *"]}),e.jsx(fe,{id:"due-date",type:"date",value:n,onChange:a=>A(a.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"due-time",children:[e.jsx(Q,{className:"w-4 h-4 inline mr-1"}),"Hora de Entrega"]}),e.jsx(fe,{id:"due-time",type:"time",value:T,onChange:a=>F(a.target.value)})]})]}),e.jsxs(We,{children:[e.jsxs(l,{variant:"outline",onClick:P,disabled:f,children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),e.jsx(l,{onClick:L,disabled:f||!E||!n,children:f?e.jsxs(e.Fragment,{children:[e.jsx(me,{size:"sm",className:"mr-2"}),"Postando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Postar Atividade"]})})]})]})})},ma=()=>{const{user:x}=ye(),S=Ve(),[z,y]=r.useState(!0),[C,u]=r.useState(null),[b,D]=r.useState(7),[E,Y]=r.useState("all"),[n,A]=r.useState({totalClasses:0,totalStudents:0,totalActivities:0,pendingGrading:0,avgGrade:0,todayCorrections:0}),[T,F]=r.useState([]),[f,O]=r.useState([]),[M,$]=r.useState([]),[V,L]=r.useState([]),[P,a]=r.useState([]),[g,R]=r.useState([]),[xe,ke]=r.useState([]),[_e,Z]=r.useState(!1),[Se,ee]=r.useState(null),[he,te]=r.useState(!1),[ae,se]=r.useState(null);r.useEffect(()=>{N()},[]);const N=async()=>{if(!x?.id){y(!1);return}try{y(!0),u(null),q.debug("[TeacherDashboard] Carregando dados...");const{data:t,error:i}=await o.from("classes").select(`
          *,
          class_members(count)
        `).eq("created_by",x.id).eq("is_active",!0);if(i)throw i;const c=t?.map(s=>({...s,student_count:s.class_members?.[0]?.count||0}))||[],{data:h,error:H}=await o.from("activities").select(`
          *,
          activity_class_assignments(class:classes(name))
        `).eq("created_by",x.id).order("created_at",{ascending:!1}).limit(10);if(H)throw H;const re=h?.map(s=>({...s,class_name:s.activity_class_assignments?.[0]?.class?.name||"Sem turma"}))||[],G=h?.map(s=>s.id)||[],{data:B,error:k}=await o.from("submissions").select(`
          *,
          activity:activities(title),
          student:profiles!student_id(full_name)
        `).in("activity_id",G).eq("status","submitted").order("submitted_at",{ascending:!0}).limit(10);if(k)throw k;const Ee=B?.map(s=>({...s,student_name:s.student?.full_name||"Aluno",activity_title:s.activity?.title||"Atividade"}))||[],{data:ie,error:ge}=await o.from("submissions").select("grade").in("activity_id",G).not("grade","is",null);if(ge)throw ge;const Ae=ie?.length>0?ie.reduce((s,m)=>s+m.grade,0)/ie.length:0,U=new Date;U.setHours(0,0,0,0);const W=new Date(U);W.setDate(W.getDate()+1);const{data:Te,error:ue}=await o.from("submissions").select("id").in("activity_id",G).gte("graded_at",U.toISOString()).lt("graded_at",W.toISOString());if(ue)throw ue;const Pe=ve(new Date,b),{data:le,error:Ge}=await o.from("calendar_events").select("*").eq("created_by",x.id).gte("start_time",new Date().toISOString()).lte("start_time",Pe.toISOString()).order("start_time",{ascending:!0}).limit(4);!Ge&&le&&(L(le),a(le.filter(s=>rt(new Date(s.start_time)))));const{data:pe,error:Ie}=await o.from("calendar_events").select("*").eq("created_by",x.id).in("type",["meeting","reuniÃ£o"]).gte("start_time",new Date().toISOString()).lte("start_time",ve(new Date,b).toISOString()).order("start_time",{ascending:!0}).limit(4);if(!Ie&&pe){const s=pe.map(m=>({...m,title:m.title,start_time:m.start_time,type:"meeting"}));L(m=>[...m,...s].sort((d,p)=>new Date(d.start_time)-new Date(p.start_time)).slice(0,4))}const{data:be,error:qe}=await o.from("submissions").select(`
          student_id,
          grade,
          student:profiles!student_id(full_name)
        `).in("activity_id",G).not("grade","is",null);if(!qe&&be){const s={};be.forEach(d=>{s[d.student_id]||(s[d.student_id]={grades:[],name:d.student?.full_name||"Aluno"}),s[d.student_id].grades.push(d.grade)});const m=Object.entries(s).map(([d,p])=>({id:d,name:p.name,avgGrade:p.grades.reduce((Me,$e)=>Me+$e,0)/p.grades.length,totalActivities:p.grades.length})).filter(d=>d.avgGrade<6).sort((d,p)=>d.avgGrade-p.avgGrade).slice(0,10);R(m)}const{data:ze,error:Fe}=await o.from("activities").select("*").eq("created_by",x.id).eq("status","draft").gte("created_at",U.toISOString()).lt("created_at",W.toISOString());Fe||ke(ze||[]);const Oe=c.reduce((s,m)=>s+(m.student_count||0),0);A({totalClasses:c.length,totalStudents:Oe,totalActivities:h?.length||0,pendingGrading:B?.length||0,avgGrade:Number(Ae.toFixed(1)),todayCorrections:Te?.length||0}),F(c.slice(0,5)),O(re.slice(0,5)),$(Ee),q.debug("[TeacherDashboard] Dados carregados com sucesso")}catch(t){q.error("Erro ao carregar dashboard:",t),u("Erro ao carregar dados do dashboard. Tente novamente.")}finally{y(!1)}},Ce=[{title:"Total de Turmas",value:n.totalClasses,icon:ne,gradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50 dark:bg-blue-950/30",change:`${n.totalStudents} alunos`},{title:"Total de Alunos",value:n.totalStudents,icon:Ne,gradient:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-50 dark:bg-cyan-950/30"},{title:"MÃ©dia Geral",value:n.avgGrade,icon:it,gradient:"from-emerald-500 to-teal-500",bgColor:"bg-emerald-50 dark:bg-emerald-950/30",change:n.avgGrade>=7?"Excelente":"Pode melhorar"},{title:"Aguardando CorreÃ§Ã£o",value:n.pendingGrading,icon:Q,gradient:"from-amber-500 to-orange-500",bgColor:"bg-amber-50 dark:bg-amber-950/30",change:`${n.todayCorrections} hoje`}],De=[{label:"Nova Turma",icon:ce,href:"/dashboard/classes/new",gradient:"from-blue-600 to-indigo-600"},{label:"Nova Atividade",icon:ce,href:"/dashboard/activities/new",gradient:"from-blue-600 to-cyan-600"},{label:"Ver Analytics",icon:ct,href:"/dashboard/analytics",gradient:"from-emerald-600 to-teal-600"}];return z?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(me,{size:"lg",text:"Carregando dashboard..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsx(st,{title:"Dashboard do Professor",subtitle:"Bem-vindo de volta! Aqui estÃ¡ um resumo das suas turmas e atividades.",role:"teacher"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Ce.map((t,i)=>e.jsx(at,{title:t.title,value:t.value,icon:t.icon,gradient:t.gradient,bgColor:t.bgColor,change:t.change,delay:i*.1},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"PrÃ³ximos Eventos"})]}),e.jsx(j,{to:"/dashboard/calendar",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todos"}),e.jsx(J,{className:"w-4 h-4"})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(l,{size:"sm",variant:b===1?"default":"outline",onClick:()=>{D(1),N()},children:"Hoje"}),e.jsx(l,{size:"sm",variant:b===3?"default":"outline",onClick:()=>{D(3),N()},children:"3 dias"}),e.jsx(l,{size:"sm",variant:b===7?"default":"outline",onClick:()=>{D(7),N()},children:"7 dias"})]}),e.jsx("div",{className:"space-y-3",children:V.length>0?V.map((t,i)=>e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-600 to-cyan-500 rounded-lg flex flex-col items-center justify-center text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:K(new Date(t.start_time),"d")}),e.jsx("div",{className:"text-xs uppercase",children:K(new Date(t.start_time),"MMM",{locale:mt})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:K(new Date(t.start_time),"HH:mm")}),e.jsx(X,{className:`mt-1 ${t.type==="meeting"?"bg-purple-100 text-purple-700":t.type==="activity"?"bg-orange-100 text-orange-700":t.type==="deadline"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:t.type==="event"?"Aula":t.type==="activity"?"Atividade":t.type==="meeting"?"ReuniÃ£o":t.type==="deadline"?"Prazo":"Evento"})]})]},t.id)):e.jsx(I,{icon:_,title:"Nenhum evento prÃ³ximo",description:"Seus prÃ³ximos eventos aparecerÃ£o aqui."})})]}),e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Agenda de Hoje"})]}),e.jsxs("div",{className:"space-y-4",children:[P.length>0?e.jsx("div",{className:"space-y-3",children:P.map((t,i)=>{const c=t.type==="meeting"||t.type==="reuniÃ£o",h=t.type==="activity"||t.type==="atividade",H=t.modality==="online",re=t.modality==="presential",B=c?we:h?oe:_;return e.jsx(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.1},onClick:()=>{se(t),te(!0)},className:"p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 cursor-pointer transition-all bg-white dark:bg-slate-800 hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${c?"bg-purple-100 dark:bg-purple-900/30":h?"bg-orange-100 dark:bg-orange-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:e.jsx(B,{className:`w-5 h-5 ${c?"text-purple-600":h?"text-orange-600":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:t.title}),e.jsx(X,{className:`whitespace-nowrap ${c?"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300":h?"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"}`,children:c?"ðŸ“¹ ReuniÃ£o":h?"ðŸ“ Atividade":"ðŸ“… Evento"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 dark:text-slate-400 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),K(new Date(t.start_time),"HH:mm")]}),c&&H&&t.meeting_link&&e.jsxs("a",{href:t.meeting_link,target:"_blank",rel:"noopener noreferrer",onClick:k=>k.stopPropagation(),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 hover:underline",children:[e.jsx(we,{className:"w-4 h-4"}),"Entrar na reuniÃ£o"]}),c&&re&&t.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"w-4 h-4"}),t.location]})]}),t.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 line-clamp-1",children:t.description})]}),h&&t.activity_id&&e.jsx(l,{size:"sm",onClick:k=>{k.stopPropagation(),ee({id:t.activity_id,title:t.title}),Z(!0)},className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-md",children:"Postar"})]})},t.id)})}):e.jsx(I,{icon:_,title:"Nenhum evento hoje",description:"Sua agenda estÃ¡ livre hoje."}),xe.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Atividades para Postar"}),xe.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 mb-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:t.title})}),e.jsx(l,{size:"sm",className:"bg-gradient-to-r from-blue-600 to-cyan-600",onClick:()=>{ee(t),Z(!0)},children:"Postar"})]},t.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Turmas Recentes"]}),e.jsx(j,{to:"/dashboard/classes",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(J,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:T.length>0?T.map((t,i)=>e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},children:e.jsx(j,{to:`/dashboard/classes/${t.id}`,children:e.jsx(w,{className:"p-4 hover:shadow-md transition-all border-2 hover:border-blue-200 dark:hover:border-blue-800 bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${t.color||"from-blue-500 to-indigo-500"} flex items-center justify-center text-white font-bold`,children:t.name?.[0]||"T"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.subject||"Sem matÃ©ria"," â€¢ ",t.student_count||0," alunos"]})]})]}),e.jsx(l,{size:"sm",variant:"ghost",className:"whitespace-nowrap",children:"Ver Turma"})]})})})},t.id)):e.jsx(I,{icon:ne,title:"Nenhuma turma encontrada",description:"Crie sua primeira turma para comeÃ§ar a gerenciar suas aulas e atividades.",actionLabel:"Criar Primeira Turma",actionIcon:ce,action:()=>window.location.href="/dashboard/classes/new"})})]}),e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Atividades Recentes"]}),e.jsx(j,{to:"/dashboard/activities",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(J,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:f.length>0?f.map((t,i)=>e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:t.class_name}),e.jsx("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),new Date(t.due_date).toLocaleDateString("pt-BR")]})})]}),e.jsx(X,{variant:t.status==="archived"?"secondary":new Date(t.due_date)<new Date?"destructive":"default",className:"whitespace-nowrap",children:t.status==="archived"?"Arquivada":new Date(t.due_date)<new Date?"Encerrada":"Aberta"})]})},t.id)):e.jsx(I,{icon:oe,title:"Nenhuma atividade encontrada",description:"Suas atividades recentes aparecerÃ£o aqui."})})]})]}),g.length>0&&e.jsxs(w,{className:"p-6 mb-8 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20 border-2 border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/40",children:e.jsx(nt,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Alunos que Precisam de AtenÃ§Ã£o"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[g.length," aluno",g.length>1?"s":""," com desempenho abaixo de 6.0"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map((t,i)=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:i*.05},className:"flex items-center gap-4 p-4 rounded-lg bg-white dark:bg-slate-900 border-2 border-yellow-200 dark:border-yellow-800 hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-white font-bold text-lg",children:t.name?.[0]||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(X,{className:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 text-xs",children:["MÃ©dia: ",t.avgGrade.toFixed(1)]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[t.totalActivities," atividade",t.totalActivities>1?"s":""]})]})]}),e.jsx(l,{size:"sm",variant:"outline",className:"whitespace-nowrap border-yellow-600 text-yellow-700 hover:bg-yellow-50",onClick:()=>S(`/dashboard/students/${t.id}`),children:"Ver Detalhes"})]},t.id))})]}),e.jsxs(w,{className:"p-6 mb-8 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"SubmissÃµes Pendentes de CorreÃ§Ã£o"]}),e.jsx(j,{to:"/dashboard/grading",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(J,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:M.length>0?M.map((t,i)=>e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-center justify-between p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all bg-white dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-white font-bold",children:t.student_name?.[0]||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.student_name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.activity_title}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Enviado em ",new Date(t.submitted_at).toLocaleDateString("pt-BR")]})]})]}),e.jsx(j,{to:`/dashboard/grading/${t.id}`,children:e.jsx(l,{size:"sm",className:"whitespace-nowrap bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white",children:"Corrigir Agora"})})]},t.id)):e.jsx(I,{icon:ot,title:"Nenhuma correÃ§Ã£o pendente!",description:"ParabÃ©ns! VocÃª estÃ¡ em dia com as correÃ§Ãµes. ðŸŽ‰"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:De.map((t,i)=>e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(j,{to:t.href,children:e.jsxs(l,{size:"lg",className:`w-full whitespace-nowrap inline-flex items-center justify-center gap-2 bg-gradient-to-r ${t.gradient} hover:opacity-90 text-white h-16 text-lg`,children:[e.jsx(t.icon,{className:"w-6 h-6"}),e.jsx("span",{children:t.label})]})})},t.label))}),e.jsx(xt,{open:_e,onClose:()=>{Z(!1),ee(null)},activity:Se,onSuccess:t=>{console.log("âœ… Atividade postada:",t),N()}}),he&&ae&&e.jsx(tt,{isOpen:he,onClose:()=>{te(!1),se(null)},event:ae,onEdit:()=>{S("/dashboard/calendar")},onDelete:async()=>{await o.from("calendar_events").delete().eq("id",ae.id),te(!1),se(null),N()}})]})};export{ma as default};
