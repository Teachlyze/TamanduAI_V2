const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StudentDashboardRedesigned-BY-diVq8.js","assets/main-XXuEaTDd.js","assets/main-rhinUMk9.css","assets/StatCard-CDlbaoQG.js","assets/card-BmX5EBcq.js","assets/button-CnByYIhr.js","assets/ActivityCard-B8Hstpz7.js","assets/SidebarPremium-eC0udO90.js","assets/message-circle-Bnfe4kSM.js","assets/book-open-C2-Re7kr.js","assets/trending-up-B04abNi1.js","assets/user-DGN0W0vL.js","assets/settings-BoPgazzK.js","assets/index-DlVMVqW0.js","assets/house-Cqu6JObC.js","assets/users-DHSoS6td.js","assets/graduation-cap-CrHOTf4P.js","assets/calendar-Dh85b9lX.js","assets/chart-column-B4DM1V4B.js","assets/index-BgsUcMRO.js","assets/chevron-right-DahHX28a.js","assets/x-rANpGSmW.js","assets/differenceInHours-DzWJNcba.js","assets/getRoundingMethod-D0I6Z7xl.js","assets/en-US-B6HbAA6N.js","assets/formatDistanceToNow-CMbiJYtj.js","assets/constructNow-re94FRT2.js","assets/differenceInCalendarMonths-FFYroMBa.js","assets/endOfDay-mJ-5sjFp.js","assets/endOfMonth-BD-g1yyK.js","assets/circle-alert-DpTuNaUs.js","assets/clock-DxFS_FvX.js","assets/circle-check-DMR9b9xr.js","assets/target-CmLpcK5A.js","assets/format-BcFT9btV.js","assets/pt-BR-CuGSKEGQ.js","assets/EventCard-CKoecwJ8.js","assets/video-BpmMnI4Z.js","assets/map-pin-BDiE9CoN.js","assets/EmptyState-Ctb7qduM.js","assets/dialog-CAxGtlMo.js","assets/index-DCGojTwo.js","assets/star-DXmWvebf.js","assets/LineChart-L7MIOZHE.js","assets/index-jFx9-Tvj.js","assets/BarChart-DTKWfWd5.js","assets/StudentClassesPageRedesigned-BzW4poY8.js","assets/input-BsdcwXwo.js","assets/tabs-CJs0R_ND.js","assets/index-D_6pv9Jf.js","assets/index-BUvRw9fk.js","assets/index-eRwsCZ6_.js","assets/search-DA0AR_R_.js","assets/grid-3x3-DHob8wad.js","assets/list-h1bolNNv.js","assets/StudentClassDetailsPageRedesigned-BKM__zL6.js","assets/download-C_AE34L-.js","assets/file-njnD2xNh.js","assets/avatar-BWB29tzz.js","assets/textarea-bPIO_dWz.js","assets/use-toast-nLXEkatJ.js","assets/heart-9HIblhsp.js","assets/trash-2-yvc9XNef.js","assets/send-DaNDC1MG.js","assets/arrow-left-C4-QSKI2.js","assets/StudentActivitiesPageRedesigned-HJ5wk76x.js","assets/select-81O4nd2V.js","assets/index-DV0dqyWC.js","assets/chevron-down-DeH9TE3A.js","assets/check-0NoJAfkQ.js","assets/chevron-up-D7LQlrSF.js","assets/triangle-alert-DVQy4H13.js","assets/StudentActivityDetailsPageRedesigned-C0U0yWr8.js","assets/radio-group-D7MyZ_bG.js","assets/checkbox-CwmflF-u.js","assets/label-BTofGEwk.js","assets/utils-D1DDQyYr.js","assets/circle-check-big-BKqp-58w.js","assets/save-C1jK6DqH.js","assets/isPast-CeQjbKRK.js","assets/StudentPerformancePageRedesigned-DmcT9AKQ.js","assets/GradeCard-CNP3xjS_.js","assets/message-square-B6ENaI5j.js","assets/sparkles-CUbsk4mA.js","assets/lightbulb-DPdqF49U.js","assets/trophy-CysQaDJJ.js","assets/PolarChart-BKcmhiqG.js","assets/StudentHistoryPageRedesigned-Z9EDyUUu.js","assets/history-A38LV_1P.js","assets/StudentGamificationPage-A8yebSWE.js","assets/progress-zfbt3GeS.js","assets/StatsCard-DTvEOEjk.js","assets/DashboardHeader-BrNcgIGw.js","assets/dropdown-menu-EPJY_Fdk.js","assets/StudentMissionsPage-C9pyN8hR.js","assets/StudentRankingPage-BLIJ1Gi3.js","assets/StudentCalendarPageRedesigned-VcSG0BiY.js","assets/isSameMonth-CK0W24Ro.js","assets/endOfWeek-BRNs0S5s.js","assets/subMonths-CphOl_Aj.js","assets/isSameDay-D5LInQhv.js","assets/isToday-By0hfvNN.js","assets/StudentDiscussionPage-B_QtE064.js","assets/StudentPublicQuizzesPage-BHiQQs6x.js","assets/brain-oN9iVzkK.js","assets/StudentQuizPlayPage-BGXocRMB.js","assets/play-CH7j5vB4.js","assets/StudentProfilePage-C4XPOF0J.js","assets/StudentFeedbackPage-7jGhj0mn.js","assets/StudentSettingsPage-D-n6oIfb.js","assets/mail-Df-N_7bq.js","assets/phone-D2gXKp0Z.js"])))=>i.map(i=>d[i]);
import{c as P,a as A,r as i,j as e,s as R,l as I,g as t,h as S,m as V,i as L,k as s,N as E,_ as o}from"./main-XXuEaTDd.js";import{S as T,M}from"./SidebarPremium-eC0udO90.js";import{B as q}from"./button-CnByYIhr.js";import{B as N}from"./bot-X9d_zJmp.js";import{X as J}from"./x-rANpGSmW.js";import{S as B}from"./send-DaNDC1MG.js";import"./card-BmX5EBcq.js";import"./message-circle-Bnfe4kSM.js";import"./book-open-C2-Re7kr.js";import"./trending-up-B04abNi1.js";import"./user-DGN0W0vL.js";import"./settings-BoPgazzK.js";import"./index-DlVMVqW0.js";import"./house-Cqu6JObC.js";import"./users-DHSoS6td.js";import"./graduation-cap-CrHOTf4P.js";import"./calendar-Dh85b9lX.js";import"./chart-column-B4DM1V4B.js";import"./index-BgsUcMRO.js";import"./chevron-right-DahHX28a.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],$=P("maximize-2",F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],X=P("minimize-2",Q),W=({context:n={}})=>{const{user:_}=A(),[u,b]=i.useState(!1),[p,j]=i.useState(!1),[c,m]=i.useState([]),[x,h]=i.useState(""),[g,y]=i.useState(!1),v=i.useRef(null);i.useEffect(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"},[])},[c]),i.useEffect(()=>{if(u&&c.length===0){const r=n.classId?"Olá! Estou aqui para ajudar com suas dúvidas sobre esta turma. Como posso ajudar?":n.activityId?"Olá! Estou aqui para ajudar com esta atividade. Qual sua dúvida?":"Olá! Como posso ajudar você hoje?";m([{role:"assistant",content:r,timestamp:new Date}])}},[u,n]);const k=async()=>{if(!x.trim()||g)return;const r=x.trim();h(""),m(d=>[...d,{role:"user",content:r,timestamp:new Date}]),y(!0);try{const{data:{session:d}}=await R.auth.getSession(),a=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/chatbot-query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d?.access_token||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhcGJ3YWlta3VyYnVpaGF0bWl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyODY3MjksImV4cCI6MjA3NDg2MjcyOX0.x-NQQ2TtRgaUjjBZCf6j49eWOW4XSqjTFKC_KB1L56A"}`},body:JSON.stringify({message:r,class_id:n.classId,user_id:_?.id,conversation_history:c.filter(l=>l.role!=="assistant"||l.content!==c[0]?.content).slice(-6).map(l=>({role:l.role,content:l.content}))}),signal:AbortSignal.timeout(15e3)});if(!a.ok){I.warn("Edge function falhou, usando fallback");const l=w(r,n);m(D=>[...D,{role:"assistant",content:l,timestamp:new Date}]);return}const f=await a.json(),C=f.response||f.reply||"Desculpe, não consegui processar sua mensagem.";m(l=>[...l,{role:"assistant",content:C,timestamp:new Date}])}catch(d){I.error("Erro ao enviar mensagem:",d);const a=w(r);m(f=>[...f,{role:"assistant",content:a,timestamp:new Date}])}finally{y(!1)}},w=(r,d)=>{const a=r.toLowerCase();return a.includes("prazo")||a.includes("entrega")||a.includes("quando")?"Para informações sobre prazos, verifique os detalhes da atividade. Se tiver dúvidas específicas, consulte seu professor.":a.includes("nota")||a.includes("pontuação")||a.includes("avaliaç")?"As notas são atualizadas pelo professor após a correção. Você pode acompanhar seu progresso no painel de desempenho.":a.includes("como")||a.includes("ajuda")||a.includes("dúvida")?"Estou aqui para ajudar! Você pode me perguntar sobre prazos, formato de entrega, ou tirar dúvidas gerais. Para questões específicas do conteúdo, recomendo consultar o material da aula ou seu professor.":a.includes("material")||a.includes("arquivo")||a.includes("documento")?"Os materiais da aula estão disponíveis na página da turma. Verifique a seção de materiais para acessar os arquivos enviados pelo professor.":"Olá! Sou o assistente da TamanduAI. Posso ajudar com informações gerais sobre a plataforma, prazos e entregas. Para dúvidas específicas do conteúdo, recomendo entrar em contato com seu professor. Como posso ajudar?"};return u?e.jsxs("div",{className:`fixed bottom-6 right-6 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl z-50 flex flex-col transition-all ${p?"w-80 h-16":"w-96 h-[32rem]"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Assistente IA"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(!p),className:"hover:bg-white/20 p-1 rounded transition-colors",children:p?e.jsx($,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(!1),className:"hover:bg-white/20 p-1 rounded transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50 dark:bg-slate-950",children:[c.map((r,d)=>e.jsx("div",{className:`flex ${r.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${r.role==="user"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-white dark:bg-slate-800 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-700"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:r.content})})},d)),g&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-2xl border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),e.jsx("div",{ref:v})]}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:r=>h(r.target.value),onKeyPress:r=>r.key==="Enter"&&k(),placeholder:"Digite sua mensagem...",className:"flex-1 px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:g,autoComplete:"off"}),e.jsx("button",{onClick:k,disabled:g||!x.trim(),className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0","aria-label":"Enviar mensagem",children:e.jsx(B,{className:"w-4 h-4"})})]})})]})]}):e.jsx("button",{onClick:()=>b(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all flex items-center justify-center z-50","aria-label":"Abrir chatbot",children:e.jsx(N,{className:"w-6 h-6"})})},z=t.memo(({onMenuClick:n})=>e.jsxs("div",{className:"lg:hidden sticky top-0 z-40 bg-card border-b border-border px-4 py-3 flex items-center gap-4",children:[e.jsx(q,{variant:"ghost",size:"sm",onClick:n,"aria-label":"Abrir menu",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-cyan-600 to-blue-700 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"T"})}),e.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-cyan-600 to-blue-700 bg-clip-text text-transparent",children:"TamanduAI"})]})]}));z.displayName="MobileHeader";const O=t.memo(({children:n})=>{const[_,u]=i.useState(!1),[b,p]=i.useState(()=>S.getSidebarCollapsed()),j=V();i.useEffect(()=>{const g=setInterval(()=>{p(S.getSidebarCollapsed())},100);return()=>clearInterval(g)},[]);const c=i.useCallback(()=>u(!1),[]),m=i.useCallback(()=>u(!0),[]),x=i.useMemo(()=>{const h=j.pathname.match(/\/students\/classes\/([a-f0-9-]+)/);return h?{classId:h[1]}:{}},[j.pathname]);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(T,{isOpen:_,onClose:c}),e.jsxs("div",{className:`min-h-screen transition-all duration-300 ${b?"lg:pl-[70px]":"lg:pl-[280px]"}`,children:[e.jsx(z,{onMenuClick:m}),e.jsx("main",{className:"w-full",children:n})]}),e.jsx(W,{context:x})]})});O.displayName="StudentLayout";const Y=t.lazy(()=>o(()=>import("./StudentDashboardRedesigned-BY-diVq8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]))),G=t.lazy(()=>o(()=>import("./StudentClassesPageRedesigned-BzW4poY8.js"),__vite__mapDeps([46,1,2,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,39,40,41,47,48,49,50,51,52,53,54,42]))),H=t.lazy(()=>o(()=>import("./StudentClassDetailsPageRedesigned-BKM__zL6.js"),__vite__mapDeps([55,1,2,4,6,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,39,40,41,56,57,58,44,37,48,49,50,51,59,60,61,62,63,64,42]))),Z=t.lazy(()=>o(()=>import("./StudentActivitiesPageRedesigned-HJ5wk76x.js"),__vite__mapDeps([65,1,2,4,6,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,39,40,41,47,48,49,50,51,66,67,68,69,70,71,52]))),K=t.lazy(()=>o(()=>import("./StudentActivityDetailsPageRedesigned-C0U0yWr8.js"),__vite__mapDeps([72,1,2,5,4,59,40,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,41,73,74,67,69,75,76,30,77,63,31,60,64,78,22,23,24,34,79,35]))),U=t.lazy(()=>o(()=>import("./StudentPerformancePageRedesigned-DmcT9AKQ.js"),__vite__mapDeps([80,1,2,3,4,5,39,81,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,42,33,82,34,24,35,40,41,66,50,51,67,68,69,70,60,30,83,77,84,85,43,44,45,86]))),ee=t.lazy(()=>o(()=>import("./StudentHistoryPageRedesigned-Z9EDyUUu.js"),__vite__mapDeps([87,1,2,4,5,39,81,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,42,33,82,34,24,35,40,41,47,66,50,51,67,68,69,70,88,56,52]))),se=t.lazy(()=>o(()=>import("./StudentGamificationPage-A8yebSWE.js"),__vite__mapDeps([89,1,2,4,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,90,91,92,47,93,50,51,41,49,69,75,85,42]))),te=t.lazy(()=>o(()=>import("./StudentMissionsPage-C9pyN8hR.js"),__vite__mapDeps([94,1,2,4,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,90,92,47,93,50,51,41,49,69,75,33]))),ae=t.lazy(()=>o(()=>import("./StudentRankingPage-BLIJ1Gi3.js"),__vite__mapDeps([95,1,2,4,92,5,47,93,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,50,51,41,49,69,75]))),oe=t.lazy(()=>o(()=>import("./StudentCalendarPageRedesigned-VcSG0BiY.js"),__vite__mapDeps([96,1,2,4,5,36,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,37,31,38,34,24,35,39,40,41,97,29,28,98,99,100,101,26,79]))),re=t.lazy(()=>o(()=>import("./StudentDiscussionPage-B_QtE064.js"),__vite__mapDeps([102,1,2,4,92,5,47,93,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,50,51,41,49,69,75,82]))),ie=t.lazy(()=>o(()=>import("./StudentPublicQuizzesPage-BHiQQs6x.js"),__vite__mapDeps([103,1,2,4,92,5,47,93,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,50,51,41,49,69,75,104]))),ne=t.lazy(()=>o(()=>import("./StudentQuizPlayPage-BGXocRMB.js"),__vite__mapDeps([105,1,2,4,92,5,47,93,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,50,51,41,49,69,75,106]))),le=t.lazy(()=>o(()=>import("./StudentProfilePage-C4XPOF0J.js"),__vite__mapDeps([107,1,2,4,47,5,92,93,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,50,51,41,49,69,75,60]))),de=t.lazy(()=>o(()=>import("./StudentFeedbackPage-7jGhj0mn.js"),__vite__mapDeps([108,1,2,4,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,92,47,93,50,51,41,49,69,75,82]))),ce=t.lazy(()=>o(()=>import("./StudentSettingsPage-D-n6oIfb.js"),__vite__mapDeps([109,1,2,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,60,110,111,78]))),Oe=()=>e.jsx(O,{children:e.jsxs(L,{children:[e.jsx(s,{index:!0,element:e.jsx(Y,{})}),e.jsx(s,{path:"dashboard",element:e.jsx(E,{to:"/students",replace:!0})}),e.jsx(s,{path:"classes",element:e.jsx(G,{})}),e.jsx(s,{path:"classes/:classId",element:e.jsx(H,{})}),e.jsx(s,{path:"activities",element:e.jsx(Z,{})}),e.jsx(s,{path:"activities/:activityId",element:e.jsx(K,{})}),e.jsx(s,{path:"performance",element:e.jsx(U,{})}),e.jsx(s,{path:"history",element:e.jsx(ee,{})}),e.jsx(s,{path:"gamification",element:e.jsx(se,{})}),e.jsx(s,{path:"missions",element:e.jsx(te,{})}),e.jsx(s,{path:"ranking",element:e.jsx(ae,{})}),e.jsx(s,{path:"calendar",element:e.jsx(oe,{})}),e.jsx(s,{path:"discussion",element:e.jsx(re,{})}),e.jsx(s,{path:"quizzes",element:e.jsx(ie,{})}),e.jsx(s,{path:"quiz/:quizId",element:e.jsx(ne,{})}),e.jsx(s,{path:"profile",element:e.jsx(le,{})}),e.jsx(s,{path:"feedback",element:e.jsx(de,{})}),e.jsx(s,{path:"settings",element:e.jsx(ce,{})}),e.jsx(s,{path:"*",element:e.jsx(E,{to:"/students",replace:!0})})]})});export{Oe as default};
