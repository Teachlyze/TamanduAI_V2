import{u as S,a as y,r as c,s as w,j as t,k as A}from"./main-Cr4CeQqJ.js";import{B as r,m as g}from"./button-VDnOzUX8.js";import{C as f}from"./card-CvoT5xff.js";import{B}from"./badge-BpFoLbJI.js";import{S as d}from"./StatsCard-CEAHNeHe.js";import{D as E}from"./dropdown-menu-W1Sf6eM2.js";import{E as _}from"./EmptyState-B0IxJOql.js";import"./input-DJYxsXYr.js";import"./label-Cj0ah_CE.js";import{B as p}from"./bot-B7NlTsbl.js";import{M as P}from"./message-square-DpSMhNWE.js";import{U as T}from"./users-BI0WtoMm.js";import{S as q}from"./star-CIRstmTc.js";import{S as x}from"./settings-CuiOplCN.js";import{C as z}from"./chart-column-DHMA61nx.js";import{P as D}from"./pause-RR4X5VrG.js";import{P as I}from"./play-uIHeHugH.js";import"./chevron-right-D9YOEkTh.js";import"./index-Zvo5G3yJ.js";import"./check-BNbB6Qjw.js";const st=()=>{const n=S(),{user:m}=y(),[v,u]=c.useState(!0),[h,j]=c.useState([]),[l,N]=c.useState({activeBots:0,totalConversations:0,studentsServed:0,avgSatisfaction:0});c.useEffect(()=>{k()},[m]);const k=async()=>{if(m)try{u(!0);const{data:e}=await w.from("classes").select("id, name, subject, color").eq("created_by",m.id).eq("is_active",!0),s=(e||[]).map((o,a)=>({...o,chatbot:{status:a===0?"active":a===1?"paused":"not_configured",activitiesTrained:a===0?8:a===1?5:0,conversations:a===0?145:a===1?67:0,satisfaction:a===0?92:a===1?88:0}}));j(s);const i=s.filter(o=>o.chatbot.status==="active").length,b=s.reduce((o,a)=>o+a.chatbot.conversations,0);N({activeBots:i,totalConversations:b,studentsServed:Math.floor(b*.6),avgSatisfaction:i>0?90:0})}catch(e){console.error("Erro:",e)}finally{u(!1)}},C=e=>{const s={active:{label:"Ativo",color:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"},paused:{label:"Pausado",color:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"},not_configured:{label:"NÃ£o Configurado",color:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-400"}};return s[e]||s.not_configured};return v?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(A,{size:"lg"})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[t.jsx(E,{title:"Assistente IA para Turmas",subtitle:"Configure chatbots inteligentes para auxiliar seus alunos",role:"teacher",gradient:"from-purple-500 via-pink-500 to-rose-500"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx(d,{title:"Chatbots Ativos",value:l.activeBots,icon:p,gradient:"from-purple-500 to-pink-500",delay:0}),t.jsx(d,{title:"Conversas (30 dias)",value:l.totalConversations,icon:P,gradient:"from-pink-500 to-rose-500",delay:.1}),t.jsx(d,{title:"Alunos Atendidos",value:l.studentsServed,icon:T,gradient:"from-rose-500 to-orange-500",delay:.2}),t.jsx(d,{title:"SatisfaÃ§Ã£o MÃ©dia",value:`${l.avgSatisfaction}%`,icon:q,gradient:"from-amber-500 to-yellow-500",format:"text",delay:.3})]}),t.jsxs(f,{className:"p-6 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800 mb-8",children:[t.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-2",children:"â“ Como funciona o chatbot?"}),t.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"Configure um assistente IA para cada turma. O chatbot aprende com as atividades e materiais que vocÃª seleciona, e ajuda os alunos a tirarem dÃºvidas 24/7."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"ðŸ“– DocumentaÃ§Ã£o"}),t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"ðŸŽ¥ Ver Tutorial"})]})]}),h.length>0?t.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((e,s)=>{const i=C(e.chatbot.status);return t.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},children:t.jsxs(f,{className:"p-6 hover:shadow-lg transition-shadow bg-white dark:bg-slate-900",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-1",children:e.name}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.subject||"Sem matÃ©ria"})]}),t.jsx(B,{className:i.color,children:i.label})]}),e.chatbot.status!=="not_configured"&&t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:e.chatbot.activitiesTrained}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Atividades"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-pink-600 dark:text-pink-400",children:e.chatbot.conversations}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Conversas"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:[e.chatbot.satisfaction,"%"]}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"SatisfaÃ§Ã£o"})]})]}),t.jsx("div",{className:"flex gap-2",children:e.chatbot.status==="not_configured"?t.jsxs(r,{onClick:()=>n(`/teacher/chatbot/${e.id}/config`),className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Configurar"]}):t.jsxs(t.Fragment,{children:[t.jsxs(r,{variant:"outline",onClick:()=>n(`/teacher/chatbot/${e.id}/config`),className:"flex-1",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Editar"]}),t.jsxs(r,{variant:"outline",onClick:()=>n(`/teacher/chatbot/${e.id}/analytics`),className:"flex-1",children:[t.jsx(z,{className:"w-4 h-4 mr-2"}),"Analytics"]}),t.jsx(r,{variant:"outline",size:"icon",className:e.chatbot.status==="active"?"text-amber-600":"text-green-600",children:e.chatbot.status==="active"?t.jsx(D,{className:"w-4 h-4"}):t.jsx(I,{className:"w-4 h-4"})})]})})]})},e.id)})}):t.jsx(_,{icon:p,title:"Nenhuma turma encontrada",description:"Crie uma turma para configurar seu primeiro chatbot IA",actionLabel:"Criar Turma",actionIcon:x,action:()=>n("/teacher/classes/new")})]})};export{st as default};
