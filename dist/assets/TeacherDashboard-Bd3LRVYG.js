import{a as Se,r,s as m,l as q,j as e,p as ce,u as Ve,L as v}from"./main-CzXMpjXe.js";import{D as Le,a as Re,b as Be,c as He,d as Ue,e as Ye}from"./dialog-BOF5Uy8-.js";import{B as l,m as w}from"./button-Dnvkx_Je.js";import{L as le}from"./label-D9v7s2aD.js";import{S as We,a as Xe,b as Je,c as Ke,d as Qe}from"./select-7sBaYMjw.js";import{I as ye}from"./input-2VTq1krG.js";import{u as Ze}from"./use-toast-CTeziulW.js";import{S as Ne}from"./send-BcMlghx6.js";import{U as De}from"./users-xUF4-Wbt.js";import{C}from"./calendar-CKXbtU29.js";import{C as J}from"./clock-CGSmdqeK.js";import{X as et}from"./x-DF6W2AUE.js";import{E as tt}from"./EventDetailsModal-Bb9lqD0O.js";import{C as y}from"./card-BTOHZHKT.js";import{B as Y}from"./badge-BYsVEm-v.js";import{S as at}from"./StatsCard-nPEgxUYC.js";import{D as st}from"./DashboardHeader-HJEeIdF_.js";import{E as I}from"./EmptyState-C8Y6jY-O.js";import"./dropdown-menu-BXsTkf2w.js";import{a as _e}from"./addDays-pVIPqqUr.js";import{B as ne}from"./book-open-DmE2793b.js";import{T as rt}from"./trending-up-BQt7X1H9.js";import{C as W}from"./chevron-right-DpKMhJ61.js";import{T as it}from"./target-CnQL5VTm.js";import{V as ke}from"./video-vomntHNx.js";import{F as oe}from"./file-text-DaGcLfjn.js";import{M as lt}from"./map-pin-CfS_EfRR.js";import{P as de}from"./plus-CRm0q2zn.js";import{T as nt}from"./triangle-alert-CEeY6qn6.js";import{C as ot}from"./circle-check-BmMeeMFI.js";import{C as dt}from"./chart-column-iyFjSldo.js";import{f as X}from"./format-BcFT9btV.js";import{p as ct}from"./pt-BR-CuGSKEGQ.js";import"./SidebarPremium-CisyqOF_.js";import"./house-Byiee32G.js";import"./graduation-cap-B-Dv4Kji.js";import"./message-circle-rrlqIsvy.js";import"./settings-BM8sKL77.js";import"./index-DtrkzmWq.js";import"./index-N9fWMuHy.js";import"./index-VWAVCbRK.js";import"./index-CSfy18lA.js";import"./index-D9F-hsl_.js";import"./chevron-down-DTSGKl7i.js";import"./check-cUGBO9da.js";import"./chevron-up-CDEj0Ifm.js";import"./redisCache-CmA8jRD2.js";import"./user-CYKIwcVy.js";import"./square-pen-CR24JIa5.js";import"./copy-BbJZ26-h.js";import"./trash-2-Cy_KdZfs.js";import"./index-CkaMVP9-.js";import"./en-US-B6HbAA6N.js";const mt=({open:h,onClose:E,activity:A,onSuccess:N})=>{const{user:$}=Se(),{toast:p}=Ze(),[b,T]=r.useState([]),[P,K]=r.useState(""),[o,z]=r.useState(""),[F,O]=r.useState("23:59"),[f,V]=r.useState(!1),[L,R]=r.useState(!1);r.useEffect(()=>{if(h&&$){_();const a=new Date;a.setDate(a.getDate()+7),z(a.toISOString().split("T")[0])}},[h,$]);const _=async()=>{try{R(!0);const{data:a,error:x}=await m.from("classes").select("id, name, subject, is_active").eq("created_by",$.id).eq("is_active",!0).order("name",{ascending:!0});if(x)throw x;T(a||[])}catch(a){q.error("Erro ao carregar turmas:",a),p({title:"Erro ao carregar turmas",description:a.message,variant:"destructive"})}finally{R(!1)}},Q=async()=>{if(!P){p({title:"Selecione uma turma",description:"Escolha a turma para postar a atividade.",variant:"destructive"});return}if(!o){p({title:"Defina a data de entrega",description:"A data de entrega Ã© obrigatÃ³ria.",variant:"destructive"});return}try{V(!0);const a=`${o}T${F}:00`,{error:x}=await m.from("activities").update({due_date:a}).eq("id",A.id);if(x)throw q.error("Erro ao atualizar atividade:",x),x;const{data:Z,error:B}=await m.from("activity_class_assignments").insert({activity_id:A.id,class_id:P,assigned_at:new Date().toISOString()}).select().single();if(B)throw B;p({title:"âœ… Atividade postada!",description:"A atividade foi postada para a turma selecionada."}),N&&N(Z),E()}catch(a){q.error("Erro ao postar atividade:",a),p({title:"Erro ao postar atividade",description:a.message,variant:"destructive"})}finally{V(!1)}},j=()=>{f||(K(""),z(""),O("23:59"),E())};return e.jsx(Le,{open:h,onOpenChange:j,children:e.jsxs(Re,{className:"max-w-md",children:[e.jsxs(Be,{children:[e.jsxs(He,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-blue-600"}),"Postar Atividade"]}),e.jsx(Ue,{children:"Escolha a turma e defina a data de entrega para postar esta atividade."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Atividade:"}),e.jsx("p",{className:"font-semibold",children:A?.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(le,{htmlFor:"class",children:[e.jsx(De,{className:"w-4 h-4 inline mr-1"}),"Turma *"]}),L?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(ce,{size:"sm"})}):e.jsxs(We,{value:P,onValueChange:K,children:[e.jsx(Xe,{id:"class",children:e.jsx(Je,{placeholder:"Selecione a turma..."})}),e.jsx(Ke,{children:b.map(a=>e.jsxs(Qe,{value:a.id,children:[a.name," ",a.subject&&`- ${a.subject}`]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(le,{htmlFor:"due-date",children:[e.jsx(C,{className:"w-4 h-4 inline mr-1"}),"Data de Entrega *"]}),e.jsx(ye,{id:"due-date",type:"date",value:o,onChange:a=>z(a.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(le,{htmlFor:"due-time",children:[e.jsx(J,{className:"w-4 h-4 inline mr-1"}),"Hora de Entrega"]}),e.jsx(ye,{id:"due-time",type:"time",value:F,onChange:a=>O(a.target.value)})]})]}),e.jsxs(Ye,{children:[e.jsxs(l,{variant:"outline",onClick:j,disabled:f,children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),e.jsx(l,{onClick:Q,disabled:f||!P||!o,children:f?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:"sm",className:"mr-2"}),"Postando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Postar Atividade"]})})]})]})})},ga=()=>{const{user:h}=Se(),E=Ve(),[A,N]=r.useState(!0),[$,p]=r.useState(null),[b,T]=r.useState(7),[P,K]=r.useState("all"),[o,z]=r.useState({totalClasses:0,totalStudents:0,totalActivities:0,pendingGrading:0,avgGrade:0,todayCorrections:0}),[F,O]=r.useState([]),[f,V]=r.useState([]),[L,R]=r.useState([]),[_,Q]=r.useState([]),[j,a]=r.useState([]),[x,Z]=r.useState([]),[B,ee]=r.useState(!1),[Ce,te]=r.useState(null),[me,ge]=r.useState(!1),[he,xe]=r.useState(null);r.useEffect(()=>{ae()},[]);const ae=async()=>{if(!h?.id){N(!1);return}try{N(!0),p(null);const{data:t,error:i}=await m.from("classes").select(`
          *,
          class_members(count)
        `).eq("created_by",h.id).eq("is_active",!0);if(i)throw i;const n=t?.map(s=>({...s,student_count:s.class_members?.[0]?.count||0}))||[],{data:d,error:k}=await m.from("activities").select(`
          *,
          activity_class_assignments(class:classes(name))
        `).eq("created_by",h.id).order("created_at",{ascending:!1}).limit(10);if(k)throw k;const G=d?.map(s=>({...s,class_name:s.activity_class_assignments?.[0]?.class?.name||"Sem turma"}))||[],u=d?.map(s=>s.id)||[],{data:g,error:S}=await m.from("submissions").select(`
          *,
          activity:activities(title),
          student:profiles!student_id(full_name)
        `).in("activity_id",u).eq("status","submitted").order("submitted_at",{ascending:!0}).limit(10);if(S)throw S;const Te=g?.map(s=>({...s,student_name:s.student?.full_name||"Aluno",activity_title:s.activity?.title||"Atividade"}))||[],{data:se,error:be}=await m.from("submissions").select("grade").in("activity_id",u).not("grade","is",null);if(be)throw be;const Pe=se?.length>0?se.reduce((s,M)=>s+M.grade,0)/se.length:0,H=new Date;H.setHours(0,0,0,0);const U=new Date(H);U.setDate(U.getDate()+1);const{data:ze,error:fe}=await m.from("submissions").select("id").in("activity_id",u).gte("graded_at",H.toISOString()).lt("graded_at",U.toISOString());if(fe)throw fe;const re=new Date,je=new Date(re.getFullYear(),re.getMonth(),re.getDate(),0,0,0,0),Fe=_e(new Date,30),{data:ve,error:ie}=await m.from("calendar_events").select(`
          *,
          activity:activities(
            id,
            title,
            assignments:activity_class_assignments(
              id,
              class_id,
              assigned_at
            )
          ),
          class:classes(
            id,
            name
          )
        `).eq("created_by",h.id).gte("start_time",je.toISOString()).lte("start_time",Fe.toISOString()).order("start_time",{ascending:!0});!ie&&ve?Q(ve):ie&&q.error("[Dashboard] Erro ao buscar eventos:",ie);const{data:we,error:Ge}=await m.from("submissions").select(`
          student_id,
          grade,
          student:profiles!student_id(full_name)
        `).in("activity_id",u).not("grade","is",null);if(!Ge&&we){const s={};we.forEach(c=>{s[c.student_id]||(s[c.student_id]={grades:[],name:c.student?.full_name||"Aluno"}),s[c.student_id].grades.push(c.grade)});const M=Object.entries(s).map(([c,D])=>({id:c,name:D.name,avgGrade:D.grades.reduce(($e,Oe)=>$e+Oe,0)/D.grades.length,totalActivities:D.grades.length})).filter(c=>c.avgGrade<6).sort((c,D)=>c.avgGrade-D.avgGrade).slice(0,10);a(M)}const gt=_?.filter(s=>s.activity_id&&new Date(s.start_time)>=je&&new Date(s.start_time)<=todayEnd)||[],{data:Me,error:Ie}=await m.from("activities").select(`
          *,
          activity_assignments:activity_class_assignments(
            id,
            class_id,
            assigned_at
          )
        `).eq("created_by",h.id).gte("created_at",H.toISOString()).lt("created_at",U.toISOString());Ie||Z(Me||[]);const qe=n.reduce((s,M)=>s+(M.student_count||0),0);z({totalClasses:n.length,totalStudents:qe,totalActivities:d?.length||0,pendingGrading:g?.length||0,avgGrade:Number(Pe.toFixed(1)),todayCorrections:ze?.length||0}),O(n.slice(0,5)),V(G.slice(0,5)),R(Te)}catch(t){q.error("Erro ao carregar dashboard:",t),p("Erro ao carregar dados do dashboard. Tente novamente.")}finally{N(!1)}},{todayEvents:ue,upcomingEvents:pe}=r.useMemo(()=>{const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999),d=_e(new Date,b),k=_.filter(u=>{const g=new Date(u.start_time);return g>=i&&g<=n}),G=_.filter(u=>{const g=new Date(u.start_time);return g>=i&&g<=d}).slice(0,4);return{todayEvents:k,upcomingEvents:G}},[_,b]),Ee=[{title:"Total de Turmas",value:o.totalClasses,icon:ne,gradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50 dark:bg-blue-950/30",change:`${o.totalStudents} alunos`},{title:"Total de Alunos",value:o.totalStudents,icon:De,gradient:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-50 dark:bg-cyan-950/30"},{title:"MÃ©dia Geral",value:o.avgGrade,icon:rt,gradient:"from-emerald-500 to-teal-500",bgColor:"bg-emerald-50 dark:bg-emerald-950/30",change:o.avgGrade>=7?"Excelente":"Pode melhorar"},{title:"Aguardando CorreÃ§Ã£o",value:o.pendingGrading,icon:J,gradient:"from-amber-500 to-orange-500",bgColor:"bg-amber-50 dark:bg-amber-950/30",change:`${o.todayCorrections} hoje`}],Ae=[{label:"Nova Turma",icon:de,href:"/dashboard/classes/new",gradient:"from-blue-600 to-indigo-600"},{label:"Nova Atividade",icon:de,href:"/dashboard/activities/new",gradient:"from-blue-600 to-cyan-600"},{label:"Ver Analytics",icon:dt,href:"/dashboard/analytics",gradient:"from-emerald-600 to-teal-600"}];return A?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ce,{size:"lg",text:"Carregando dashboard..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsx(st,{title:"Dashboard do Professor",subtitle:"Bem-vindo de volta! Aqui estÃ¡ um resumo das suas turmas e atividades.",role:"teacher"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Ee.map((t,i)=>e.jsx(at,{title:t.title,value:t.value,icon:t.icon,gradient:t.gradient,bgColor:t.bgColor,change:t.change,delay:i*.1},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(y,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"PrÃ³ximos Eventos"})]}),e.jsx(v,{to:"/dashboard/calendar",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todos"}),e.jsx(W,{className:"w-4 h-4"})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(l,{size:"sm",variant:b===1?"default":"outline",onClick:()=>T(1),children:"Hoje"}),e.jsx(l,{size:"sm",variant:b===3?"default":"outline",onClick:()=>T(3),children:"3 dias"}),e.jsx(l,{size:"sm",variant:b===7?"default":"outline",onClick:()=>T(7),children:"7 dias"})]}),e.jsx("div",{className:"space-y-3",children:pe.length>0?pe.map((t,i)=>e.jsxs(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-600 to-cyan-500 rounded-lg flex flex-col items-center justify-center text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:X(new Date(t.start_time),"d")}),e.jsx("div",{className:"text-xs uppercase",children:X(new Date(t.start_time),"MMM",{locale:ct})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:X(new Date(t.start_time),"HH:mm")}),e.jsx(Y,{className:`mt-1 ${t.type==="meeting"?"bg-purple-100 text-purple-700":t.type==="activity"?"bg-orange-100 text-orange-700":t.type==="deadline"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:t.type==="event"?"Aula":t.type==="activity"?"Atividade":t.type==="meeting"?"ReuniÃ£o":t.type==="deadline"?"Prazo":"Evento"})]})]},t.id)):e.jsx(I,{icon:C,title:"Nenhum evento prÃ³ximo",description:"Seus prÃ³ximos eventos aparecerÃ£o aqui."})})]}),e.jsxs(y,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(it,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Agenda de Hoje"})]}),e.jsxs("div",{className:"space-y-4",children:[ue.length>0?e.jsx("div",{className:"space-y-3",children:ue.map((t,i)=>{const n=t.type==="meeting"||t.type==="reuniÃ£o",d=t.type==="activity"||t.type==="atividade",k=t.modality==="online",G=t.modality==="presential",g=n?ke:d?oe:C;return e.jsx(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.1},onClick:()=>{xe(t),ge(!0)},className:"p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 cursor-pointer transition-all bg-white dark:bg-slate-800 hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${n?"bg-purple-100 dark:bg-purple-900/30":d?"bg-orange-100 dark:bg-orange-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:e.jsx(g,{className:`w-5 h-5 ${n?"text-purple-600":d?"text-orange-600":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:t.title}),e.jsx(Y,{className:`whitespace-nowrap ${n?"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300":d?"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"}`,children:n?"ðŸ“¹ ReuniÃ£o":d?"ðŸ“ Atividade":"ðŸ“… Evento"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 dark:text-slate-400 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),X(new Date(t.start_time),"HH:mm")]}),n&&k&&t.meeting_link&&e.jsxs("a",{href:t.meeting_link,target:"_blank",rel:"noopener noreferrer",onClick:S=>S.stopPropagation(),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 hover:underline",children:[e.jsx(ke,{className:"w-4 h-4"}),"Entrar na reuniÃ£o"]}),n&&G&&t.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-4 h-4"}),t.location]})]}),t.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 line-clamp-1",children:t.description})]}),d&&t.activity_id&&e.jsx(l,{size:"sm",onClick:S=>{S.stopPropagation(),(!t.activity_assignments||t.activity_assignments.length===0)&&(te({id:t.activity_id,title:t.title}),ee(!0))},disabled:t.activity_assignments&&t.activity_assignments.length>0,className:`shadow-md ${t.activity_assignments&&t.activity_assignments.length>0?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"} text-white`,children:t.activity_assignments&&t.activity_assignments.length>0?"Postado":"Postar"})]})},t.id)})}):e.jsx(I,{icon:C,title:"Nenhum evento hoje",description:"Sua agenda estÃ¡ livre hoje."}),x.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Atividades para Postar"}),x.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:t.title}),t.activity_assignments&&t.activity_assignments.length>0&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Postado em ",t.activity_assignments.length," turma",t.activity_assignments.length>1?"s":""]})]}),e.jsx(l,{size:"sm",disabled:t.activity_assignments&&t.activity_assignments.length>0,className:t.activity_assignments&&t.activity_assignments.length>0?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",onClick:()=>{(!t.activity_assignments||t.activity_assignments.length===0)&&(te(t),ee(!0))},children:t.activity_assignments&&t.activity_assignments.length>0?"Postado":"Postar"})]},t.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(y,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Turmas Recentes"]}),e.jsx(v,{to:"/dashboard/classes",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(W,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:F.length>0?F.map((t,i)=>e.jsx(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},children:e.jsx(v,{to:`/dashboard/classes/${t.id}`,children:e.jsx(y,{className:"p-4 hover:shadow-md transition-all border-2 hover:border-blue-200 dark:hover:border-blue-800 bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${t.color||"from-blue-500 to-indigo-500"} flex items-center justify-center text-white font-bold`,children:t.name?.[0]||"T"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.subject||"Sem matÃ©ria"," â€¢ ",t.student_count||0," alunos"]})]})]}),e.jsx(l,{size:"sm",variant:"ghost",className:"whitespace-nowrap",children:"Ver Turma"})]})})})},t.id)):e.jsx(I,{icon:ne,title:"Nenhuma turma encontrada",description:"Crie sua primeira turma para comeÃ§ar a gerenciar suas aulas e atividades.",actionLabel:"Criar Primeira Turma",actionIcon:de,action:()=>window.location.href="/dashboard/classes/new"})})]}),e.jsxs(y,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Atividades Recentes"]}),e.jsx(v,{to:"/dashboard/activities",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(W,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:f.length>0?f.map((t,i)=>e.jsx(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:t.class_name}),e.jsx("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),new Date(t.due_date).toLocaleDateString("pt-BR")]})})]}),e.jsx(Y,{variant:t.status==="archived"?"secondary":new Date(t.due_date)<new Date?"destructive":"default",className:"whitespace-nowrap",children:t.status==="archived"?"Arquivada":new Date(t.due_date)<new Date?"Encerrada":"Aberta"})]})},t.id)):e.jsx(I,{icon:oe,title:"Nenhuma atividade encontrada",description:"Suas atividades recentes aparecerÃ£o aqui."})})]})]}),j.length>0&&e.jsxs(y,{className:"p-6 mb-8 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20 border-2 border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/40",children:e.jsx(nt,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Alunos que Precisam de AtenÃ§Ã£o"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[j.length," aluno",j.length>1?"s":""," com desempenho abaixo de 6.0"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map((t,i)=>e.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:i*.05},className:"flex items-center gap-4 p-4 rounded-lg bg-white dark:bg-slate-900 border-2 border-yellow-200 dark:border-yellow-800 hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-white font-bold text-lg",children:t.name?.[0]||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(Y,{className:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 text-xs",children:["MÃ©dia: ",t.avgGrade.toFixed(1)]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[t.totalActivities," atividade",t.totalActivities>1?"s":""]})]})]}),e.jsx(l,{size:"sm",variant:"outline",className:"whitespace-nowrap border-yellow-600 text-yellow-700 hover:bg-yellow-50",onClick:()=>E(`/dashboard/students/${t.id}`),children:"Ver Detalhes"})]},t.id))})]}),e.jsxs(y,{className:"p-6 mb-8 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"SubmissÃµes Pendentes de CorreÃ§Ã£o"]}),e.jsx(v,{to:"/dashboard/grading",children:e.jsxs(l,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(W,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:L.length>0?L.map((t,i)=>e.jsxs(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-center justify-between p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all bg-white dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-white font-bold",children:t.student_name?.[0]||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.student_name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.activity_title}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Enviado em ",new Date(t.submitted_at).toLocaleDateString("pt-BR")]})]})]}),e.jsx(v,{to:`/dashboard/grading/${t.id}`,children:e.jsx(l,{size:"sm",className:"whitespace-nowrap bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white",children:"Corrigir Agora"})})]},t.id)):e.jsx(I,{icon:ot,title:"Nenhuma correÃ§Ã£o pendente!",description:"ParabÃ©ns! VocÃª estÃ¡ em dia com as correÃ§Ãµes. ðŸŽ‰"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Ae.map((t,i)=>e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(v,{to:t.href,children:e.jsxs(l,{size:"lg",className:`w-full whitespace-nowrap inline-flex items-center justify-center gap-2 bg-gradient-to-r ${t.gradient} hover:opacity-90 text-white h-16 text-lg`,children:[e.jsx(t.icon,{className:"w-6 h-6"}),e.jsx("span",{children:t.label})]})})},t.label))}),e.jsx(mt,{open:B,onClose:()=>{ee(!1),te(null)},activity:Ce,onSuccess:t=>{console.log("âœ… Atividade postada:",t),ae()}}),me&&he&&e.jsx(tt,{isOpen:me,onClose:()=>{ge(!1),xe(null)},event:he,onEdit:()=>{E("/dashboard/calendar")},onDelete:()=>{ae()}})]})};export{ga as default};
