import{c as P,j as e,u as _,a as T,r as i,s as q,i as M}from"./main-B-DuDfC3.js";import{m as w,C as R,B as $}from"./card-D9y6cEbK.js";import{c as U,v as S,D as V,g as F}from"./dropdown-menu-S8hb-z0t.js";import{S as y,E as Q}from"./EmptyState-D7T78sMN.js";import{B as O}from"./badge-D_5Pz7Pp.js";import{C as H}from"./circle-alert-BKc5oqo6.js";import{C as X}from"./calendar-HjYr_AWs.js";import{U as G}from"./users-DREcB8-a.js";import{C as J}from"./clock-CnEWE99A.js";import{C as K}from"./chevron-right-BFR20X-e.js";import{S as W}from"./SearchInput-Bn2zNm8E.js";import{F as Y}from"./FilterBar-BgbnheIS.js";import"./label-CQXNCxhD.js";import{F as E}from"./file-text-Vxms5le2.js";import{C as Z}from"./circle-check-Bv5_Zyh1.js";import{P as L}from"./plus-B1Dkz-eg.js";import"./index-BvwGeBdQ.js";import"./x-5mMV-IBm.js";import"./chevron-down-3DbVtmBJ.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],te=P("circle-x",ee),ae=({id:x,title:g,className:C,dueDate:r,status:n="active",submissionCount:f=0,totalStudents:d=0,priority:m="normal",delay:o=0,onClick:v,actionLabel:s="Ver Atividade",onAction:b})=>{const c={active:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",completed:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",pending:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",closed:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"},j={low:"text-slate-500",normal:"text-blue-500",high:"text-amber-500",urgent:"text-red-500"},u=r&&new Date(r)<new Date,h=r?Math.ceil((new Date(r)-new Date)/(1e3*60*60*24)):null;return e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o},children:e.jsxs(R,{className:`p-6 ${U.card.interactive} bg-white dark:bg-slate-900 border-l-4 border-l-blue-500`,onClick:v,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:S(g)}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:S(C,"Sem turma")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsx(H,{className:"w-5 h-5 text-red-500"}),e.jsx(O,{className:c[n],children:n==="active"?"Ativa":n==="completed"?"Concluída":n==="pending"?"Pendente":"Fechada"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(X,{className:`w-4 h-4 ${u?"text-red-500":"text-slate-400"}`}),e.jsx("span",{className:u?"text-red-600 dark:text-red-400 font-semibold":"text-slate-600 dark:text-slate-400",children:r?e.jsxs(e.Fragment,{children:[new Date(r).toLocaleDateString("pt-BR"),h!==null&&e.jsxs("span",{className:"ml-1",children:["(",h<=0?"Vencida":`${h}d`,")"]})]}):"Sem prazo"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsxs("span",{children:[f,"/",d," entregues"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(J,{className:`w-4 h-4 ${j[m]}`}),e.jsx("span",{className:`capitalize ${j[m]}`,children:m==="low"?"Baixa":m==="normal"?"Normal":m==="high"?"Alta":"Urgente"})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("span",{children:[d>0?Math.round(f/d*100):0,"% de progresso"]})})]}),e.jsxs($,{onClick:N=>{N.stopPropagation(),b?.()},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white inline-flex items-center justify-center gap-2",children:[s,e.jsx(K,{className:"w-4 h-4"})]})]})})},Ne=()=>{const x=_(),{user:g}=T(),[C,r]=i.useState(!0),[n,f]=i.useState([]),[d,m]=i.useState([]),[o,v]=i.useState(""),[s,b]=i.useState({status:null,classId:null,type:null}),[c,j]=i.useState({total:0,active:0,closed:0}),[u,h]=i.useState([]);i.useEffect(()=>{N()},[g]),i.useEffect(()=>{z()},[n,o,s]);const N=async()=>{if(g)try{r(!0);const{data:t,error:a}=await q.from("activities").select(`
          *,
          assignments:activity_class_assignments(
            class:classes(id, name)
          )
        `).eq("created_by",g.id).order("created_at",{ascending:!1});if(a)throw a;f(t||[]);const l=t?.filter(p=>p.status==="active").length||0,D=t?.filter(p=>p.status==="closed").length||0;j({total:t?.length||0,active:l,closed:D});const A=new Map;t?.forEach(p=>{p.assignments?.forEach(k=>{k.class&&A.set(k.class.id,k.class)})}),h(Array.from(A.values()))}catch(t){console.error("Erro ao carregar atividades:",t)}finally{r(!1)}},z=()=>{let t=[...n];if(o){const a=o.toLowerCase();t=t.filter(l=>l.title?.toLowerCase().includes(a)||l.description?.toLowerCase().includes(a))}s.status&&(t=t.filter(a=>a.status===s.status)),s.classId&&(t=t.filter(a=>a.assignments?.some(l=>l.class?.id===s.classId))),s.type&&(t=t.filter(a=>a.type===s.type)),m(t)},B=(t,a)=>{b(l=>({...l,[t]:a}))},I=()=>{b({status:null,classId:null,type:null}),v("")};return C?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(M,{size:"lg",text:"Carregando atividades..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsx(V,{title:"Minhas Atividades",subtitle:`${c.total} atividade${c.total!==1?"s":""} criada${c.total!==1?"s":""}`,role:"teacher"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(y,{title:"Total de Atividades",value:c.total,icon:E,gradient:F.stats.activities,bgColor:"bg-emerald-50 dark:bg-emerald-950/30",delay:0}),e.jsx(y,{title:"Ativas",value:c.active,icon:Z,gradient:F.success,bgColor:"bg-green-50 dark:bg-green-950/30",delay:.1}),e.jsx(y,{title:"Encerradas",value:c.closed,icon:te,gradient:"from-slate-500 to-slate-600",bgColor:"bg-slate-50 dark:bg-slate-950/30",delay:.2})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(W,{placeholder:"Buscar por título ou descrição...",value:o,onChange:v})}),e.jsx(Y,{filters:[{key:"status",label:"Status",options:[{value:"active",label:"Ativas"},{value:"draft",label:"Rascunho"},{value:"closed",label:"Encerradas"}]},{key:"type",label:"Tipo",options:[{value:"assignment",label:"Tarefa"},{value:"quiz",label:"Quiz"},{value:"project",label:"Projeto"}]},...u.length>0?[{key:"classId",label:"Turma",options:u.map(t=>({value:t.id,label:t.name}))}]:[]],activeFilters:s,onFilterChange:B,onClearAll:I})]}),d.length>0?e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-20",children:d.map((t,a)=>{const l=t.assignments?.[0]?.class?.name||"Sem turma";return e.jsx(ae,{id:t.id,title:t.title,className:l,dueDate:t.due_date,status:t.status||"draft",submissionCount:0,totalStudents:0,priority:"normal",delay:a*.05,onClick:()=>x(`/teacher/activities/${t.id}`),actionLabel:"Ver Detalhes",onAction:()=>x(`/teacher/activities/${t.id}`)},t.id)})}):e.jsx(Q,{icon:E,title:o||s.status?"Nenhuma atividade encontrada":"Você ainda não criou nenhuma atividade",description:o||s.status?"Tente ajustar os filtros ou buscar por outro termo.":"Crie sua primeira atividade para começar a avaliar seus alunos.",actionLabel:"Criar Primeira Atividade",actionIcon:L,action:()=>x("/teacher/activities/new")}),d.length>0&&e.jsx(w.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5},className:"fixed bottom-8 right-8 z-50",children:e.jsx($,{onClick:()=>x("/teacher/activities/new"),className:"w-16 h-16 rounded-full shadow-2xl bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white",children:e.jsx(L,{className:"w-8 h-8"})})})]})};export{Ne as default};
