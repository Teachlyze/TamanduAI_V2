import{m as D,u as I,r as a,s as $,j as t,k as B}from"./main-PnoWv5mu.js";import{B as x,m as T}from"./button-B1az96ai.js";import{g as b}from"./tokens-BPdvztvj.js";import{S as g}from"./StatsCard-rzGomFX8.js";import{D as _}from"./DashboardHeader-CjwFRF49.js";import{E as P}from"./EmptyState-6R7lfM6O.js";import"./card-DNyDBtwZ.js";import{A as F}from"./ActivityCard-uTq-vGF-.js";import{S as q}from"./SearchInput-5hcz4k89.js";import"./dropdown-menu-BDAIvG1Q.js";import"./input-BGWMq9XA.js";import"./label-DSOeyQ5r.js";import{C as Q}from"./classService-Dxel5I5i.js";import{A as V}from"./arrow-left-Be4Q5mrA.js";import{F as d}from"./file-text-WNEYLkuB.js";import{P as C}from"./plus-DIEHEl2o.js";import"./chevron-right-5LVKKztM.js";import"./SidebarPremium-DbDmcmQG.js";import"./bell-jlu-i0nu.js";import"./book-open-BN8GTFXN.js";import"./trending-up-BnoBnv7_.js";import"./user-IPdw0V9z.js";import"./settings-BAc4VZJo.js";import"./users-CZvcSbj_.js";import"./graduation-cap-BTPeK0uK.js";import"./index-DvZMkTcl.js";import"./chart-column-Ba9dXnEb.js";import"./x-7WqOwCJm.js";import"./circle-alert-BGRUIVYu.js";import"./clock-Dkzb1QSl.js";import"./search-CcwmVUyB.js";import"./index-CWQpaRb1.js";import"./check-8UqrO2_7.js";const Ct=()=>{const{classId:s}=D(),r=I(),[j,v]=a.useState(!0),[m,S]=a.useState(null),[u,y]=a.useState([]),[f,h]=a.useState([]),[i,N]=a.useState(""),[p,A]=a.useState({total:0,active:0,closed:0});a.useEffect(()=>{w()},[s]),a.useEffect(()=>{k()},[u,i]);const w=async()=>{try{v(!0);const e=await Q.getClassById(s);S(e);const{data:o,error:l}=await $.from("activity_class_assignments").select(`
          activity_id,
          activity:activities(*)
        `).eq("class_id",s);if(l)throw l;const n=o?.map(c=>c.activity).filter(Boolean)||[];y(n);const E=n.filter(c=>c.status==="active").length,L=n.filter(c=>c.status==="closed").length;A({total:n.length,active:E,closed:L})}catch(e){console.error("Erro ao carregar atividades:",e)}finally{v(!1)}},k=()=>{if(!i){h(u);return}const e=i.toLowerCase(),o=u.filter(l=>l.title?.toLowerCase().includes(e)||l.description?.toLowerCase().includes(e));h(o)};return j?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(B,{size:"lg",text:"Carregando atividades..."})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[t.jsxs(x,{variant:"ghost",onClick:()=>r(`/teacher/classes/${s}`),className:"mb-4",children:[t.jsx(V,{className:"w-4 h-4 mr-2"}),"Voltar para Turma"]}),t.jsx(_,{title:`Atividades - ${m?.name||"Turma"}`,subtitle:m?.subject||"Sem matéria",role:"teacher"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx(g,{title:"Total de Atividades",value:p.total,icon:d,gradient:b.stats.activities,bgColor:"bg-emerald-50 dark:bg-emerald-950/30",delay:0}),t.jsx(g,{title:"Ativas",value:p.active,icon:d,gradient:b.success,bgColor:"bg-green-50 dark:bg-green-950/30",delay:.1}),t.jsx(g,{title:"Encerradas",value:p.closed,icon:d,gradient:"from-slate-500 to-slate-600",bgColor:"bg-slate-50 dark:bg-slate-950/30",delay:.2})]}),t.jsxs("div",{className:"flex gap-4 mb-8",children:[t.jsx("div",{className:"flex-1",children:t.jsx(q,{placeholder:"Buscar atividade...",value:i,onChange:N})}),t.jsxs(x,{onClick:()=>r(`/teacher/activities/new?classId=${s}`),className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white",children:[t.jsx(C,{className:"w-4 h-4 mr-2"}),"Nova Atividade"]})]}),f.length>0?t.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((e,o)=>t.jsx(F,{id:e.id,title:e.title,className:m?.name,dueDate:e.due_date,status:e.status||"draft",submissionCount:0,totalStudents:0,priority:"normal",delay:o*.05,onClick:()=>r(`/teacher/activities/${e.id}/submissions`),actionLabel:"Ver Submissões",onAction:()=>r(`/teacher/activities/${e.id}/submissions`)},e.id))}):t.jsx(P,{icon:d,title:i?"Nenhuma atividade encontrada":"Nenhuma atividade nesta turma",description:i?"Tente outro termo.":"Crie a primeira atividade para esta turma.",actionLabel:"Criar Atividade",actionIcon:C,action:()=>r(`/teacher/activities/new?classId=${s}`)})]})};export{Ct as default};
