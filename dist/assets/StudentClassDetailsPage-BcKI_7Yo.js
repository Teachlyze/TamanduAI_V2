import{c as ge,j as e,r as c,s as C,l as J,C as _e,o as Ce,u as Me,m as Se,R as ze}from"./main-BXI8jImK.js";import{B as j,m as z}from"./button-DhJSXayK.js";import{C as w}from"./card-Dts-jKab.js";import{A as Ae,B as X}from"./SidebarPremium-CqhK_O_u.js";import{T as De,a as qe,b as $,c as O}from"./tabs-Cc_Y9tQd.js";import{u as oe}from"./use-toast-B4cJHS9G.js";import{c as B,D as be,a as pe,b as fe,d as je,e as Ee,f as Pe}from"./utils-CwPH5tNa.js";import{C as ve}from"./circle-alert-D0X6fNnu.js";import{C as Be}from"./circle-check-big-BGyFuaS8.js";import{S as Ne}from"./routes-D2aTUm3p.js";import{C as Q}from"./clock-Ic71-9yN.js";import{g as Te}from"./getRoundingMethod-D0I6Z7xl.js";import{n as Fe,l as Re}from"./en-US-Bd7_-tVp.js";import{C as Ue,A as Le}from"./index-Cyt6Mlq7.js";import{C as Ve}from"./chevron-right-DFiBXpQq.js";import{f as I}from"./format-D0LVKLFA.js";import{p as H}from"./pt-BR-zMqltMoH.js";import{i as Ie,I as L,P as He,M as we}from"./isPast-DAgdE-lF.js";import{F as te}from"./file-Ctlo8PJd.js";import{C as K}from"./code-CnaNKUcP.js";import{A as V}from"./archive-B_LTTO2m.js";import{V as ee}from"./video-BNJ0bsve.js";import{F}from"./file-text-B1_cTV9D.js";import{D as re}from"./download-COsSi_Yf.js";import{X as ke}from"./x-DhRNfShw.js";import{T as $e}from"./textarea-C2TbCwiG.js";import{M as le}from"./message-square-qOrj0Hb0.js";import{T as Oe}from"./thumbs-up-DoO3fTbL.js";import{H as Ke}from"./heart-D9YPWLWs.js";import{S as Ge}from"./sparkles-CZy0JlN_.js";import{C as Je}from"./chevron-up-3f7I9tWa.js";import{C as Xe}from"./chevron-down-vfmnlur0.js";import{I as Qe}from"./info-Cz_2uO3r.js";import{T as We}from"./triangle-alert-fhQdnZTc.js";import{I as Ye}from"./input-YtE9-IyT.js";import{S as Ze}from"./search-BE_TttKm.js";import{B as ie}from"./book-open-BMCImb8A.js";import{E as ea}from"./eye-CtZjPFNS.js";import{A as aa}from"./arrow-left-Bdb18hWQ.js";import{U as Z}from"./users-1MVt23UL.js";import"./bell-De3gaLfU.js";import"./trending-up-C_AGH9Be.js";import"./user-XMBxPeUS.js";import"./settings-Dn83Owos.js";import"./graduation-cap-BVXXkz0b.js";import"./chart-column-D6pi1FRc.js";import"./index-laUz9pSU.js";import"./index-D63a-v4Z.js";import"./Combination-7NRWB7dp.js";import"./bot-BYtHUSiL.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ce=ge("music",sa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]],G=ge("sheet",ta);function ra(s,d,t){const[u,i]=Fe(t?.in,s,d),n=(+u-+i)/Re;return Te(t?.roundingMethod)(n)}const me={pending:{label:"Pendente",icon:Q,bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400",border:"border-amber-300 dark:border-amber-700",emoji:"ğŸŸ¡"},submitted:{label:"Enviada",icon:Ne,bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400",border:"border-blue-300 dark:border-blue-700",emoji:"ğŸ”µ"},graded:{label:"Corrigida",icon:Be,bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400",border:"border-green-300 dark:border-green-700",emoji:"ğŸŸ¢"},late:{label:"Atrasada",icon:ve,bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400",border:"border-red-300 dark:border-red-700",emoji:"ğŸ”´"}},la={sm:{container:"px-2 py-0.5 text-xs gap-1",icon:"w-3 h-3"},md:{container:"px-3 py-1 text-sm gap-1.5",icon:"w-4 h-4"},lg:{container:"px-4 py-2 text-base gap-2",icon:"w-5 h-5"}},ia=({status:s="pending",size:d="md",score:t,className:u,showEmoji:i=!0})=>{const n=me[s]||me.pending,l=la[d],m=n.icon;return e.jsxs("div",{className:B("inline-flex items-center rounded-full font-semibold border-2 transition-all",n.bg,n.text,n.border,l.container,u),children:[i&&e.jsx("span",{children:n.emoji}),e.jsx(m,{className:l.icon}),e.jsx("span",{children:n.label}),s==="graded"&&t!==void 0&&e.jsxs("span",{className:"ml-1 font-bold",children:["â€¢ ",t,"/100"]})]})},ye=c.memo(({activity:s,onClick:d,className:t})=>{const{id:u,title:i,description:n,due_date:l,status:m,grade:o,max_grade:k=100}=s,v=m==="graded"?"graded":m==="submitted"?"submitted":l&&Ie(new Date(l))?"late":"pending",y=l?new Date(l):null,A=y&&ra(y,new Date)<24&&v==="pending",D={pending:"from-amber-50 to-orange-50 dark:from-amber-950/20 dark:to-orange-950/20 border-amber-200 dark:border-amber-800",submitted:"from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 border-blue-200 dark:border-blue-800",graded:"from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 border-green-200 dark:border-green-800",late:"from-red-50 to-rose-50 dark:from-red-950/20 dark:to-rose-950/20 border-red-200 dark:border-red-800"};return e.jsxs(w,{onClick:d,className:B("group relative p-5 cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-[1.02] border-2","bg-gradient-to-br",D[v],A&&"ring-2 ring-red-500 ring-offset-2",t),children:[e.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:e.jsx(ia,{status:v,size:"sm",score:m==="graded"?o:void 0})}),A&&e.jsx("div",{className:"absolute -top-2 -left-2 z-10",children:e.jsxs("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),"URGENTE"]})}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/50 to-transparent dark:from-white/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative space-y-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white line-clamp-2 pr-16",children:i}),n&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:n}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[y&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{className:B("font-medium",v==="late"&&"text-red-600 dark:text-red-400",A&&"text-red-600 dark:text-red-400 font-bold"),children:[v==="late"?"Atrasada desde":"Prazo:"," ",I(y,"dd/MM/yyyy 'Ã s' HH:mm",{locale:H})]})]}),m==="graded"&&o!==null&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ae,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"font-bold text-green-700 dark:text-green-400",children:["Nota: ",o,"/",k]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3",children:[e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[v==="pending"&&"Clique para responder",v==="submitted"&&"Aguardando correÃ§Ã£o",v==="graded"&&"Ver feedback",v==="late"&&"Responder (atrasada)"]}),e.jsx(Ve,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-200 group-hover:translate-x-1 transition-all"})]})]})]})});ye.displayName="ActivityCard";const xe={pdf:{icon:F,color:"text-red-500",bg:"bg-red-50 dark:bg-red-950/20",emoji:"ğŸ“„"},doc:{icon:F,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-950/20",emoji:"ğŸ“"},docx:{icon:F,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-950/20",emoji:"ğŸ“"},txt:{icon:F,color:"text-slate-500",bg:"bg-slate-50 dark:bg-slate-950/20",emoji:"ğŸ“„"},odt:{icon:F,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-950/20",emoji:"ğŸ“"},ppt:{icon:G,color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-950/20",emoji:"ğŸ“Š"},pptx:{icon:G,color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-950/20",emoji:"ğŸ“Š"},xls:{icon:G,color:"text-green-500",bg:"bg-green-50 dark:bg-green-950/20",emoji:"ğŸ“Š"},xlsx:{icon:G,color:"text-green-500",bg:"bg-green-50 dark:bg-green-950/20",emoji:"ğŸ“Š"},csv:{icon:G,color:"text-green-500",bg:"bg-green-50 dark:bg-green-950/20",emoji:"ğŸ“Š"},jpg:{icon:L,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-950/20",emoji:"ğŸ–¼ï¸"},jpeg:{icon:L,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-950/20",emoji:"ğŸ–¼ï¸"},png:{icon:L,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-950/20",emoji:"ğŸ–¼ï¸"},gif:{icon:L,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-950/20",emoji:"ğŸ–¼ï¸"},svg:{icon:L,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-950/20",emoji:"ğŸ–¼ï¸"},mp4:{icon:ee,color:"text-pink-500",bg:"bg-pink-50 dark:bg-pink-950/20",emoji:"ğŸ¥"},mov:{icon:ee,color:"text-pink-500",bg:"bg-pink-50 dark:bg-pink-950/20",emoji:"ğŸ¥"},avi:{icon:ee,color:"text-pink-500",bg:"bg-pink-50 dark:bg-pink-950/20",emoji:"ğŸ¥"},mp3:{icon:ce,color:"text-cyan-500",bg:"bg-cyan-50 dark:bg-cyan-950/20",emoji:"ğŸµ"},wav:{icon:ce,color:"text-cyan-500",bg:"bg-cyan-50 dark:bg-cyan-950/20",emoji:"ğŸµ"},zip:{icon:V,color:"text-yellow-500",bg:"bg-yellow-50 dark:bg-yellow-950/20",emoji:"ğŸ“¦"},rar:{icon:V,color:"text-yellow-500",bg:"bg-yellow-50 dark:bg-yellow-950/20",emoji:"ğŸ“¦"},"7z":{icon:V,color:"text-yellow-500",bg:"bg-yellow-50 dark:bg-yellow-950/20",emoji:"ğŸ“¦"},js:{icon:K,color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-950/20",emoji:"ğŸ’»"},jsx:{icon:K,color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-950/20",emoji:"ğŸ’»"},py:{icon:K,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-950/20",emoji:"ğŸ"},html:{icon:K,color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-950/20",emoji:"ğŸŒ"},css:{icon:K,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-950/20",emoji:"ğŸ¨"},default:{icon:te,color:"text-slate-500",bg:"bg-slate-50 dark:bg-slate-950/20",emoji:"ğŸ“"}},oa=s=>{if(!s)return"0 B";const d=1024,t=["B","KB","MB","GB"],u=Math.floor(Math.log(s)/Math.log(d));return Math.round(s/Math.pow(d,u)*100)/100+" "+t[u]},na=c.memo(({file:s,onDownload:d,className:t})=>{const{name:u,file_name:i,title:n,size:l,file_size:m,url:o,file_url:k,file_type:q}=s,v=u||i||n||"Arquivo",y=l||m||0,A=o||k,D=(v.split(".").pop()||"").toLowerCase(),b=xe[D]||xe.default,r=b.icon,_=a=>{a.stopPropagation(),d?d(s):A&&window.open(A,"_blank")};return e.jsxs(w,{className:B("group relative p-4 cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-[1.02] border-2","bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800","border-slate-200 dark:border-slate-700",t),onClick:_,children:[e.jsx("div",{className:B("absolute top-0 right-0 w-24 h-24 rounded-full blur-2xl opacity-0 group-hover:opacity-50 transition-opacity",b.bg)}),e.jsxs("div",{className:"relative space-y-3",children:[e.jsx("div",{className:B("w-16 h-16 rounded-2xl flex items-center justify-center mx-auto transition-transform group-hover:scale-110",b.bg),children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-3xl",children:b.emoji}),e.jsx(r,{className:B("w-6 h-6",b.color)})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white line-clamp-2 min-h-[2.5rem]",children:v})}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:oa(y)}),e.jsx("span",{className:B("text-xs font-bold uppercase px-2 py-0.5 rounded",b.bg,b.color),children:D})]}),e.jsxs(j,{size:"sm",variant:"outline",className:B("w-full group-hover:shadow-md transition-all",b.color,"border-current hover:bg-current hover:text-white"),onClick:_,children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})});na.displayName="MaterialCard";const da=({isOpen:s,onClose:d,onConfirm:t,className:u,loading:i=!1})=>e.jsx(be,{open:s,onOpenChange:d,children:e.jsxs(pe,{className:"sm:max-w-md",children:[e.jsxs(fe,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:e.jsx(V,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsx(je,{className:"text-xl",children:"Arquivar Turma"})]}),e.jsxs(Ee,{className:"text-base pt-2",children:["Tem certeza que deseja arquivar esta turma?",e.jsx("br",{}),e.jsx("br",{}),"VocÃª ainda poderÃ¡ acessÃ¡-la na seÃ§Ã£o ",e.jsx("strong",{children:'"Turmas Arquivadas"'})," quando precisar. Nenhum dado serÃ¡ perdido."]})]}),e.jsxs(Pe,{className:"gap-2 sm:gap-0",children:[e.jsxs(j,{type:"button",variant:"outline",onClick:d,disabled:i,children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),e.jsxs(j,{type:"button",onClick:t,disabled:i,className:"bg-amber-600 hover:bg-amber-700 text-white",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),i?"Arquivando...":"Arquivar Turma"]})]})]})}),ca=()=>{const[s,d]=c.useState(!1),{toast:t}=oe();return{loading:s,archiveClass:async(l,m)=>{try{d(!0);const{error:o}=await C.from("class_members").update({is_archived:!0}).eq("class_id",l).eq("user_id",m).eq("role","student");if(o)throw o;return t({title:"âœ“ Turma arquivada",description:'A turma foi movida para "Turmas Arquivadas"'}),{success:!0}}catch(o){return J.error("Erro ao arquivar turma:",o),t({title:"âŒ Erro ao arquivar",description:o.message,variant:"destructive"}),{success:!1,error:o}}finally{d(!1)}},unarchiveClass:async(l,m)=>{try{d(!0);const{error:o}=await C.from("class_members").update({is_archived:!1}).eq("class_id",l).eq("user_id",m).eq("role","student");if(o)throw o;return t({title:"âœ“ Turma restaurada",description:'A turma voltou para "Turmas Ativas"'}),{success:!0}}catch(o){return J.error("Erro ao desarquivar turma:",o),t({title:"âŒ Erro ao restaurar",description:o.message,variant:"destructive"}),{success:!1,error:o}}finally{d(!1)}},fetchClasses:async(l,m=!1)=>{try{const{data:o,error:k}=await C.from("class_members").select(`
          id,
          is_archived,
          joined_at,
          class:classes(
            id,
            name,
            subject,
            description,
            color,
            banner_color,
            invite_code,
            created_at
          )
        `).eq("user_id",l).eq("role","student").eq("is_archived",m).order("joined_at",{ascending:!1});if(k)throw k;return{data:o||[],error:null}}catch(o){return J.error("Erro ao buscar turmas:",o),{data:[],error:o}}}}},ma=({posts:s,loading:d})=>{const{user:t}=_e(),{toast:u}=oe(),[i,n]=c.useState({}),[l,m]=c.useState({}),[o,k]=c.useState({}),[q,v]=c.useState({}),[y,A]=c.useState({});c.useEffect(()=>{s?.length>0&&D()},[s]);const D=async()=>{if(!s)return;const a=s.map(h=>h.id),{data:p}=await C.from("discussion_reactions").select("discussion_id, reaction_type, user_id").in("discussion_id",a),x={};p?.forEach(h=>{x[h.discussion_id]||(x[h.discussion_id]={like:[],love:[],celebrate:[]}),x[h.discussion_id][h.reaction_type]&&x[h.discussion_id][h.reaction_type].push(h.user_id)}),n(x);const{data:N}=await C.from("discussion_messages").select(`
        id,
        discussion_id,
        content,
        created_at,
        user_id,
        profiles!discussion_messages_user_id_fkey (
          id,
          full_name,
          avatar_url
        )
      `).in("discussion_id",a).eq("is_deleted",!1).order("created_at",{ascending:!0}),E={};N?.forEach(h=>{E[h.discussion_id]||(E[h.discussion_id]=[]),E[h.discussion_id].push(h)}),m(E)},b=async(a,p)=>{if(!t)return;if((i[a]||{like:[],love:[],celebrate:[]})[p]?.includes(t.id)){const{error:E}=await C.from("discussion_reactions").delete().eq("discussion_id",a).eq("user_id",t.id).eq("reaction_type",p);E||n(h=>{const P=h[a]||{like:[],love:[],celebrate:[]};return{...h,[a]:{...P,[p]:(P[p]||[]).filter(ae=>ae!==t.id)}}})}else{const{error:E}=await C.from("discussion_reactions").insert({discussion_id:a,user_id:t.id,reaction_type:p});E||(n(h=>{const P=h[a]||{like:[],love:[],celebrate:[]};return{...h,[a]:{...P,[p]:[...P[p]||[],t.id]}}}),u({title:"ReaÃ§Ã£o adicionada!",duration:2e3}))}},r=async a=>{if(!t||!o[a]?.trim())return;const{data:p,error:x}=await C.from("discussion_messages").insert({discussion_id:a,user_id:t.id,content:o[a].trim()}).select(`
        id,
        discussion_id,
        content,
        created_at,
        user_id,
        profiles!discussion_messages_user_id_fkey (
          id,
          full_name,
          avatar_url
        )
      `).single();!x&&p?(m(N=>({...N,[a]:[...N[a]||[],p]})),k(N=>({...N,[a]:""})),u({title:"ComentÃ¡rio adicionado!",duration:2e3})):u({title:"Erro ao adicionar comentÃ¡rio",variant:"destructive"})},_=a=>{v(p=>({...p,[a]:!p[a]}))};return d?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx(w,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-slate-200 dark:bg-slate-700 rounded"})]})]})},a))}):!s||s.length===0?e.jsxs(w,{className:"p-12 text-center",children:[e.jsx(le,{className:"w-16 h-16 mx-auto mb-4 text-slate-300 dark:text-slate-600"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nenhuma publicaÃ§Ã£o ainda"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"As publicaÃ§Ãµes do professor aparecerÃ£o aqui"})]}):e.jsx("div",{className:"space-y-4",children:s.map((a,p)=>e.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},children:e.jsxs(w,{className:"p-6 hover:shadow-lg transition-shadow relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-blue-500 to-cyan-500"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-lg shadow-md flex-shrink-0",children:a.creator?.full_name?.[0]?.toUpperCase()||"P"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:a.creator?.full_name||"Professor"}),a.is_pinned&&e.jsxs(X,{className:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-300",children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),"Fixado"]}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),I(new Date(a.created_at),"dd 'de' MMMM 'Ã s' HH:mm",{locale:H})]})]}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-900 dark:text-white",children:a.title}),e.jsx("div",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap mb-3",children:a.description}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((x,N)=>e.jsxs(X,{variant:"outline",className:"text-xs",children:["#",x]},N))}),a.file_url&&e.jsx("a",{href:a.file_url,target:"_blank",rel:"noopener noreferrer",className:"mt-3 inline-flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"ğŸ“ Ver anexo"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>b(a.id,"like"),className:`gap-1.5 ${i[a.id]?.like?.includes(t?.id)?"text-blue-600 bg-blue-50 dark:bg-blue-950/30":"text-slate-600 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-950/30"}`,children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:i[a.id]?.like?.length||0})]}),e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>b(a.id,"love"),className:`gap-1.5 ${i[a.id]?.love?.includes(t?.id)?"text-red-600 bg-red-50 dark:bg-red-950/30":"text-slate-600 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950/30"}`,children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:i[a.id]?.love?.length||0})]}),e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>b(a.id,"celebrate"),className:`gap-1.5 ${i[a.id]?.celebrate?.includes(t?.id)?"text-yellow-600 bg-yellow-50 dark:bg-yellow-950/30":"text-slate-600 hover:text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-950/30"}`,children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:i[a.id]?.celebrate?.length||0})]}),e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>_(a.id),className:"gap-1.5 ml-auto text-slate-600 hover:text-slate-900 dark:hover:text-slate-100",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-xs font-medium",children:[l[a.id]?.length||0," comentÃ¡rios"]}),q[a.id]?e.jsx(Je,{className:"w-3 h-3"}):e.jsx(Xe,{className:"w-3 h-3"})]})]}),e.jsx(Le,{children:q[a.id]&&e.jsxs(z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"mt-4 space-y-3",children:[l[a.id]?.map(x=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:x.profiles?.full_name?.[0]?.toUpperCase()||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:x.profiles?.full_name||"UsuÃ¡rio"}),e.jsx("span",{className:"text-xs text-slate-500",children:I(new Date(x.created_at),"dd/MM HH:mm",{locale:H})})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:x.content})]})]},x.id)),e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:t?.user_metadata?.full_name?.[0]?.toUpperCase()||"V"}),e.jsxs("div",{className:"flex-1",children:[e.jsx($e,{placeholder:"Escreva um comentÃ¡rio...",value:o[a.id]||"",onChange:x=>k(N=>({...N,[a.id]:x.target.value})),className:"min-h-[60px] resize-none",onKeyDown:x=>{x.key==="Enter"&&x.ctrlKey&&r(a.id)}}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs(j,{size:"sm",onClick:()=>r(a.id),disabled:!o[a.id]?.trim(),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Enviar"]})})]})]})]})})]})]})]})]})},a.id))})},ue={critical:{icon:ve,label:"Urgente",color:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300",borderColor:"border-l-red-500"},warning:{icon:We,label:"AtenÃ§Ã£o",color:"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300",borderColor:"border-l-orange-500"},info:{icon:Qe,label:"Informativo",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",borderColor:"border-l-blue-500"}},xa=({announcements:s,loading:d})=>d?e.jsx("div",{className:"space-y-4",children:[1,2].map(t=>e.jsx(w,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})},t))}):!s||s.length===0?e.jsxs(w,{className:"p-12 text-center",children:[e.jsx(we,{className:"w-16 h-16 mx-auto mb-4 text-slate-300 dark:text-slate-600"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nenhum comunicado"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Comunicados importantes aparecerÃ£o aqui"})]}):e.jsx("div",{className:"space-y-4",children:s.map((t,u)=>{const i=t.tags?.[0]||"info",n=ue[i]||ue.info,l=n.icon;return e.jsx(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:u*.05},children:e.jsx(w,{className:`p-6 border-l-4 ${n.borderColor} hover:shadow-lg transition-shadow`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${n.color} flex-shrink-0`,children:e.jsx(l,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:t.title}),e.jsx(X,{className:n.color,children:n.label})]}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 mb-3 whitespace-pre-wrap",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),I(new Date(t.created_at),"dd/MM/yyyy 'Ã s' HH:mm",{locale:H})]}),t.creator&&e.jsxs("span",{children:["Por ",t.creator.full_name]})]}),t.file_url&&e.jsx("a",{href:t.file_url,target:"_blank",rel:"noopener noreferrer",className:"mt-3 inline-flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"ğŸ“ Ver anexo"})]})]})})},t.id)})}),ua=s=>s?s.includes("pdf")?F:s.includes("image")?L:s.includes("video")?ee:te:te,ha=s=>s?s.includes("pdf")?"from-red-500 to-red-600":s.includes("image")?"from-purple-500 to-pink-500":s.includes("video")?"from-blue-500 to-cyan-500":s.includes("document")||s.includes("word")?"from-blue-600 to-indigo-600":s.includes("sheet")||s.includes("excel")?"from-green-500 to-green-600":"from-slate-500 to-slate-600":"from-slate-500 to-slate-600",he=s=>s?s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB":"",ga=({materials:s,loading:d})=>{const[t,u]=c.useState(""),[i,n]=c.useState("all"),[l,m]=c.useState(null),[o,k]=c.useState(!1),q=r=>r?.includes("image"),v=r=>r?.includes("video"),y=r=>q(r.file_type)||v(r.file_type),A=r=>{m(r),k(!0)},D=()=>{k(!1),m(null)},b=s?.filter(r=>{const _=!t||r.title?.toLowerCase().includes(t.toLowerCase())||r.description?.toLowerCase().includes(t.toLowerCase()),a=i==="all"||r.file_type?.includes(i);return _&&a})||[];return d?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(r=>e.jsx(w,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-5 bg-slate-200 dark:bg-slate-700 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]})},r))}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(Ye,{placeholder:"Buscar materiais...",value:t,onChange:r=>u(r.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(j,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>n("all"),children:"Todos"}),e.jsx(j,{variant:i==="pdf"?"default":"outline",size:"sm",onClick:()=>n("pdf"),children:"PDFs"}),e.jsx(j,{variant:i==="video"?"default":"outline",size:"sm",onClick:()=>n("video"),children:"VÃ­deos"}),e.jsx(j,{variant:i==="image"?"default":"outline",size:"sm",onClick:()=>n("image"),children:"Imagens"})]})]})}),b.length===0?e.jsxs(w,{className:"p-12 text-center",children:[e.jsx(ie,{className:"w-16 h-16 mx-auto mb-4 text-slate-300 dark:text-slate-600"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t||i!=="all"?"Nenhum resultado encontrado":"Nenhum material disponÃ­vel"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t||i!=="all"?"Tente ajustar os filtros":"Materiais de estudo aparecerÃ£o aqui"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map((r,_)=>{const a=ua(r.file_type),p=ha(r.file_type);return e.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},children:e.jsxs(w,{className:"p-6 hover:shadow-xl transition-all group",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${p} flex items-center justify-center flex-shrink-0 shadow-md group-hover:scale-110 transition-transform`,children:e.jsx(a,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1 truncate",children:r.title}),r.description&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400 mb-3",children:[r.created_at&&e.jsx("span",{children:I(new Date(r.created_at),"dd/MM/yyyy",{locale:H})}),r.file_size&&e.jsxs("span",{children:["â€¢ ",he(r.file_size)]}),r.creator&&e.jsxs("span",{children:["â€¢ ",r.creator.full_name]})]}),r.file_url?e.jsxs("div",{className:"flex gap-2",children:[y(r)&&e.jsxs(j,{size:"sm",variant:"outline",onClick:()=>A(r),className:"flex-1",children:[e.jsx(ea,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),e.jsx("a",{href:r.file_url,target:"_blank",rel:"noopener noreferrer",download:!0,className:y(r)?"flex-1":"w-full",children:e.jsxs(j,{size:"sm",className:"w-full",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),y(r)?"Baixar":"Baixar Material"]})})]}):e.jsx(j,{size:"sm",variant:"outline",className:"w-full",disabled:!0,children:"IndisponÃ­vel"})]})]}),r.tags&&r.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:r.tags.map((x,N)=>e.jsx(X,{variant:"outline",className:"text-xs",children:x},N))})]})},r.id)})}),b.length>0&&e.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:["Exibindo ",b.length," de ",s?.length||0," ",b.length===1?"material":"materiais"]}),e.jsx(be,{open:o,onOpenChange:k,children:e.jsxs(pe,{className:"max-w-5xl max-h-[90vh] overflow-auto",children:[e.jsxs(fe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(je,{className:"text-xl font-bold",children:l?.title}),e.jsx(j,{variant:"ghost",size:"icon",onClick:D,className:"rounded-full",children:e.jsx(ke,{className:"w-4 h-4"})})]}),l?.description&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-2",children:l.description})]}),e.jsxs("div",{className:"mt-4",children:[l&&q(l.file_type)&&e.jsx(z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800",children:e.jsx("img",{src:l.file_url,alt:l.title,className:"w-full h-auto max-h-[70vh] object-contain"})}),l&&v(l.file_type)&&e.jsx(z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative rounded-lg overflow-hidden bg-black",children:e.jsxs("video",{controls:!0,className:"w-full h-auto max-h-[70vh]",controlsList:"nodownload",children:[e.jsx("source",{src:l.file_url,type:l.file_type}),"Seu navegador nÃ£o suporta a tag de vÃ­deo."]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:[l?.file_size&&e.jsx("span",{children:he(l.file_size)}),l?.created_at&&e.jsxs("span",{className:"ml-3",children:["Adicionado em ",I(new Date(l.created_at),"dd 'de' MMM 'de' yyyy",{locale:H})]})]}),e.jsx("a",{href:l?.file_url,target:"_blank",rel:"noopener noreferrer",download:!0,children:e.jsxs(j,{size:"sm",className:"gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Baixar"]})})]})]})]})})]})},xs=()=>{const{classId:s}=Ce(),d=Me(),{toast:t}=oe(),[u,i]=c.useState(!0),[n,l]=c.useState(!1),[m,o]=c.useState(null),[k,q]=c.useState([]),[v,y]=c.useState([]),[A,D]=c.useState([]),[b,r]=c.useState([]),[_,a]=c.useState([]),[p,x]=c.useState("feed"),[N,E]=c.useState(!0),[h,P]=c.useState(!1),{archiveClass:ae,loading:ne}=ca(),se=c.useCallback(async(g=!1)=>{try{if(g?l(!0):i(!0),N){const{data:T}=await C.auth.getSession(),R=T?.session?.access_token,W=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/get-class-data-optimized",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify({classId:s})});if(!W.ok)throw new Error("Erro ao carregar dados");const Y=await W.json(),f=Y.data;console.log("[StudentClassDetailsPage] ğŸ“¦ Dados recebidos da Edge Function:",{classInfo:f.classInfo,posts:f.posts?.length||0,discussions:f.discussions?.length||0,announcements:f.announcements?.length||0,library:f.library?.length||0,activities:f.activities?.length||0,members:f.members?.length||0,fullData:f});const M=[...f.posts||[],...(f.discussions||[]).map(S=>({...S,title:S.title,description:S.description,creator:S.author,is_pinned:S.is_pinned,created_at:S.created_at}))];J.debug("[StudentClassDetailsPage] ğŸ“ Posts combinados (materials + discussions):",M.length);const de=(f.activities||[]).filter(S=>S.status==="published");console.log("[StudentClassDetailsPage] ğŸ¯ Atividades filtradas:",{total:f.activities?.length||0,published:de.length,filtered:f.activities?.filter(S=>S.status!=="published").map(S=>({title:S.title,status:S.status}))}),o(f.classInfo),q(M),y(f.announcements||[]),D(f.library||[]),r(de),a(f.members||[]),g&&Y.cached&&t({title:"Dados atualizados",description:"Cache atualizado com sucesso"})}else{const[T,R,W,Y]=await Promise.all([C.from("classes").select("id, name, subject, description, color").eq("id",s).single(),C.from("class_materials").select(`
              id, title, description, file_url, file_type, file_size, category, tags, created_at,
              creator:profiles!class_materials_created_by_fkey(id, full_name, avatar_url)
            `).eq("class_id",s).order("created_at",{ascending:!1}),C.from("activity_class_assignments").select("activity_id, activity:activities(id, title, description, due_date, max_score, type, status)").eq("class_id",s),C.from("class_members").select("id, role, joined_at, profile:profiles!class_members_user_id_fkey(id, full_name, avatar_url, email)").eq("class_id",s).order("role",{ascending:!0})]);o(T.data);const f=R.data||[];q(f.filter(M=>!M.category||M.category==="post")),y(f.filter(M=>M.category==="announcement")),D(f.filter(M=>M.category&&M.category!=="post"&&M.category!=="announcement")),r(W.data?.map(M=>M.activity).filter(Boolean)||[]),a(Y.data||[])}}catch(T){J.error("Erro ao carregar dados:",T),t({title:"Erro",description:"NÃ£o foi possÃ­vel carregar os dados da turma",variant:"destructive"})}finally{i(!1),l(!1)}},[s,N,t]);c.useEffect(()=>{se()},[se]);const U=c.useMemo(()=>{if(!_.length)return{teachers:[],students:[]};const g=_.filter(R=>R.role==="teacher"),T=_.filter(R=>R.role==="student");return{teachers:g,students:T}},[_]);return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Se,{size:"lg"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[e.jsxs("div",{className:"relative h-72 bg-gradient-to-br from-blue-600 via-blue-500 to-cyan-500 overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.1] bg-[size:30px_30px]"})}),e.jsx("div",{className:"absolute -top-20 -right-20 w-80 h-80 bg-white/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-96 h-96 bg-cyan-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-purple-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),e.jsxs("div",{className:"relative z-10 container mx-auto px-4 md:px-6 h-full flex flex-col justify-between py-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(j,{variant:"ghost",onClick:()=>d("/students/classes"),className:"text-white hover:bg-white/20 border border-white/30 backdrop-blur-sm transition-all hover:scale-105",children:[e.jsx(aa,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(j,{variant:"ghost",onClick:()=>se(!0),disabled:n,className:"text-white hover:bg-white/20 border border-white/30 backdrop-blur-sm transition-all hover:scale-105",children:e.jsx(ze,{className:`w-4 h-4 ${n?"animate-spin":""}`})}),e.jsxs(j,{variant:"ghost",onClick:()=>P(!0),disabled:ne,className:"text-white hover:bg-white/20 border border-white/30 backdrop-blur-sm transition-all hover:scale-105",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Arquivar"]})]}),e.jsxs(z.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/30",children:[e.jsx(Z,{className:"w-4 h-4 text-white"}),e.jsxs("span",{className:"text-white font-medium",children:[_.length," membros"]})]})]}),e.jsx(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-white pb-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(z.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.6},className:"p-4 bg-white/20 backdrop-blur-md rounded-2xl border border-white/30 shadow-xl",children:e.jsx(ie,{className:"w-10 h-10"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(z.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-4xl md:text-5xl font-bold mb-2 drop-shadow-lg",children:m?.name||"Carregando..."}),e.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex items-center gap-3 flex-wrap",children:[e.jsx("div",{className:"px-4 py-1.5 bg-white/20 backdrop-blur-sm rounded-full border border-white/30",children:e.jsx("p",{className:"text-base font-medium",children:m?.subject||"Disciplina"})}),m?.description&&e.jsx("p",{className:"text-white/90 text-sm max-w-2xl",children:m.description})]})]})]})})]})]}),e.jsx("div",{className:"w-full px-8 -mt-8 relative z-20",children:e.jsxs(De,{value:p,onValueChange:x,className:"w-full",children:[e.jsx(z.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:e.jsx(w,{className:"mb-8 bg-white/80 backdrop-blur-sm dark:bg-slate-900/80 border-2 border-slate-200 dark:border-slate-800 shadow-2xl rounded-2xl overflow-hidden",children:e.jsxs(qe,{className:"w-full grid grid-cols-5 p-3 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 gap-2",children:[e.jsxs($,{value:"feed",className:"flex items-center justify-center gap-2 px-4 py-3 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-blue-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 rounded-xl hover:scale-[1.02]",children:[e.jsx(le,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold",children:"Mural"})]}),e.jsxs($,{value:"announcements",className:"flex items-center justify-center gap-2 px-4 py-3 data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-orange-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 rounded-xl hover:scale-[1.02]",children:[e.jsx(we,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold",children:"Comunicados"})]}),e.jsxs($,{value:"library",className:"flex items-center justify-center gap-2 px-4 py-3 data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 rounded-xl hover:scale-[1.02]",children:[e.jsx(ie,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold",children:"Biblioteca"})]}),e.jsxs($,{value:"activities",className:"flex items-center justify-center gap-2 px-4 py-3 data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-green-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 rounded-xl hover:scale-[1.02]",children:[e.jsx(F,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold",children:"Atividades"})]}),e.jsxs($,{value:"members",className:"flex items-center justify-center gap-2 px-4 py-3 data-[state=active]:bg-gradient-to-r data-[state=active]:from-cyan-500 data-[state=active]:to-cyan-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 rounded-xl hover:scale-[1.02]",children:[e.jsx(Z,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold",children:"Membros"})]})]})})}),e.jsx(O,{value:"feed",children:e.jsx(ma,{posts:k,loading:u})}),e.jsx(O,{value:"announcements",children:e.jsx(xa,{announcements:v,loading:u})}),e.jsx(O,{value:"library",children:e.jsx(ga,{materials:A,loading:u})}),e.jsx(O,{value:"activities",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(g=>e.jsx(ye,{activity:{...g,status:"pending",grade:null,max_grade:g.max_score||100},onClick:()=>c.startTransition(()=>d(`/students/activities/${g.id}`))},g.id)),b.length===0&&e.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"col-span-full",children:e.jsxs(w,{className:"p-12 text-center bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-700 dark:to-slate-800 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"w-10 h-10 text-slate-400 dark:text-slate-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nenhuma atividade ainda"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"As atividades da turma aparecerÃ£o aqui"})]})})]})}),e.jsx(O,{value:"members",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),"Professores (",U.teachers.length,")"]}),U.teachers.length>0?e.jsx("div",{className:"space-y-3",children:U.teachers.map(g=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border border-slate-200 dark:border-slate-800 bg-slate-50/60 dark:bg-slate-900/40 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white font-bold text-lg shadow-md flex-shrink-0",children:g.profile?.full_name?.[0]?.toUpperCase()||"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:g.profile?.full_name||"Professor(a)"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:g.profile?.email})]}),e.jsx(X,{className:"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 flex-shrink-0",children:"Professor"})]},g.id))}):e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Nenhum professor listado."})]}),e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),"Colegas de turma (",U.students.length,")"]}),U.students.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.students.map(g=>e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg border border-slate-200 dark:border-slate-800 bg-slate-50/70 dark:bg-slate-900/40 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white font-bold shadow-md flex-shrink-0",children:g.profile?.full_name?.[0]?.toUpperCase()||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white truncate",children:g.profile?.full_name||"Colega"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:g.profile?.email}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),"Desde ",new Date(g.created_at).toLocaleDateString("pt-BR")]})]})]},g.id))}):e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Nenhum colega listado no momento."})]})]})})]})}),e.jsx(da,{isOpen:h,onClose:()=>P(!1),onConfirm:async()=>{const{data:{user:g}}=await C.auth.getUser();(await ae(s,g.id)).success&&(P(!1),d("/students/classes"))},loading:ne})]})};export{xs as default};
