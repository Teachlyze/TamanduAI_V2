import{u as B,a as E,r as c,s as x,l as P,j as t,p as q}from"./main-Bl3iyOV8.js";import{B as r,m as f}from"./button-DpOjBXor.js";import{C as p}from"./card-SNqEFOp2.js";import{e as T}from"./SidebarPremium-PssxZ1ou.js";import{S as d}from"./StatsCard-fhht2-4N.js";import"./DashboardHeader-SVF9mrXt.js";import{E as z}from"./EmptyState-Bk_utWIx.js";import"./input-Pzsue5kv.js";import"./dropdown-menu-BALYbIT1.js";import"./label-Ci17ItmZ.js";import{B as v}from"./bot-DjKSFmrX.js";import{M as I}from"./message-square-vPIiHbFJ.js";import{U as M}from"./users-CoDMpyo4.js";import{S as $}from"./star-C4iDH66r.js";import{S as u}from"./settings-BAxhic8T.js";import{C as D}from"./chart-column-C0EgfbtL.js";import{P as L}from"./pause-DJSvVW0M.js";import{P as U}from"./play-DGmZyS9T.js";import"./bell-BfdEdLeq.js";import"./chevron-right-DU2dW0WM.js";import"./trending-up-8L-hnT0i.js";import"./user-DM7mQE01.js";import"./index-CYK-_QUl.js";import"./house--MZ6Jz5W.js";import"./graduation-cap-D52WS1is.js";import"./index-Bb4h7Ki9.js";import"./x-f7wZy2q2.js";import"./index-PwNWXBBP.js";import"./index-B53WU1tR.js";import"./index-DZVOjynP.js";import"./index-5Sg1WP5m.js";import"./check-DWB8e_Oc.js";const vt=()=>{const o=B(),{user:m}=E(),[j,b]=c.useState(!0),[h,N]=c.useState([]),[n,y]=c.useState({activeBots:0,totalConversations:0,studentsServed:0,avgSatisfaction:0});c.useEffect(()=>{C()},[m]);const C=async()=>{if(m)try{b(!0);const{data:a}=await x.from("classes").select("id, name, subject, color").eq("created_by",m.id).eq("is_active",!0),e=await Promise.all((a||[]).map(async s=>{const{data:l}=await x.from("classes").select("settings").eq("id",s.id).single(),S=l?.settings?.chatbot_enabled||!1,w=l?.settings?.chatbot_paused||!1,{data:_}=await x.from("rag_training_sources").select("id").eq("class_id",s.id),A=_?.length||0;return{...s,chatbot:{status:S?w?"paused":"active":"not_configured",activitiesTrained:A,conversations:0,satisfaction:0}}}));N(e);const i=e.filter(s=>s.chatbot.status==="active").length,g=e.reduce((s,l)=>s+l.chatbot.conversations,0);y({activeBots:i,totalConversations:g,studentsServed:Math.floor(g*.6),avgSatisfaction:i>0?90:0})}catch(a){P.error("Erro:",a)}finally{b(!1)}},k=a=>{const e={active:{label:"Ativo",color:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"},paused:{label:"Pausado",color:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"},not_configured:{label:"NÃ£o Configurado",color:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-400"}};return e[a]||e.not_configured};return j?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(q,{size:"lg"})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-600 p-8 text-white shadow-lg",children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Assistente IA para Turmas"}),t.jsx("p",{className:"text-blue-50 text-lg",children:"Configure chatbots inteligentes para auxiliar seus alunos"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx(d,{title:"Chatbots Ativos",value:n.activeBots,icon:v,gradient:"from-blue-500 to-cyan-500",delay:0}),t.jsx(d,{title:"Conversas (30 dias)",value:n.totalConversations,icon:I,gradient:"from-cyan-500 to-blue-500",delay:.1}),t.jsx(d,{title:"Alunos Atendidos",value:n.studentsServed,icon:M,gradient:"from-rose-500 to-orange-500",delay:.2}),t.jsx(d,{title:"SatisfaÃ§Ã£o MÃ©dia",value:`${n.avgSatisfaction}%`,icon:$,gradient:"from-amber-500 to-yellow-500",format:"text",delay:.3})]}),t.jsxs(p,{className:"p-6 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800 mb-8",children:[t.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-2",children:"â“ Como funciona o chatbot?"}),t.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"Configure um assistente IA para cada turma. O chatbot aprende com as atividades e materiais que vocÃª seleciona, e ajuda os alunos a tirarem dÃºvidas 24/7."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"ðŸ“– DocumentaÃ§Ã£o"}),t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"ðŸŽ¥ Ver Tutorial"})]})]}),h.length>0?t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((a,e)=>{const i=k(a.chatbot.status);return t.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.05},children:t.jsxs(p,{className:"p-6 hover:shadow-lg transition-shadow bg-white dark:bg-slate-900",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-1",children:a.name}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:a.subject||"Sem matÃ©ria"})]}),t.jsx(T,{className:i.color,children:i.label})]}),a.chatbot.status!=="not_configured"&&t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:a.chatbot.activitiesTrained}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Atividades"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400",children:a.chatbot.conversations}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Conversas"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:[a.chatbot.satisfaction,"%"]}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"SatisfaÃ§Ã£o"})]})]}),t.jsx("div",{className:"flex gap-2",children:a.chatbot.status==="not_configured"?t.jsxs(r,{onClick:()=>o(`/dashboard/chatbot/${a.id}/config`),className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),"Configurar"]}):t.jsxs(t.Fragment,{children:[t.jsxs(r,{variant:"outline",onClick:()=>o(`/dashboard/chatbot/${a.id}/config`),className:"flex-1",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),"Editar"]}),t.jsxs(r,{variant:"outline",onClick:()=>o(`/dashboard/chatbot/${a.id}/analytics`),className:"flex-1",children:[t.jsx(D,{className:"w-4 h-4 mr-2"}),"Analytics"]}),t.jsx(r,{variant:"outline",size:"icon",className:a.chatbot.status==="active"?"text-amber-600":"text-green-600",children:a.chatbot.status==="active"?t.jsx(L,{className:"w-4 h-4"}):t.jsx(U,{className:"w-4 h-4"})})]})})]})},a.id)})}):t.jsx(z,{icon:v,title:"Nenhuma turma encontrada",description:"Crie uma turma para configurar seu primeiro chatbot IA",actionLabel:"Criar Turma",actionIcon:u,action:()=>o("/dashboard/classes")})]})};export{vt as default};
