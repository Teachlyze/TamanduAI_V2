import{c as C,k as B,u as I,a as $,r,j as e,i as _}from"./main-lplkbHVD.js";import{B as o,m as q,C as z}from"./card-5YVz_lXF.js";import{B as H}from"./badge-OydeWBt4.js";import{D as O,g as h}from"./dropdown-menu-CLtSaPLu.js";import{S as p}from"./StatsCard-C0he3s50.js";import{E as V}from"./EmptyState-BK9XEY_y.js";import"./label-DBO2dw6S.js";import{F as R}from"./FilterBar-CeAH_cW2.js";import{C as N}from"./classService-A23NyYzd.js";import{A as U}from"./arrow-left-I3JVuo4b.js";import{U as k}from"./users-aVT1iRqk.js";import{F as m}from"./file-text-DVGlqNk_.js";import{M as c}from"./message-square-DgKV5b5b.js";import{A as y}from"./award-Dc37_vwW.js";import{P as w}from"./plus-BjOPBxNQ.js";import{E as G}from"./eye-DRi5ojGk.js";import{T as J}from"./trash-2-DVwyhlpl.js";import"./index-DaBmT7Zy.js";import"./chevron-right-BIopAIqH.js";import"./chevron-down-8nRBPS2S.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Q=C("heart",K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],X=C("pin",W),ge=()=>{const{classId:s}=B(),i=I(),{user:l}=$(),[S,v]=r.useState(!0),[b,A]=r.useState(null),[x,P]=r.useState([]),[g,f]=r.useState([]),[n,j]=r.useState({type:null}),[u,E]=r.useState({members:0,activities:0,posts:0});r.useEffect(()=>{M()},[s]),r.useEffect(()=>{D()},[x,n]);const M=async()=>{try{v(!0);const t=await N.getClassById(s);A(t);const a=await N.getClassStats(s),d=[{id:"1",type:"announcement",title:"Bem-vindos à turma!",content:"Olá pessoal! Sejam bem-vindos à nossa turma. Estou animado para começar esse semestre com vocês.",author:{id:l?.id,name:l?.name||"Professor",avatar:l?.avatar_url},isPinned:!0,views:45,likes:12,comments:3,createdAt:new Date().toISOString()},{id:"2",type:"activity",title:"Nova atividade disponível",content:'A atividade "Exercícios Cap. 1" já está disponível. Prazo: 30/10/2025',author:{id:l?.id,name:l?.name||"Professor",avatar:l?.avatar_url},isPinned:!1,views:38,likes:8,comments:5,createdAt:new Date(Date.now()-864e5).toISOString()}];P(d),E({members:a.studentCount+a.teacherCount,activities:a.activitiesCount,posts:d.length})}catch(t){console.error("Erro:",t)}finally{v(!1)}},D=()=>{if(!n.type){f(x);return}f(x.filter(t=>t.type===n.type))},L=t=>({announcement:c,activity:m,material:m,link:y,question:c})[t]||c,F=t=>{const a={announcement:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",activity:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",material:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",link:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",question:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"};return a[t]||a.announcement},T=t=>({announcement:"Anúncio",activity:"Atividade",material:"Material",link:"Link",question:"Pergunta"})[t]||t;return S?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(_,{size:"lg"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(o,{variant:"ghost",onClick:()=>i("/teacher/classes"),className:"mb-4",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Voltar para Turmas"]}),e.jsx(O,{title:b?.name||"Turma",subtitle:b?.subject||"Mural da turma",role:"teacher"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(p,{title:"Membros",value:u.members,icon:k,gradient:h.stats.students,onClick:()=>i(`/teacher/classes/${s}/members`),delay:0}),e.jsx(p,{title:"Atividades",value:u.activities,icon:m,gradient:h.stats.activities,onClick:()=>i(`/teacher/classes/${s}/activities`),delay:.1}),e.jsx(p,{title:"Posts no Mural",value:u.posts,icon:c,gradient:h.primary,delay:.2})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs(o,{variant:"outline",onClick:()=>i(`/teacher/classes/${s}/members`),className:"h-auto py-4 flex flex-col gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Membros"})]}),e.jsxs(o,{variant:"outline",onClick:()=>i(`/teacher/classes/${s}/activities`),className:"h-auto py-4 flex flex-col gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Atividades"})]}),e.jsxs(o,{variant:"outline",onClick:()=>i(`/teacher/classes/${s}/grades`),className:"h-auto py-4 flex flex-col gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Notas"})]}),e.jsxs(o,{variant:"outline",onClick:()=>i(`/teacher/classes/${s}/edit`),className:"h-auto py-4 flex flex-col gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Editar"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(R,{filters:[{key:"type",label:"Tipo",options:[{value:"announcement",label:"📢 Anúncios"},{value:"activity",label:"📝 Atividades"},{value:"material",label:"📚 Materiais"},{value:"link",label:"🔗 Links"},{value:"question",label:"❓ Perguntas"}]}],activeFilters:n,onFilterChange:(t,a)=>j(d=>({...d,[t]:a})),onClearAll:()=>j({type:null})}),e.jsxs(o,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Criar Post"]})]}),g.length>0?e.jsx("div",{className:"space-y-6",children:g.map((t,a)=>(L(t.type),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},children:e.jsxs(z,{className:"p-6 bg-white dark:bg-slate-900 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.author.avatar?e.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:t.author.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900 dark:text-white",children:t.author.name}),e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:new Date(t.createdAt).toLocaleString("pt-BR")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:F(t.type),children:T(t.type)}),t.isPinned&&e.jsx(X,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:t.title}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:t.content}),e.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:[e.jsx(G,{className:"w-4 h-4"}),t.views]}),e.jsxs("button",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400",children:[e.jsx(Q,{className:"w-4 h-4"}),t.likes]}),e.jsxs("button",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-green-600 dark:hover:text-green-400",children:[e.jsx(c,{className:"w-4 h-4"}),t.comments]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{className:"text-sm text-slate-600 dark:text-slate-400 hover:text-red-600",children:e.jsx(J,{className:"w-4 h-4"})})]})]})},t.id)))}):e.jsx(V,{icon:c,title:n.type?"Nenhum post deste tipo":"Nenhum post ainda",description:n.type?"Ajuste os filtros.":"Crie o primeiro post no mural.",actionLabel:"Criar Post",actionIcon:w,action:()=>{}})]})};export{ge as default};
