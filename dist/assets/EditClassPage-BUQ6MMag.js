import{r as c,j as e,t as T,u as A,l as u,p as S}from"./main-CQL62Pt9.js";import{B as n}from"./button-CXd9Ydu2.js";import{I as C}from"./input-ChgTSeH3.js";import{L as b}from"./label-C6FIu0Ui.js";import{C as v}from"./card-CeKCmDnl.js";import{c as N,D as B}from"./DashboardHeader-CrYjSP7a.js";import"./dropdown-menu-jZureaoX.js";import{C as D}from"./CopyButton-Nuf3M1Y4.js";import{C as F}from"./check-sjd9Yckd.js";import{C as h}from"./classService-DMvbHMT3.js";import{u as q}from"./use-toast-Djw8A-a9.js";import{A as L}from"./arrow-left-wPKKrOj9.js";import{S as $}from"./save-sETwFI3G.js";import{A as I}from"./archive-ChuG8ai5.js";import{T as P}from"./trash-2-Cxkxlzod.js";import"./SidebarPremium--x3DStDs.js";import"./bell-CU7gBYYE.js";import"./chevron-right-CC_eXMfz.js";import"./trending-up-CC7Upw_D.js";import"./user-DAj5MP6f.js";import"./file-text-0rRUQINA.js";import"./settings-Dvldtua5.js";import"./house-Dxla3ep4.js";import"./users-BtfqzUVv.js";import"./graduation-cap-BjoHLR7H.js";import"./index-zZOcwNkD.js";import"./chart-column-BKLyUAC0.js";import"./x-Q__6dFVj.js";import"./index-DSsiGnWz.js";import"./index-DDNZOoSI.js";import"./index-DFnaGz4y.js";import"./index-CtJ7EUUg.js";import"./copy-h-QjC0o2.js";import"./notificationOrchestrator-B3bBylM6.js";const z=({value:t="#3B82F6",onChange:i,label:s="Cor",presets:j=null,allowCustom:g=!0})=>{const[d,x]=c.useState(t),m=j||[{name:"Azul",color:"#3B82F6",gradient:"from-blue-500 to-blue-600"},{name:"Ciano",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Azul Escuro",color:"#1E40AF",gradient:"from-blue-700 to-blue-800"},{name:"Verde",color:"#10B981",gradient:"from-green-500 to-green-600"},{name:"Amarelo",color:"#F59E0B",gradient:"from-amber-500 to-amber-600"},{name:"Vermelho",color:"#EF4444",gradient:"from-red-500 to-red-600"},{name:"Indigo",color:"#6366F1",gradient:"from-indigo-500 to-indigo-600"},{name:"Teal",color:"#14B8A6",gradient:"from-teal-500 to-teal-600"},{name:"Laranja",color:"#F97316",gradient:"from-orange-500 to-orange-600"},{name:"Cyan",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Lime",color:"#84CC16",gradient:"from-lime-500 to-lime-600"},{name:"Slate",color:"#64748B",gradient:"from-slate-500 to-slate-600"}],f=r=>{i(r)},l=r=>{const p=r.target.value;x(p),i(p)};return e.jsxs("div",{children:[s&&e.jsx(b,{className:"text-sm font-semibold mb-3 block",children:s}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:m.map(r=>e.jsx("button",{type:"button",onClick:()=>f(r.color),className:`
              relative w-full aspect-square rounded-lg
              bg-gradient-to-br ${r.gradient}
              hover:scale-110 transition-transform
              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
              dark:focus:ring-offset-slate-900
            `,title:r.name,children:t===r.color&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-white dark:bg-slate-900 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(F,{className:"w-4 h-4 text-slate-900 dark:text-white"})})})},r.color))}),g&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"color",value:d,onChange:l,className:`
                w-full h-10 rounded-lg cursor-pointer
                border-2 ${N.border.default}
                focus:ring-2 focus:ring-blue-500 focus:border-blue-500
              `})}),e.jsx("div",{className:`
            flex-1 px-3 py-2 rounded-lg border ${N.border.default}
            bg-white dark:bg-slate-900 text-sm font-mono
            ${N.text.primary}
          `,children:d.toUpperCase()})]}),e.jsx("div",{className:"mt-4 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg shadow-md",style:{backgroundColor:t}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-1",children:"Cor Selecionada"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:t.toUpperCase()})]})]})})]})},be=()=>{const{classId:t}=T(),i=A(),{toast:s}=q(),[j,g]=c.useState(!0),[d,x]=c.useState(!1),[m,f]=c.useState(null),[l,r]=c.useState({name:"",subject:"",description:"",color:"#3B82F6"});c.useEffect(()=>{p()},[t]);const p=async()=>{try{g(!0);const a=await h.getClassById(t);f(a),r({name:a.name||"",subject:a.subject||"",description:a.description||"",color:a.color||"#3B82F6"})}catch(a){u.error("Erro ao carregar turma:",a)}finally{g(!1)}},w=async()=>{try{x(!0),await h.updateClass(t,l),s({title:"âœ… Turma atualizada!",description:"As alteraÃ§Ãµes foram salvas com sucesso."}),i(`/dashboard/classes/${t}`)}catch(a){u.error("Erro ao salvar:",a),s({title:"âŒ Erro ao salvar",description:"Tente novamente em alguns instantes.",variant:"destructive"})}finally{x(!1)}},y=async()=>{if(confirm("Tem certeza que deseja arquivar esta turma?"))try{await h.archiveClass(t),s({title:"ðŸ“¦ Turma arquivada",description:"A turma foi movida para arquivados."}),i("/dashboard/classes")}catch(a){u.error("Erro ao arquivar:",a),s({title:"âŒ Erro ao arquivar",description:"Tente novamente.",variant:"destructive"})}},k=async()=>{if(confirm("TEM CERTEZA? Esta aÃ§Ã£o nÃ£o pode ser desfeita!"))try{await h.deleteClass(t),s({title:"ðŸ—‘ï¸ Turma deletada",description:"A turma foi removida permanentemente."}),i("/dashboard/classes")}catch(a){u.error("Erro ao deletar:",a),s({title:"âŒ Erro ao deletar",description:"Tente novamente.",variant:"destructive"})}},E=async()=>{try{const a=await h.generateInviteCode(t);f(o=>({...o,invite_code:a})),s({title:"ðŸ”‘ Novo cÃ³digo gerado!",description:"O cÃ³digo anterior foi invalidado."})}catch(a){u.error("Erro:",a),s({title:"âŒ Erro ao gerar cÃ³digo",description:"Tente novamente.",variant:"destructive"})}};return j?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(S,{size:"lg",text:"Carregando..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(n,{variant:"ghost",onClick:()=>i(`/dashboard/classes/${t}`),className:"mb-4",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(B,{title:"Editar Turma",subtitle:m?.name||"",role:"teacher"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx(v,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Nome da Turma *"}),e.jsx(C,{value:l.name,onChange:a=>r(o=>({...o,name:a.target.value})),placeholder:"Ex: MatemÃ¡tica 3Âº Ano A"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"MatÃ©ria/Disciplina"}),e.jsx(C,{value:l.subject,onChange:a=>r(o=>({...o,subject:a.target.value})),placeholder:"Ex: MatemÃ¡tica"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"DescriÃ§Ã£o"}),e.jsx("textarea",{value:l.description,onChange:a=>r(o=>({...o,description:a.target.value})),placeholder:"DescriÃ§Ã£o da turma...",rows:4,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsx(z,{label:"Cor da Turma",value:l.color,onChange:a=>r(o=>({...o,color:a}))})]})}),e.jsxs(v,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold mb-4",children:"CÃ³digo de Convite"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(C,{value:m?.invite_code||"",readOnly:!0}),e.jsx(D,{text:m?.invite_code||"",label:"Copiar"})]}),e.jsx(n,{variant:"outline",onClick:E,className:"w-full",children:"Gerar Novo CÃ³digo"})]}),e.jsx(v,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(n,{onClick:w,disabled:d,className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),d?"Salvando...":"Salvar"]}),e.jsx(n,{variant:"outline",onClick:()=>i(`/dashboard/classes/${t}`),children:"Cancelar"})]})}),e.jsxs(v,{className:"p-6 bg-white dark:bg-slate-900 border-red-200 dark:border-red-800",children:[e.jsx("h3",{className:"font-bold text-red-600 dark:text-red-400 mb-4",children:"Zona de Perigo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{variant:"outline",onClick:y,className:"w-full text-amber-600 border-amber-300",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Arquivar Turma"]}),e.jsxs(n,{variant:"outline",onClick:k,className:"w-full text-red-600 border-red-300",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Excluir Turma"]})]})]})]})]})};export{be as default};
