import{e as Y,r as o,t as xt,b as ea,u as ta,s as S,l as $,j as n,q as aa,a as ra}from"./main-CI5_MmIm.js";import{S as pe}from"./StatCard-DuAvUi6b.js";import{C as ce}from"./card-DpcnMbcE.js";import{B as ia}from"./button-D7H9d9Gd.js";import{E as sa}from"./EmptyState-ExwS4ndS.js";import{G as na}from"./GradeCard-Cr5RpGH_.js";import"./dialog-DzyprNmz.js";import{S as Ke,a as Ge,b as ze,c as qe,d as re}from"./select-DSQCR6Pt.js";import{u as oa}from"./use-toast-D7N2H9RC.js";import{m as We}from"./proxy-CT7Xtxle.js";import{S as ke}from"./star-6E86D7gV.js";import{C as la}from"./circle-alert-X86u08ZX.js";import{S as Ve}from"./sparkles-D6AqXP1n.js";import{C as ca}from"./circle-check-big-KDmohnfK.js";import{T as Ue}from"./target-BgYs7ZJ1.js";import{L as da}from"./lightbulb-BGDEDhcy.js";import{B as ua}from"./book-open-DlGI5eOy.js";import{T as ma}from"./trophy-XNN6EduA.js";import{T as fa}from"./trending-up-1zEvTPQM.js";import{O as de,c as B,aM as bt,b5 as va,s as xe,b6 as Pt,aK as Ce,b7 as pa,b8 as jt,b9 as Te,ba as ga,bb as ya,bc as ha,bd as xa,be as ba,t as K,D as At,Z as be,bf as Pe,N as G,aD as z,bg as wt,bh as _t,r as je,a0 as kt,bi as Pa,bj as ja,bk as Aa,L as X,bl as wa,bm as _a,ab as Ot,ac as Et,bn as St,aI as Rt,bo as ka,bp as Oa,bq as Ea,u as Dt,br as Sa,bs as ye,az as Ra,i as Da,h as Ze,R as Na,aA as Ia,aB as Ca,k as Ta,n as Nt,G as Ma,A as La,z as He,bt as Ba,H as Je,E as $a,J as Fa,K as Ka,M as Ga,F as ge,Q as za,V as qa,W as Oe,X as Xe,Y as Ye,_ as Qe,$ as et}from"./CartesianChart-DKXpiVYO.js";import{L as Wa,a as Va}from"./LineChart-1TJYCqND.js";import{B as Ua,a as Za}from"./BarChart-BUl8ULUy.js";import{a as Ha,b as Ja,c as Xa,s as Ya,P as Qa}from"./PolarChart-Czk91V25.js";import{f as tt}from"./format-BdDrz3ZT.js";import{p as at}from"./pt-BR-C6XVmIDX.js";import"./badge-BOI6M_d9.js";import"./calendar-Dbm_7POQ.js";import"./message-square-dQFvNbyh.js";import"./index-D4BuPd_i.js";import"./index-DHrdJ99Z.js";import"./Combination-BfETjw1A.js";import"./SidebarPremium-0_wHXPj0.js";import"./house-B6Hparzo.js";import"./users-ChR7WEeh.js";import"./file-text-CtozP3gh.js";import"./graduation-cap-mPfDCRgT.js";import"./chart-column-G5dLAdkQ.js";import"./message-circle-CRpVuYq9.js";import"./settings-BWUwUKXK.js";import"./brain-DVBX4Id_.js";import"./index-RHGs5twt.js";import"./chevron-right-CHSrP1xQ.js";import"./x-DGmYUGM5.js";import"./index-CRRraFTu.js";import"./index-CtvfaZbL.js";import"./index-DrPD6SFW.js";import"./chevron-down-DXVEpPD6.js";import"./check-GhIpAKm1.js";import"./chevron-up-CrZ13wWo.js";import"./index-BhuNWwGV.js";import"./en-US-ChNhCS9W.js";var er=["points","className","baseLinePoints","connectNulls"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ie.apply(null,arguments)}function tr(e,t){if(e==null)return{};var a,r,i=ar(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ar(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var rt=e=>e&&e.x===+e.x&&e.y===+e.y,rr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return t.forEach(r=>{rt(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),rt(t[0])&&a[a.length-1].push(t[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},ue=(e,t)=>{var a=rr(e);t&&(a=[a.reduce((i,s)=>[...i,...s],[])]);var r=a.map(i=>i.reduce((s,c,d)=>"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y),"")).join("");return a.length===1?"".concat(r,"Z"):r},ir=(e,t,a)=>{var r=ue(e,a);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(ue(Array.from(t).reverse(),a).slice(1))},It=e=>{var{points:t,className:a,baseLinePoints:r,connectNulls:i}=e,s=tr(e,er);if(!t||!t.length)return null;var c=Y("recharts-polygon",a);if(r&&r.length){var d=s.stroke&&s.stroke!=="none",v=ir(t,r,i);return o.createElement("g",{className:c},o.createElement("path",ie({},de(s),{fill:v.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:v})),d?o.createElement("path",ie({},de(s),{fill:"none",d:ue(t,i)})):null,d?o.createElement("path",ie({},de(s),{fill:"none",d:ue(r,i)})):null)}var g=ue(t,i);return o.createElement("path",ie({},de(s),{fill:g.slice(-1)==="Z"?s.fill:"none",className:c,d:g}))},Me=(e,t,a)=>{switch(t){case"angleAxis":return Te(e,a);case"radiusAxis":return jt(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Le=(e,t,a)=>{switch(t){case"angleAxis":return ya(e,a);case"radiusAxis":return ga(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},se=B([Me,bt,Ha,Le],va),Ct=B([xe,Xa,ha,Ce],xa),ne=B([xe,Me,bt,se,Ja,Le,Pt,Ct,Ce],pa);B([xe,Me,se,Le,Pt,Ct,Ce],ba);var sr=(e,t)=>ne(e,"angleAxis",t,!1),nr=B([sr],e=>{if(e)return e.map(t=>t.coordinate)}),or=(e,t)=>ne(e,"radiusAxis",t,!1),lr=B([or],e=>{if(e)return e.map(t=>t.coordinate)}),cr=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius"];function dr(e,t){if(e==null)return{};var a,r,i=ur(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ur(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F.apply(null,arguments)}function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?it(Object(a),!0).forEach(function(r){mr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function mr(e,t,a){return(t=fr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fr(e){var t=vr(e,"string");return typeof t=="symbol"?t:t+""}function vr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pr=(e,t,a,r)=>{var i="";return r.forEach((s,c)=>{var d=z(t,a,e,s);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},gr=e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:i,polarAngles:s,radialLines:c}=e;if(!s||!s.length||!c)return null;var d=me({stroke:"#ccc"},G(e));return o.createElement("g",{className:"recharts-polar-grid-angle"},s.map(v=>{var g=z(t,a,r,v),b=z(t,a,i,v);return o.createElement("line",F({key:"line-".concat(v)},d,{x1:g.x,y1:g.y,x2:b.x,y2:b.y}))}))},st=e=>{var{cx:t,cy:a,radius:r}=e,i=me({stroke:"#ccc",fill:"none"},G(e));return o.createElement("circle",F({},i,{className:Y("recharts-polar-grid-concentric-circle",e.className),cx:t,cy:a,r}))},nt=e=>{var{radius:t}=e,a=me({stroke:"#ccc",fill:"none"},G(e));return o.createElement("path",F({},a,{className:Y("recharts-polar-grid-concentric-polygon",e.className),d:pr(t,e.cx,e.cy,e.polarAngles)}))},yr=e=>{var{polarRadius:t,gridType:a}=e;if(!t||!t.length)return null;var r=Math.max(...t),i=e.fill&&e.fill!=="none";return o.createElement("g",{className:"recharts-polar-grid-concentric"},i&&a==="circle"&&o.createElement(st,F({},e,{radius:r})),i&&a!=="circle"&&o.createElement(nt,F({},e,{radius:r})),t.map((s,c)=>{var d=c;return a==="circle"?o.createElement(st,F({key:d},e,{fill:"none",radius:s})):o.createElement(nt,F({key:d},e,{fill:"none",radius:s}))}))},Tt=e=>{var t,a,r,i,s,c,d,v,g,{gridType:b="polygon",radialLines:y=!0,angleAxisId:P=0,radiusAxisId:N=0,cx:C,cy:j,innerRadius:q,outerRadius:T,polarAngles:W,polarRadius:Q}=e,te=dr(e,cr),O=K(Pe),Z=K(oe=>nr(oe,P)),J=K(oe=>lr(oe,N)),H=Array.isArray(W)?W:Z,E=Array.isArray(Q)?Q:J;if(H==null||E==null)return null;var ae=me(me({cx:(t=(a=O?.cx)!==null&&a!==void 0?a:C)!==null&&t!==void 0?t:0,cy:(r=(i=O?.cy)!==null&&i!==void 0?i:j)!==null&&r!==void 0?r:0,innerRadius:(s=(c=O?.innerRadius)!==null&&c!==void 0?c:q)!==null&&s!==void 0?s:0,outerRadius:(d=(v=O?.outerRadius)!==null&&v!==void 0?v:T)!==null&&d!==void 0?d:0,polarAngles:H,polarRadius:E},te),{},{zIndex:(g=te.zIndex)!==null&&g!==void 0?g:At.grid}),{outerRadius:w}=ae;return w<=0?null:o.createElement(be,{zIndex:ae.zIndex},o.createElement("g",{className:"recharts-polar-grid"},o.createElement(yr,F({gridType:b,radialLines:y},ae,{polarAngles:H,polarRadius:E})),o.createElement(gr,F({gridType:b,radialLines:y},ae,{polarAngles:H,polarRadius:E}))))};Tt.displayName="PolarGrid";var Ee={},Se={},ot;function hr(){return ot||(ot=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,r){if(a.length===0)return;let i=a[0],s=r(i);for(let c=1;c<a.length;c++){const d=a[c],v=r(d);v>s&&(s=v,i=d)}return i}e.maxBy=t})(Se)),Se}var lt;function xr(){return lt||(lt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hr(),a=_t(),r=wt();function i(s,c){if(s!=null)return t.maxBy(Array.from(s),r.iteratee(c??a.identity))}e.maxBy=i})(Ee)),Ee}var Re,ct;function br(){return ct||(ct=1,Re=xr().maxBy),Re}var Pr=br();const jr=xt(Pr);var De={},Ne={},dt;function Ar(){return dt||(dt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,r){if(a.length===0)return;let i=a[0],s=r(i);for(let c=1;c<a.length;c++){const d=a[c],v=r(d);v<s&&(s=v,i=d)}return i}e.minBy=t})(Ne)),Ne}var ut;function wr(){return ut||(ut=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ar(),a=_t(),r=wt();function i(s,c){if(s!=null)return t.minBy(Array.from(s),r.iteratee(c??a.identity))}e.minBy=i})(De)),De}var Ie,mt;function _r(){return mt||(mt=1,Ie=wr().minBy),Ie}var kr=_r();const Or=xt(kr);var Er=["cx","cy","angle","axisLine"],Sr=["angle","tickFormatter","stroke","tick"];function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(null,arguments)}function ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(a),!0).forEach(function(r){Rr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ft(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Rr(e,t,a){return(t=Dr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Dr(e){var t=Nr(e,"string");return typeof t=="symbol"?t:t+""}function Nr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mt(e,t){if(e==null)return{};var a,r,i=Ir(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ir(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Cr="radiusAxis";function Tr(e){var t=kt();return o.useEffect(()=>(t(Pa(e)),()=>{t(ja(e))})),null}var Mr=(e,t,a,r)=>{var{coordinate:i}=e;return z(a,r,i,t)},Lr=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},Br=(e,t,a,r)=>{var i=jr(r,c=>c.coordinate||0),s=Or(r,c=>c.coordinate||0);return{cx:t,cy:a,startAngle:e,endAngle:e,innerRadius:s?.coordinate||0,outerRadius:i?.coordinate||0,clockWise:!1}},$r=(e,t)=>{var{cx:a,cy:r,angle:i,axisLine:s}=e,c=Mt(e,Er),d=t.reduce((y,P)=>[Math.min(y[0],P.coordinate),Math.max(y[1],P.coordinate)],[1/0,-1/0]),v=z(a,r,d[0],i),g=z(a,r,d[1],i),b=U(U(U({},G(c)),{},{fill:"none"},G(s)),{},{x1:v.x,y1:v.y,x2:g.x,y2:g.y});return o.createElement("line",fe({className:"recharts-polar-radius-axis-line"},b))},Fr=(e,t,a)=>{var r;return o.isValidElement(e)?r=o.cloneElement(e,t):typeof e=="function"?r=e(t):r=o.createElement(Rt,fe({},t,{className:"recharts-polar-radius-axis-tick-value"}),a),r},Kr=(e,t)=>{var{angle:a,tickFormatter:r,stroke:i,tick:s}=e,c=Mt(e,Sr),d=Lr(e.orientation),v=G(c),g=Ot(s),b=t.map((y,P)=>{var N=Mr(y,e.angle,e.cx,e.cy),C=U(U(U(U({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(N.x,", ").concat(N.y,")")},v),{},{stroke:"none",fill:i},g),{},{index:P},N),{},{payload:y});return o.createElement(X,fe({className:Y("recharts-polar-radius-axis-tick",St(s)),key:"tick-".concat(y.coordinate)},Et(e,y,P)),Fr(s,C,r?r(y.value,P):y.value))});return o.createElement(X,{className:"recharts-polar-radius-axis-ticks"},b)},Gr=e=>{var{radiusAxisId:t}=e,a=K(Pe),r=K(v=>se(v,"radiusAxis",t)),i=K(v=>ne(v,"radiusAxis",t,!1));if(a==null||!i||!i.length||r==null)return null;var s=U(U(U({},e),{},{scale:r},a),{},{radius:a.outerRadius}),{tick:c,axisLine:d}=s;return o.createElement(be,{zIndex:s.zIndex},o.createElement(X,{className:Y("recharts-polar-radius-axis",Cr,s.className)},d&&$r(s,i),c&&Kr(s,i),o.createElement(wa,Br(s.angle,s.cx,s.cy,i),o.createElement(_a,{label:s.label}),s.children)))};function Lt(e){var t=je(e,Aa);return o.createElement(o.Fragment,null,o.createElement(Tr,{domain:t.domain,id:t.radiusAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDataOverflow:t.allowDataOverflow,reversed:t.reversed,includeHidden:t.includeHidden,allowDecimals:t.allowDecimals,ticks:t.ticks,tickCount:t.tickCount,tick:t.tick}),o.createElement(Gr,t))}Lt.displayName="PolarRadiusAxis";var zr=["children"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ee.apply(null,arguments)}function vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vt(Object(a),!0).forEach(function(r){qr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qr(e,t,a){return(t=Wr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Wr(e){var t=Vr(e,"string");return typeof t=="symbol"?t:t+""}function Vr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ur(e,t){if(e==null)return{};var a,r,i=Zr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Zr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var pt=1e-5,Hr=Math.cos(ye(45)),Jr="angleAxis";function Xr(e){var t=kt(),a=o.useMemo(()=>{var{children:s}=e,c=Ur(e,zr);return c},[e]),r=K(s=>Te(s,a.id)),i=a===r;return o.useEffect(()=>(t(ka(a)),()=>{t(Oa(a))}),[t,a]),i?e.children:null}var Yr=(e,t)=>{var{cx:a,cy:r,radius:i,orientation:s,tickSize:c}=t,d=c||8,v=z(a,r,i,e.coordinate),g=z(a,r,i+(s==="inner"?-1:1)*d,e.coordinate);return{x1:v.x,y1:v.y,x2:g.x,y2:g.y}},Qr=(e,t)=>{var a=Math.cos(ye(-e.coordinate));return a>pt?t==="outer"?"start":"end":a<-pt?t==="outer"?"end":"start":"middle"},ei=e=>{var t=Math.cos(ye(-e.coordinate)),a=Math.sin(ye(-e.coordinate));return Math.abs(t)<=Hr?a>0?"start":"end":"middle"},ti=e=>{var{cx:t,cy:a,radius:r,axisLineType:i,axisLine:s,ticks:c}=e;if(!s)return null;var d=V(V({},G(e)),{},{fill:"none"},G(s));if(i==="circle")return o.createElement(Sa,ee({className:"recharts-polar-angle-axis-line"},d,{cx:t,cy:a,r}));var v=c.map(g=>z(t,a,r,g.coordinate));return o.createElement(It,ee({className:"recharts-polar-angle-axis-line"},d,{points:v}))},ai=e=>{var{tick:t,tickProps:a,value:r}=e;return t?o.isValidElement(t)?o.cloneElement(t,a):typeof t=="function"?t(a):o.createElement(Rt,ee({},a,{className:"recharts-polar-angle-axis-tick-value"}),r):null},ri=e=>{var{tick:t,tickLine:a,tickFormatter:r,stroke:i,ticks:s}=e,c=G(e),d=Ot(t),v=V(V({},c),{},{fill:"none"},G(a)),g=s.map((b,y)=>{var P=Yr(b,e),N=Qr(b,e.orientation),C=ei(b),j=V(V(V({},c),{},{textAnchor:N,verticalAnchor:C,stroke:"none",fill:i},d),{},{index:y,payload:b,x:P.x2,y:P.y2});return o.createElement(X,ee({className:Y("recharts-polar-angle-axis-tick",St(t)),key:"tick-".concat(b.coordinate)},Et(e,b,y)),a&&o.createElement("line",ee({className:"recharts-polar-angle-axis-tick-line"},v,P)),o.createElement(ai,{tick:t,tickProps:j,value:r?r(b.value,y):b.value}))});return o.createElement(X,{className:"recharts-polar-angle-axis-ticks"},g)},ii=e=>{var{angleAxisId:t}=e,a=K(Pe),r=K(d=>se(d,"angleAxis",t)),i=Dt(),s=K(d=>ne(d,"angleAxis",t,i));if(a==null||!s||!s.length||r==null)return null;var c=V(V(V({},e),{},{scale:r},a),{},{radius:a.outerRadius,ticks:s});return o.createElement(be,{zIndex:c.zIndex},o.createElement(X,{className:Y("recharts-polar-angle-axis",Jr,c.className)},o.createElement(ti,c),o.createElement(ri,c)))};function Bt(e){var t=je(e,Ea);return o.createElement(Xr,{id:t.angleAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:t.reversed,includeHidden:!1,allowDecimals:t.allowDecimals,tickCount:t.tickCount,ticks:t.ticks,tick:t.tick,domain:t.domain},o.createElement(ii,t))}Bt.displayName="PolarAngleAxis";function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gt(Object(a),!0).forEach(function(r){si(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function si(e,t,a){return(t=ni(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ni(e){var t=oi(e,"string");return typeof t=="symbol"?t:t+""}function oi(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $t=(e,t)=>se(e,"radiusAxis",t),li=B([$t],e=>{if(e!=null)return{scale:e}}),ci=B([jt,$t],(e,t)=>{if(!(e==null||t==null))return he(he({},e),{},{scale:t})}),di=(e,t,a,r)=>ne(e,"radiusAxis",t,r),Ft=(e,t,a)=>Te(e,a),Kt=(e,t,a)=>se(e,"angleAxis",a),ui=B([Ft,Kt],(e,t)=>{if(!(e==null||t==null))return he(he({},e),{},{scale:t})}),mi=(e,t,a,r)=>ne(e,"angleAxis",a,r),fi=B([Ft,Kt,Pe],(e,t,a)=>{if(!(a==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:a.cx,cy:a.cy}}),vi=(e,t,a,r,i)=>i,pi=B([xe,ci,di,ui,mi],(e,t,a,r,i)=>Da(e,"radiusAxis")?Ze(t,a,!1):Ze(r,i,!1)),gi=B([Ya,vi],(e,t)=>{if(e!=null){var a=e.find(r=>r.type==="radar"&&t===r.id);return a?.dataKey}}),yi=B([li,fi,Ra,gi,pi],(e,t,a,r,i)=>{var{chartData:s,dataStartIndex:c,dataEndIndex:d}=a;if(!(e==null||t==null||s==null||i==null||r==null)){var v=s.slice(c,d+1);return Oi({radiusAxis:e,angleAxis:t,displayedData:v,dataKey:r,bandSize:i})}}),hi=["id"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ve.apply(null,arguments)}function yt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yt(Object(a),!0).forEach(function(r){xi(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function xi(e,t,a){return(t=bi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bi(e){var t=Pi(e,"string");return typeof t=="symbol"?t:t+""}function Pi(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ji(e,t){if(e==null)return{};var a,r,i=Ai(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ai(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Be(e,t){return e&&e!=="none"?e:t}var wi=e=>{var{dataKey:t,name:a,stroke:r,fill:i,legendType:s,hide:c}=e;return[{inactive:c,dataKey:t,type:s,color:Be(r,i),value:Nt(a,t),payload:e}]};function _i(e){var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:s,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,nameKey:void 0,dataKey:t,name:Nt(s,t),hide:c,type:d,color:Be(a,i),unit:""}}}function ki(e){var{points:t,props:a}=e,{dot:r,dataKey:i}=a,{id:s}=a,c=ji(a,hi),d=G(c);return o.createElement(za,{points:t,dot:r,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:i,baseProps:d})}function Oi(e){var{radiusAxis:t,angleAxis:a,displayedData:r,dataKey:i,bandSize:s}=e,{cx:c,cy:d}=a,v=!1,g=[],b=a.type!=="number"?s??0:0;r.forEach((P,N)=>{var C=He(P,a.dataKey,N),j=He(P,i),q=a.scale(C)+b,T=Array.isArray(j)?Ba(j):j,W=Je(T)?0:t.scale(T);Array.isArray(j)&&j.length>=2&&(v=!0),g.push(M(M({},z(c,d,W,q)),{},{name:C,value:j,cx:c,cy:d,radius:W,angle:q,payload:P}))});var y=[];return v&&g.forEach(P=>{if(Array.isArray(P.value)){var N=P.value[0],C=Je(N)?0:t.scale(N);y.push(M(M({},P),{},{radius:C},z(c,d,C,P.angle)))}else y.push(P)}),{points:g,isRange:v,baseLinePoints:y}}function Ei(e){var{showLabels:t,points:a,children:r}=e,i=a.map(s=>{var c,d={x:s.x,y:s.y,width:0,lowerWidth:0,upperWidth:0,height:0};return M(M({},d),{},{value:(c=s.value)!==null&&c!==void 0?c:"",payload:s.payload,parentViewBox:void 0,viewBox:d,fill:void 0})});return o.createElement(Ga,{value:t?i:void 0},r)}function Si(e){var{points:t,baseLinePoints:a,props:r}=e;if(t==null)return null;var{shape:i,isRange:s,connectNulls:c}=r,d=b=>{var{onMouseEnter:y}=r;y&&y(r,b)},v=b=>{var{onMouseLeave:y}=r;y&&y(r,b)},g;return o.isValidElement(i)?g=o.cloneElement(i,M(M({},r),{},{points:t})):typeof i=="function"?g=i(M(M({},r),{},{points:t})):g=o.createElement(It,ve({},de(r),{onMouseEnter:d,onMouseLeave:v,points:t,baseLinePoints:s?a:void 0,connectNulls:c})),o.createElement(X,{className:"recharts-radar-polygon"},g,o.createElement(ki,{props:r,points:t}))}var ht=(e,t,a)=>(r,i)=>{var s=e&&e[Math.floor(i*t)];return s?M(M({},r),{},{x:ge(s.x,r.x,a),y:ge(s.y,r.y,a)}):M(M({},r),{},{x:ge(r.cx,r.x,a),y:ge(r.cy,r.y,a)})};function Ri(e){var{props:t,previousPointsRef:a,previousBaseLinePointsRef:r}=e,{points:i,baseLinePoints:s,isAnimationActive:c,animationBegin:d,animationDuration:v,animationEasing:g,onAnimationEnd:b,onAnimationStart:y}=t,P=a.current,N=r.current,C=P?P.length/i.length:1,j=N?N.length/s.length:1,q=$a(t,"recharts-radar-"),[T,W]=o.useState(!1),Q=!T,te=o.useCallback(()=>{typeof b=="function"&&b(),W(!1)},[b]),O=o.useCallback(()=>{typeof y=="function"&&y(),W(!0)},[y]);return o.createElement(Ei,{showLabels:Q,points:i},o.createElement(Fa,{animationId:q,begin:d,duration:v,isActive:c,easing:g,key:"radar-".concat(q),onAnimationEnd:te,onAnimationStart:O},Z=>{var J=Z===1?i:i.map(ht(P,C,Z)),H=Z===1?s:s?.map(ht(N,j,Z));return Z>0&&(a.current=J,r.current=H),o.createElement(Si,{points:J,baseLinePoints:H,props:t})}),o.createElement(Ka,{label:t.label}),t.children)}function Di(e){var t=o.useRef(void 0),a=o.useRef(void 0);return o.createElement(Ri,{props:e,previousPointsRef:t,previousBaseLinePointsRef:a})}var Ni={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ma.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",zIndex:At.area};function Ii(e){var{hide:t,className:a,points:r}=e;if(t)return null;var i=Y("recharts-radar",a);return o.createElement(be,{zIndex:e.zIndex},o.createElement(X,{className:i},o.createElement(Di,e)),o.createElement(La,{points:r,mainColor:Be(e.stroke,e.fill),itemDataKey:e.dataKey,activeDot:e.activeDot}))}function Ci(e){var t=Dt(),a=K(r=>yi(r,e.radiusAxisId,e.angleAxisId,t,e.id));return a?.points==null?null:o.createElement(Ii,ve({},e,{points:a?.points,baseLinePoints:a?.baseLinePoints,isRange:a?.isRange}))}function Gt(e){var t=je(e,Ni);return o.createElement(Na,{id:t.id,type:"radar"},a=>o.createElement(o.Fragment,null,o.createElement(Ia,{type:"radar",id:a,data:void 0,dataKey:t.dataKey,hide:t.hide,angleAxisId:t.angleAxisId,radiusAxisId:t.radiusAxisId}),o.createElement(Ca,{legendPayload:wi(t)}),o.createElement(Ta,{fn:_i,args:t}),o.createElement(Ci,ve({},t,{id:a}))))}Gt.displayName="Radar";var Ti=["axis"],Mi={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Li=o.forwardRef((e,t)=>{var a=je(e,Mi);return o.createElement(Qa,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ti,tooltipPayloadSearcher:qa,categoricalChartProps:a,ref:t})});const Ms=()=>{const{user:e}=ea(),t=ta(),{toast:a}=oa(),[r,i]=o.useState(!0),[s,c]=o.useState(!0),[d,v]=o.useState(!1),[g,b]=o.useState(null),[y,P]=o.useState(0),[N,C]=o.useState(!0),[j,q]=o.useState({avgGrade:0,totalActivities:0,completedActivities:0,ranking:null}),[T,W]=o.useState([]),[Q,te]=o.useState([]),[O,Z]=o.useState([]),[J,H]=o.useState([]),[E,ae]=o.useState("all"),[w,oe]=o.useState("all"),[Ae,zt]=o.useState([]);o.useEffect(()=>{e?.id&&(qt(),we())},[e]);const we=async()=>{try{C(!0);const l=new Date;l.setHours(0,0,0,0);const{data:u,error:f}=await S.from("ai_recommendations_usage").select("id").eq("student_id",e.id).gte("created_at",l.toISOString());f?($.error("[AI Usage] Erro ao buscar contador:",f),P(0)):P(u?.length||0)}catch(l){$.error("[AI Usage] Erro ao buscar contador:",l),P(0)}finally{C(!1)}},qt=async()=>{try{i(!0),await Promise.all([Vt(),Ut(),Zt(),Ht(),Jt(),Wt()])}catch(l){$.error("Erro ao carregar dados de desempenho:",l)}finally{i(!1),s&&c(!1)}},Wt=async()=>{try{const{data:l}=await S.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student"),u=l?.map(p=>p.class_id)||[],{data:f}=await S.from("classes").select("id, name, subject").in("id",u);zt(f||[])}catch(l){$.error("Erro ao carregar turmas:",l)}},Vt=async()=>{try{const{data:l}=await S.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student");let u=l?.map(k=>k.class_id)||[];if(E!=="all"&&(u=u.filter(k=>k===E)),u.length===0){q({avgGrade:0,totalActivities:0,completedActivities:0,ranking:null});return}const{data:f}=await S.from("activity_class_assignments").select("activity_id").in("class_id",u),p=f?.map(k=>k.activity_id)||[],x=p.length;let m=S.from("submissions").select("activity_id, status, grade, submitted_at").eq("student_id",e.id).in("activity_id",p);if(w!=="all"){const k=new Date;let A=new Date;w==="week"?A.setDate(k.getDate()-7):w==="month"?A.setMonth(k.getMonth()-1):w==="semester"&&A.setMonth(k.getMonth()-6),m=m.gte("submitted_at",A.toISOString())}const{data:R}=await m,h=R?.length||0,I=R?.filter(k=>k.grade!==null)||[],_=I.length>0?I.reduce((k,A)=>k+parseFloat(A.grade),0)/I.length:0;q({avgGrade:_,totalActivities:x,completedActivities:h,ranking:null})}catch(l){$.error("Erro ao carregar stats:",l)}},Ut=async()=>{try{const{data:l}=await S.from("submissions").select("id, grade, feedback, submitted_at, status, activity_id").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!1}).limit(10),u=l?.map(A=>A.activity_id)||[],{data:f}=await S.from("activities").select("id, title, max_score").in("id",u),p={};f?.forEach(A=>{p[A.id]=A});const{data:x}=await S.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),m=x?.map(A=>A.class_id).filter(Boolean)||[],{data:R}=await S.from("classes").select("id, name").in("id",m),h={};R?.forEach(A=>{h[A.id]=A});const I={},_={};x?.forEach(A=>{I[A.activity_id]=h[A.class_id]?.name,_[A.activity_id]=A.class_id});const k=(l||[]).map(A=>({...A,activity_title:p[A.activity_id]?.title,max_score:p[A.activity_id]?.max_score,class_name:I[A.activity_id],class_id:_[A.activity_id]}));W(k)}catch(l){$.error("Erro ao carregar notas recentes:",l)}},Zt=async()=>{try{const{data:l}=await S.from("submissions").select("grade, submitted_at, activity_id, activity:activities(max_score)").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!0}).limit(20),u=l?.map(m=>m.activity_id)||[],{data:f}=await S.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),p={};f?.forEach(m=>{p[m.activity_id]=m.class_id});const x=(l||[]).map(m=>({date:tt(new Date(m.submitted_at),"dd/MM",{locale:at}),fullDate:m.submitted_at,nota:parseFloat(m.grade)||0,maxScore:m.activity?.max_score||10,activity_id:m.activity_id,class_id:p[m.activity_id]}));te(x)}catch(l){$.error("Erro ao carregar evoluÃ§Ã£o:",l)}},Ht=async()=>{try{const{data:l}=await S.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student"),u=l?.map(m=>m.class_id)||[],{data:f}=await S.from("classes").select("id, name, subject").in("id",u),p={};f?.forEach(m=>{p[m.id]=m});const x=await Promise.all((l||[]).map(async m=>{const{data:R}=await S.from("activity_class_assignments").select("activity_id").eq("class_id",m.class_id),h=R?.map(L=>L.activity_id)||[],{data:I}=await S.from("submissions").select("id, grade, submitted_at, activity_id").eq("student_id",e.id).in("activity_id",h).not("grade","is",null).order("submitted_at",{ascending:!0}),_=I?.map(L=>L.activity_id)||[],{data:k}=await S.from("activities").select("id, title, max_score").in("id",_),A={};k?.forEach(L=>{A[L.id]=L});const D=I?.map(L=>parseFloat(L.grade))||[],le=D.length>0?D.reduce((L,Qt)=>L+Qt,0)/D.length:0,Yt=(I||[]).map(L=>({date:tt(new Date(L.submitted_at),"dd/MM",{locale:at}),grade:parseFloat(L.grade)}));return{name:p[m.class_id]?.name||"Turma",media:le,history:Yt}}));Z(x.sort((m,R)=>R.media-m.media))}catch(l){$.error("Erro ao carregar desempenho por turma:",l)}},Jt=async()=>{try{const{data:l}=await S.from("submissions").select(`
          grade,
          submitted_at,
          activity_id,
          activity:activities(type, max_score)
        `).eq("student_id",e.id).not("grade","is",null),u=l?.map(m=>m.activity_id)||[],{data:f}=await S.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),p={};f?.forEach(m=>{p[m.activity_id]=m.class_id});const x=(l||[]).map(m=>({grade:parseFloat(m.grade),maxScore:parseFloat(m.activity?.max_score),type:m.activity?.type,submitted_at:m.submitted_at,class_id:p[m.activity_id]}));H(x)}catch(l){$.error("Erro ao carregar radar de habilidades:",l)}},Xt=async()=>{const l=`ai_recommendations_${e.id}`;try{v(!0);const u=localStorage.getItem(l);if(u){const{recommendations:h,timestamp:I}=JSON.parse(u),_=Date.now()-I,k=1800*1e3;if(_<k){b(h),v(!1),a({title:"âœ… RecomendaÃ§Ãµes carregadas",description:"Usando anÃ¡lise recente do cache"});return}}const f={avgGrade:j.avgGrade,totalActivities:j.totalActivities,completedActivities:j.completedActivities,recentGrades:T.slice(0,5).map(h=>({activityTitle:h.activity_title,grade:h.submission?.grade,maxScore:h.max_score,submittedAt:h.submission?.submitted_at})),classPerformance:O.map(h=>({className:h.name,averageGrade:h.media,totalActivities:h.totalActivities||0})),radarData:J};a({title:"ðŸ¤– Gerando recomendaÃ§Ãµes...",description:"Aguarde enquanto a IA analisa seu desempenho"});const{data:p}=await S.auth.getSession(),x=p?.session?.access_token,m=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/ai-study-recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({studentId:e.id,performanceData:f})});let R;if(m.ok){const h=await m.json();if(h.limitReached){$.warn("[AI] Limite diÃ¡rio atingido:",h),v(!1),await we(),a({title:"â° Limite DiÃ¡rio Atingido",description:h.message||"VocÃª jÃ¡ gerou 3 recomendaÃ§Ãµes hoje. Tente novamente amanhÃ£!",variant:"destructive",duration:5e3});return}if(await we(),h.success&&h.recommendations&&Array.isArray(h.recommendations))R={strengths:h.recommendations.filter(_=>_.priority==="low"||_.priority==="medium").map(_=>_.description),improvements:h.recommendations.filter(_=>_.priority==="high").map(_=>_.description),tips:h.recommendations.map(_=>`ðŸŽ¯ ${_.title}: ${_.reason}`).slice(0,3)};else throw new Error("Resposta da IA sem recomendaÃ§Ãµes vÃ¡lidas")}else{$.warn("[AI] Usando fallback local - Edge Function falhou"),a({title:"â„¹ï¸ Usando anÃ¡lise local",description:"API de IA indisponÃ­vel. Gerando recomendaÃ§Ãµes com base nos seus dados.",duration:3e3});const h=O.filter(D=>D.media<7).sort((D,le)=>D.media-le.media),I=O.filter(D=>D.media>=8).sort((D,le)=>le.media-D.media),_=[];h.length>0?h.slice(0,2).forEach(D=>{_.push(`Revisar conceitos de ${D.name} onde as notas foram menores (mÃ©dia: ${D.media.toFixed(1)})`)}):_.push("Manter o ritmo de estudos atual"),T.some(D=>D.status==="draft")&&_.push("Completar atividades pendentes antes do prazo"),_.push("Participar mais das discussÃµes em sala");const k=[];j.avgGrade>=8?k.push("Ã“timo desempenho geral nas atividades"):j.avgGrade>=7?k.push("Bom desempenho nas atividades"):k.push("Mostrando esforÃ§o e dedicaÃ§Ã£o"),I.length>0&&I.slice(0,2).forEach(D=>{k.push(`Excelente em ${D.name} (mÃ©dia: ${D.media.toFixed(1)})`)}),(j.totalActivities>0?j.completedActivities/j.totalActivities*100:0)>=80&&k.push("ConsistÃªncia nas entregas dentro do prazo"),R={strengths:k,improvements:_,tips:["ðŸ“š Reserve 30min diÃ¡rios para revisÃ£o","âœï¸ Pratique mais questÃµes abertas","ðŸŽ¯ EstabeleÃ§a metas semanais de estudo","ðŸ‘¥ Forme grupos de estudo com colegas","â“ Tire dÃºvidas com professores"].slice(0,3)}}b(R),localStorage.setItem(l,JSON.stringify({recommendations:R,timestamp:Date.now()})),a({title:"âœ… RecomendaÃ§Ãµes geradas!",description:"Confira as sugestÃµes personalizadas abaixo"})}catch(u){$.error("Erro ao gerar recomendaÃ§Ãµes:",u),a({title:"âŒ Erro ao gerar recomendaÃ§Ãµes",description:"Tente novamente mais tarde",variant:"destructive"})}finally{v(!1)}};o.useMemo(()=>{if(!T.length)return j;let l=[...T];if(E!=="all"&&(l=l.filter(p=>p.class_id===E)),w!=="all"){const p=new Date;let x=new Date;w==="week"?x.setDate(p.getDate()-7):w==="month"?x.setMonth(p.getMonth()-1):w==="semester"&&x.setMonth(p.getMonth()-6),l=l.filter(m=>m.submitted_at&&new Date(m.submitted_at)>=x)}const u=l.filter(p=>p.grade!==null),f=u.length>0?u.reduce((p,x)=>p+parseFloat(x.grade),0)/u.length:0;return{...j,avgGrade:f,completedActivities:l.length}},[j,T,E,w]);const $e=o.useMemo(()=>{let l=[...Q];if(E!=="all"&&(l=l.filter(u=>u.class_id===E)),w!=="all"){const u=new Date;let f=new Date;w==="week"?f.setDate(u.getDate()-7):w==="month"?f.setMonth(u.getMonth()-1):w==="semester"&&f.setMonth(u.getMonth()-6),l=l.filter(p=>{if(!p.fullDate)return!1;const x=new Date(p.fullDate);return x>=f&&x<=u})}return l},[Q,E,w]),_e=o.useMemo(()=>{let l=[...O];return E!=="all"&&(l=l.filter(u=>{const f=Ae.find(p=>p.id===E);return f&&u.name===f.name})),w!=="all"&&(l=l.map(u=>{const f=new Date;let p=new Date;w==="week"?p.setDate(f.getDate()-7):w==="month"?p.setMonth(f.getMonth()-1):w==="semester"&&p.setMonth(f.getMonth()-6);const x=(u.history||[]).filter(h=>!0),m=x.map(h=>h.grade),R=m.length>0?m.reduce((h,I)=>h+I,0)/m.length:0;return{...u,media:R,history:x}})),l.sort((u,f)=>f.media-u.media)},[O,E,w,Ae]),Fe=o.useMemo(()=>{let l=[...J];if(E!=="all"&&(l=l.filter(f=>f.class_id===E)),w!=="all"){const f=new Date;let p=new Date;w==="week"?p.setDate(f.getDate()-7):w==="month"?p.setMonth(f.getMonth()-1):w==="semester"&&p.setMonth(f.getMonth()-6),l=l.filter(x=>{if(!x.submitted_at)return!1;const m=new Date(x.submitted_at);return m>=p&&m<=f})}const u=[{skill:"Objetivas",value:0,count:0},{skill:"Abertas",value:0,count:0},{skill:"Mistas",value:0,count:0}];return l.forEach(f=>{const p=f.grade,x=f.maxScore,m=f.type;if(!p||!x||x===0)return;const R=p/x*100;m==="objective"?(u[0].value+=R,u[0].count++):m==="open"?(u[1].value+=R,u[1].count++):m==="mixed"&&(u[2].value+=R,u[2].count++)}),u.map(f=>({skill:f.skill,value:f.count>0?Math.round(f.value/f.count):0}))},[J,E,w]);return r&&s?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(aa,{size:"lg"})}):n.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:[n.jsx(We.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:n.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-3",children:[n.jsx(ke,{className:"w-8 h-8 text-yellow-600"}),"Meu Desempenho"]}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Acompanhe suas notas e evoluÃ§Ã£o acadÃªmica"})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx(ia,{onClick:Xt,disabled:d||j.totalActivities===0||y>=3,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:d?n.jsxs(n.Fragment,{children:[n.jsx(ra,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):y>=3?n.jsxs(n.Fragment,{children:[n.jsx(la,{className:"w-4 h-4 mr-2"}),"Limite DiÃ¡rio Atingido"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Gerar RecomendaÃ§Ãµes com IA"]})}),!N&&n.jsxs("span",{className:`text-sm ${y>=3?"text-red-600 dark:text-red-400 font-semibold":y>=2?"text-orange-600 dark:text-orange-400 font-medium":"text-slate-500 dark:text-slate-400"}`,children:[y,"/3 utilizadas hoje"]})]})]})}),g&&n.jsx(We.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:n.jsxs(ce,{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20 border-2 border-purple-200 dark:border-purple-800",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[n.jsx(Ve,{className:"w-6 h-6 text-purple-600"}),"RecomendaÃ§Ãµes Personalizadas da IA"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-green-700 dark:text-green-400 mb-3 flex items-center gap-2",children:[n.jsx(ca,{className:"w-5 h-5"}),"Seus Pontos Fortes"]}),n.jsx("ul",{className:"space-y-2",children:g.strengths?.map((l,u)=>n.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-green-200 dark:border-green-800",children:["â€¢ ",l]},u))||n.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-orange-700 dark:text-orange-400 mb-3 flex items-center gap-2",children:[n.jsx(Ue,{className:"w-5 h-5"}),"Ãreas para Melhorar"]}),n.jsx("ul",{className:"space-y-2",children:g.improvements?.map((l,u)=>n.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:["â€¢ ",l]},u))||n.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[n.jsx(da,{className:"w-5 h-5"}),"Dicas de Estudo"]}),n.jsx("ul",{className:"space-y-2",children:g.tips?.map((l,u)=>n.jsx("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:l},u))||n.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]})]})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[n.jsxs(Ke,{value:E,onValueChange:ae,children:[n.jsx(Ge,{className:"w-full md:w-64",children:n.jsx(ze,{placeholder:"Todas as turmas"})}),n.jsxs(qe,{children:[n.jsx(re,{value:"all",children:"Todas as turmas"}),Ae.map(l=>n.jsx(re,{value:l.id,children:l.name},l.id))]})]}),n.jsxs(Ke,{value:w,onValueChange:oe,children:[n.jsx(Ge,{className:"w-full md:w-64",children:n.jsx(ze,{placeholder:"Todo o perÃ­odo"})}),n.jsxs(qe,{children:[n.jsx(re,{value:"all",children:"Todo o perÃ­odo"}),n.jsx(re,{value:"week",children:"Ãšltima semana"}),n.jsx(re,{value:"month",children:"Ãšltimo mÃªs"}),n.jsx(re,{value:"semester",children:"Ãšltimo semestre"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[n.jsx(pe,{icon:ke,value:j.avgGrade>0?j.avgGrade.toFixed(1):"--",label:"MÃ©dia Geral",gradient:"yellow"}),n.jsx(pe,{icon:Ue,value:j.completedActivities,label:"Atividades ConcluÃ­das",gradient:"green"}),n.jsx(pe,{icon:ua,value:j.totalActivities,label:"Total de Atividades",gradient:"blue"}),n.jsx(pe,{icon:ma,value:j.ranking||"--",label:"PosiÃ§Ã£o no Ranking",gradient:"purple"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8 mb-6 md:mb-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4 md:space-y-6 lg:space-y-8",children:[$e.length>0&&n.jsxs(ce,{className:"p-4 sm:p-6",children:[n.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-4 sm:mb-6 flex items-center gap-2",children:[n.jsx(fa,{className:"w-6 h-6 text-green-600"}),"EvoluÃ§Ã£o das Notas"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Oe,{width:"100%",height:300,className:"min-w-[400px]",children:n.jsxs(Wa,{data:$e,margin:{top:5,right:20,left:0,bottom:5},children:[n.jsx(Xe,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),n.jsx(Ye,{dataKey:"date",stroke:"#64748b",tick:{fontSize:12}}),n.jsx(Qe,{stroke:"#64748b",domain:[0,"auto"],tick:{fontSize:12}}),n.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),n.jsx(Va,{type:"monotone",dataKey:"nota",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:6},name:"Nota"})]})})})]}),n.jsxs(ce,{className:"p-4 sm:p-6",children:[n.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-4 sm:mb-6",children:"Ãšltimas Notas"}),T.length>0?n.jsx("div",{className:"space-y-4",children:T.map((l,u)=>n.jsx(na,{grade:l,onViewDetails:()=>t(`/students/activities/${l.activity_id}`),index:u},l.id))}):n.jsx(sa,{icon:ke,title:"Nenhuma nota ainda",description:"Complete suas atividades para ver suas notas aqui.",variant:"default"})]})]}),n.jsxs("div",{className:"space-y-4 md:space-y-6 lg:space-y-8",children:[_e.length>0&&n.jsxs(ce,{className:"p-4 sm:p-6",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white mb-4 sm:mb-6",children:"Por Turma"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Oe,{width:"100%",height:Math.max(150,_e.length*50),className:"min-w-[300px]",children:n.jsxs(Ua,{data:_e,layout:"vertical",margin:{left:20,right:20,top:10,bottom:10},children:[n.jsx(Xe,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),n.jsx(Ye,{type:"number",stroke:"#64748b",domain:[0,10]}),n.jsx(Qe,{type:"category",dataKey:"name",stroke:"#64748b",width:120,tick:{fontSize:12}}),n.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),n.jsx(Za,{dataKey:"media",fill:"#3b82f6",radius:[0,8,8,0],name:"MÃ©dia"})]})})})]}),Fe.length>0&&n.jsxs(ce,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Por Tipo"}),n.jsx(Oe,{width:"100%",height:220,children:n.jsxs(Li,{data:Fe,margin:{top:10,right:10,bottom:10,left:10},children:[n.jsx(Tt,{stroke:"#e2e8f0"}),n.jsx(Bt,{dataKey:"skill",stroke:"#64748b",tick:{fontSize:12}}),n.jsx(Lt,{stroke:"#64748b",domain:[0,100]}),n.jsx(Gt,{name:"Desempenho",dataKey:"value",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6})]})})]})]})]})]})};export{Ms as default};
