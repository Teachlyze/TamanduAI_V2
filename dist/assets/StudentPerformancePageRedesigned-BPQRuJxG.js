import{d as X,r as n,q as Pt,a as ta,u as aa,s as R,l as B,j as o,p as ra,b as ia}from"./main-CulyknMy.js";import{S as pe}from"./StatCard-Bu9WxInr.js";import{C as ce}from"./card-0IW715z3.js";import{m as Ke,B as sa}from"./button-Dfu2yMjN.js";import{E as na}from"./EmptyState-8OOiKc2J.js";import{G as oa}from"./GradeCard-n2h6fxPd.js";import"./dialog-DJOLU-fT.js";import{S as We,a as ze,b as Ve,c as Ue,d as ae}from"./select-CduS4jtJ.js";import{u as la}from"./use-toast-D1WbEInh.js";import{S as _e}from"./star-2q-PLwty.js";import{C as ca}from"./circle-alert-BQfU-oMD.js";import{S as He}from"./sparkles-EMb6P2Jd.js";import{C as da}from"./circle-check-big-DJiUTNpU.js";import{T as Ze}from"./target-CEFBOSa_.js";import{L as ua}from"./lightbulb-CD-FtZq0.js";import{B as ma}from"./book-open-L6K6GApD.js";import{T as pa}from"./trophy-DhPgpLZs.js";import{T as fa}from"./trending-up-CxVfDkV5.js";import{a0 as de,l as L,aH as jt,b0 as va,aq as he,b1 as At,aF as Ie,b2 as ga,b3 as wt,b4 as Te,b5 as ha,b6 as ya,b7 as xa,b8 as ba,b9 as Pa,u as q,ba as ye,q as G,C as K,bb as kt,bc as _t,g as Ot,bd as ja,be as Aa,L as Z,bf as wa,bg as ka,M as Et,a as St,bh as Rt,T as Dt,bi as _a,bj as Oa,bk as Ea,a9 as Nt,bl as Ct,bm as ve,bn as Sa,p as Ra,bo as Da,as as Je,R as Na,t as Ca,w as Ia,x as Ta,n as It,bp as Ma,m as Xe,bq as La,a8 as Ye,y as Ba,J as $a,H as Fa,ak as qa,A as fe,br as Ga,G as Ka,r as Wa,O as za,Q as Oe,V as Va,W as Qe,X as et,Y as tt,U as at,Z as Ua}from"./LineChart-Cbv7uDxU.js";import{B as Ha,d as Za}from"./BarChart-DJHaEqv7.js";import{a as Ja,b as Xa,c as Ya,s as Qa,P as er}from"./PolarChart-DF6jVe8N.js";import{f as rt}from"./format-BcFT9btV.js";import{p as it}from"./pt-BR-CuGSKEGQ.js";import"./badge-hAm5RhEJ.js";import"./calendar-CAuJuRcm.js";import"./message-square-DFDVHCXS.js";import"./SidebarPremium-D7ISy0In.js";import"./index-Bqe-gmK6.js";import"./house-DSNk2C5T.js";import"./users-CLb1Ind1.js";import"./file-text-76dwq0ip.js";import"./graduation-cap-DGMUxzM9.js";import"./chart-column-Bg7XzELY.js";import"./message-circle-8Z2L2EEy.js";import"./settings-Bqthy2dX.js";import"./index-BZWQ4euU.js";import"./chevron-right-f5dsdMUG.js";import"./x-C2dkvfPv.js";import"./index-qba7jVBc.js";import"./index-CtoMVlCU.js";import"./index-CKE1C3tK.js";import"./index-B7F4_iBu.js";import"./chevron-down-CSOkIGzc.js";import"./check-Ds-bvwXg.js";import"./chevron-up-D2dp2R44.js";import"./index-B-DTjqCv.js";import"./en-US-B6HbAA6N.js";var tr=["points","className","baseLinePoints","connectNulls"];function re(){return re=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},re.apply(null,arguments)}function ar(e,a){if(e==null)return{};var t,r,i=rr(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function rr(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}var st=e=>e&&e.x===+e.x&&e.y===+e.y,ir=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[[]];return a.forEach(r=>{st(r)?t[t.length-1].push(r):t[t.length-1].length>0&&t.push([])}),st(a[0])&&t[t.length-1].push(a[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},ue=(e,a)=>{var t=ir(e);a&&(t=[t.reduce((i,s)=>[...i,...s],[])]);var r=t.map(i=>i.reduce((s,c,d)=>"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y),"")).join("");return t.length===1?"".concat(r,"Z"):r},sr=(e,a,t)=>{var r=ue(e,t);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(ue(Array.from(a).reverse(),t).slice(1))},Tt=e=>{var{points:a,className:t,baseLinePoints:r,connectNulls:i}=e,s=ar(e,tr);if(!a||!a.length)return null;var c=X("recharts-polygon",t);if(r&&r.length){var d=s.stroke&&s.stroke!=="none",f=sr(a,r,i);return n.createElement("g",{className:c},n.createElement("path",re({},de(s),{fill:f.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:f})),d?n.createElement("path",re({},de(s),{fill:"none",d:ue(a,i)})):null,d?n.createElement("path",re({},de(s),{fill:"none",d:ue(r,i)})):null)}var g=ue(a,i);return n.createElement("path",re({},de(s),{fill:g.slice(-1)==="Z"?s.fill:"none",className:c,d:g}))},Me=(e,a,t)=>{switch(a){case"angleAxis":return Te(e,t);case"radiusAxis":return wt(e,t);default:throw new Error("Unexpected axis type: ".concat(a))}},Le=(e,a,t)=>{switch(a){case"angleAxis":return ya(e,t);case"radiusAxis":return ha(e,t);default:throw new Error("Unexpected axis type: ".concat(a))}},se=L([Me,jt,Ja,Le],va),Mt=L([he,Ya,xa,Ie],ba),ne=L([he,Me,jt,se,Xa,Le,At,Mt,Ie],ga);L([he,Me,se,Le,At,Mt,Ie],Pa);var nr=(e,a)=>ne(e,"angleAxis",a,!1),or=L([nr],e=>{if(e)return e.map(a=>a.coordinate)}),lr=(e,a)=>ne(e,"radiusAxis",a,!1),cr=L([lr],e=>{if(e)return e.map(a=>a.coordinate)}),dr=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function ur(e,a){if(e==null)return{};var t,r,i=mr(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function mr(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},F.apply(null,arguments)}function nt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function xe(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?nt(Object(t),!0).forEach(function(r){pr(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function pr(e,a,t){return(a=fr(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function fr(e){var a=vr(e,"string");return typeof a=="symbol"?a:a+""}function vr(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var gr=(e,a,t,r)=>{var i="";return r.forEach((s,c)=>{var d=K(a,t,e,s);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},hr=e=>{var{cx:a,cy:t,innerRadius:r,outerRadius:i,polarAngles:s,radialLines:c}=e;if(!s||!s.length||!c)return null;var d=xe({stroke:"#ccc"},G(e));return n.createElement("g",{className:"recharts-polar-grid-angle"},s.map(f=>{var g=K(a,t,r,f),h=K(a,t,i,f);return n.createElement("line",F({key:"line-".concat(f)},d,{x1:g.x,y1:g.y,x2:h.x,y2:h.y}))}))},ot=e=>{var{cx:a,cy:t,radius:r}=e,i=xe({stroke:"#ccc",fill:"none"},G(e));return n.createElement("circle",F({},i,{className:X("recharts-polar-grid-concentric-circle",e.className),cx:a,cy:t,r}))},lt=e=>{var{radius:a}=e,t=xe({stroke:"#ccc",fill:"none"},G(e));return n.createElement("path",F({},t,{className:X("recharts-polar-grid-concentric-polygon",e.className),d:gr(a,e.cx,e.cy,e.polarAngles)}))},yr=e=>{var{polarRadius:a,gridType:t}=e;if(!a||!a.length)return null;var r=Math.max(...a),i=e.fill&&e.fill!=="none";return n.createElement("g",{className:"recharts-polar-grid-concentric"},i&&t==="circle"&&n.createElement(ot,F({},e,{radius:r})),i&&t!=="circle"&&n.createElement(lt,F({},e,{radius:r})),a.map((s,c)=>{var d=c;return t==="circle"?n.createElement(ot,F({key:d},e,{fill:"none",radius:s})):n.createElement(lt,F({key:d},e,{fill:"none",radius:s}))}))},Lt=e=>{var a,t,r,i,s,c,d,f,{gridType:g="polygon",radialLines:h=!0,angleAxisId:x=0,radiusAxisId:j=0,cx:b,cy:T,innerRadius:O,outerRadius:V}=e,U=ur(e,dr),E=q(ye),$=xe({cx:(a=(t=E?.cx)!==null&&t!==void 0?t:b)!==null&&a!==void 0?a:0,cy:(r=(i=E?.cy)!==null&&i!==void 0?i:T)!==null&&r!==void 0?r:0,innerRadius:(s=(c=E?.innerRadius)!==null&&c!==void 0?c:O)!==null&&s!==void 0?s:0,outerRadius:(d=(f=E?.outerRadius)!==null&&f!==void 0?f:V)!==null&&d!==void 0?d:0},U),{polarAngles:ee,polarRadius:Y,outerRadius:H}=$,S=q(Q=>or(Q,x)),te=q(Q=>cr(Q,j)),w=Array.isArray(ee)?ee:S,oe=Array.isArray(Y)?Y:te;return H<=0||w==null||oe==null?null:n.createElement("g",{className:"recharts-polar-grid"},n.createElement(yr,F({gridType:g,radialLines:h},$,{polarAngles:w,polarRadius:oe})),n.createElement(hr,F({gridType:g,radialLines:h},$,{polarAngles:w,polarRadius:oe})))};Lt.displayName="PolarGrid";var Ee={},Se={},ct;function xr(){return ct||(ct=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function a(t,r){if(t.length===0)return;let i=t[0],s=r(i);for(let c=1;c<t.length;c++){const d=t[c],f=r(d);f>s&&(s=f,i=d)}return i}e.maxBy=a})(Se)),Se}var dt;function br(){return dt||(dt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const a=xr(),t=_t(),r=kt();function i(s,c){if(s!=null)return a.maxBy(Array.from(s),r.iteratee(c??t.identity))}e.maxBy=i})(Ee)),Ee}var Re,ut;function Pr(){return ut||(ut=1,Re=br().maxBy),Re}var jr=Pr();const Ar=Pt(jr);var De={},Ne={},mt;function wr(){return mt||(mt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function a(t,r){if(t.length===0)return;let i=t[0],s=r(i);for(let c=1;c<t.length;c++){const d=t[c],f=r(d);f<s&&(s=f,i=d)}return i}e.minBy=a})(Ne)),Ne}var pt;function kr(){return pt||(pt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const a=wr(),t=_t(),r=kt();function i(s,c){if(s!=null)return a.minBy(Array.from(s),r.iteratee(c??t.identity))}e.minBy=i})(De)),De}var Ce,ft;function _r(){return ft||(ft=1,Ce=kr().minBy),Ce}var Or=_r();const Er=Pt(Or);var Sr=["cx","cy","angle","axisLine"],Rr=["angle","tickFormatter","stroke","tick"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},me.apply(null,arguments)}function vt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function z(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?vt(Object(t),!0).forEach(function(r){be(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function be(e,a,t){return(a=Dr(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Dr(e){var a=Nr(e,"string");return typeof a=="symbol"?a:a+""}function Nr(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function Bt(e,a){if(e==null)return{};var t,r,i=Cr(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function Cr(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}var $t="radiusAxis";function Ir(e){var a=Ot();return n.useEffect(()=>(a(ja(e)),()=>{a(Aa(e))})),null}var Tr=(e,a,t,r)=>{var{coordinate:i}=e;return K(t,r,i,a)},Mr=e=>{var a;switch(e){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a},Lr=(e,a,t,r)=>{var i=Ar(r,c=>c.coordinate||0),s=Er(r,c=>c.coordinate||0);return{cx:a,cy:t,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:i.coordinate||0,clockWise:!1}},Br=(e,a)=>{var{cx:t,cy:r,angle:i,axisLine:s}=e,c=Bt(e,Sr),d=a.reduce((x,j)=>[Math.min(x[0],j.coordinate),Math.max(x[1],j.coordinate)],[1/0,-1/0]),f=K(t,r,d[0],i),g=K(t,r,d[1],i),h=z(z(z({},G(c)),{},{fill:"none"},G(s)),{},{x1:f.x,y1:f.y,x2:g.x,y2:g.y});return n.createElement("line",me({className:"recharts-polar-radius-axis-line"},h))},$r=(e,a,t)=>{var r;return n.isValidElement(e)?r=n.cloneElement(e,a):typeof e=="function"?r=e(a):r=n.createElement(Dt,me({},a,{className:"recharts-polar-radius-axis-tick-value"}),t),r},Fr=(e,a)=>{var{angle:t,tickFormatter:r,stroke:i,tick:s}=e,c=Bt(e,Rr),d=Mr(e.orientation),f=G(c),g=Et(s),h=a.map((x,j)=>{var b=Tr(x,e.angle,e.cx,e.cy),T=z(z(z(z({textAnchor:d,transform:"rotate(".concat(90-t,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:i},g),{},{index:j},b),{},{payload:x});return n.createElement(Z,me({className:X("recharts-polar-radius-axis-tick",Rt(s)),key:"tick-".concat(x.coordinate)},St(e,x,j)),$r(s,T,r?r(x.value,j):x.value))});return n.createElement(Z,{className:"recharts-polar-radius-axis-ticks"},h)},qr=e=>{var{radiusAxisId:a}=e,t=q(ye),r=q(f=>se(f,"radiusAxis",a)),i=q(f=>ne(f,"radiusAxis",a,!1));if(t==null||!i||!i.length)return null;var s=z(z(z({},e),{},{scale:r},t),{},{radius:t.outerRadius}),{tick:c,axisLine:d}=s;return n.createElement(Z,{className:X("recharts-polar-radius-axis",$t,s.className)},d&&Br(s,i),c&&Fr(s,i),n.createElement(wa,Lr(s.angle,s.cx,s.cy,i),n.createElement(ka,{label:s.label}),s.children))};class Pe extends n.PureComponent{render(){return n.createElement(n.Fragment,null,n.createElement(Ir,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),n.createElement(qr,this.props))}}be(Pe,"displayName","PolarRadiusAxis");be(Pe,"axisType",$t);be(Pe,"defaultProps",_a);var Gr=["children"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},J.apply(null,arguments)}function gt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function W(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?gt(Object(t),!0).forEach(function(r){je(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function je(e,a,t){return(a=Kr(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Kr(e){var a=Wr(e,"string");return typeof a=="symbol"?a:a+""}function Wr(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function zr(e,a){if(e==null)return{};var t,r,i=Vr(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function Vr(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}var ht=1e-5,Ur=Math.cos(ve(45)),Ft="angleAxis";function Hr(e){var a=Ot(),t=n.useMemo(()=>{var{children:s}=e,c=zr(e,Gr);return c},[e]),r=q(s=>Te(s,t.id)),i=t===r;return n.useEffect(()=>(a(Oa(t)),()=>{a(Ea(t))}),[a,t]),i?e.children:null}var Zr=(e,a)=>{var{cx:t,cy:r,radius:i,orientation:s,tickSize:c}=a,d=c||8,f=K(t,r,i,e.coordinate),g=K(t,r,i+(s==="inner"?-1:1)*d,e.coordinate);return{x1:f.x,y1:f.y,x2:g.x,y2:g.y}},Jr=(e,a)=>{var t=Math.cos(ve(-e.coordinate));return t>ht?a==="outer"?"start":"end":t<-ht?a==="outer"?"end":"start":"middle"},Xr=e=>{var a=Math.cos(ve(-e.coordinate)),t=Math.sin(ve(-e.coordinate));return Math.abs(a)<=Ur?t>0?"start":"end":"middle"},Yr=e=>{var{cx:a,cy:t,radius:r,axisLineType:i,axisLine:s,ticks:c}=e;if(!s)return null;var d=W(W({},G(e)),{},{fill:"none"},G(s));if(i==="circle")return n.createElement(Ct,J({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:t,r}));var f=c.map(g=>K(a,t,r,g.coordinate));return n.createElement(Tt,J({className:"recharts-polar-angle-axis-line"},d,{points:f}))},Qr=e=>{var{tick:a,tickProps:t,value:r}=e;return a?n.isValidElement(a)?n.cloneElement(a,t):typeof a=="function"?a(t):n.createElement(Dt,J({},t,{className:"recharts-polar-angle-axis-tick-value"}),r):null},ei=e=>{var{tick:a,tickLine:t,tickFormatter:r,stroke:i,ticks:s}=e,c=G(e),d=Et(a),f=W(W({},c),{},{fill:"none"},G(t)),g=s.map((h,x)=>{var j=Zr(h,e),b=Jr(h,e.orientation),T=Xr(h),O=W(W(W({},c),{},{textAnchor:b,verticalAnchor:T,stroke:"none",fill:i},d),{},{index:x,payload:h,x:j.x2,y:j.y2});return n.createElement(Z,J({className:X("recharts-polar-angle-axis-tick",Rt(a)),key:"tick-".concat(h.coordinate)},St(e,h,x)),t&&n.createElement("line",J({className:"recharts-polar-angle-axis-tick-line"},f,j)),n.createElement(Qr,{tick:a,tickProps:O,value:r?r(h.value,x):h.value}))});return n.createElement(Z,{className:"recharts-polar-angle-axis-ticks"},g)},ti=e=>{var{angleAxisId:a}=e,t=q(ye),r=q(d=>se(d,"angleAxis",a)),i=Nt(),s=q(d=>ne(d,"angleAxis",a,i));if(t==null||!s||!s.length)return null;var c=W(W(W({},e),{},{scale:r},t),{},{radius:t.outerRadius});return n.createElement(Z,{className:X("recharts-polar-angle-axis",Ft,c.className)},n.createElement(Yr,J({},c,{ticks:s})),n.createElement(ei,J({},c,{ticks:s})))};class Ae extends n.PureComponent{render(){return this.props.radius<=0?null:n.createElement(Hr,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},n.createElement(ti,this.props))}}je(Ae,"displayName","PolarAngleAxis");je(Ae,"axisType",Ft);je(Ae,"defaultProps",Sa);function yt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function ge(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?yt(Object(t),!0).forEach(function(r){ai(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ai(e,a,t){return(a=ri(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function ri(e){var a=ii(e,"string");return typeof a=="symbol"?a:a+""}function ii(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var qt=(e,a)=>se(e,"radiusAxis",a),si=L([qt],e=>{if(e!=null)return{scale:e}}),ni=L([wt,qt],(e,a)=>{if(!(e==null||a==null))return ge(ge({},e),{},{scale:a})}),oi=(e,a,t,r)=>ne(e,"radiusAxis",a,r),Gt=(e,a,t)=>Te(e,t),Kt=(e,a,t)=>se(e,"angleAxis",t),li=L([Gt,Kt],(e,a)=>{if(!(e==null||a==null))return ge(ge({},e),{},{scale:a})}),ci=(e,a,t,r)=>ne(e,"angleAxis",t,r),di=L([Gt,Kt,ye],(e,a,t)=>{if(!(t==null||a==null))return{scale:a,type:e.type,dataKey:e.dataKey,cx:t.cx,cy:t.cy}}),ui=(e,a,t,r,i)=>i,mi=L([he,ni,oi,li,ci],(e,a,t,r,i)=>Da(e,"radiusAxis")?Je(a,t,!1):Je(r,i,!1)),pi=L([Qa,ui],(e,a)=>{if(e!=null){var t=e.find(r=>r.type==="radar"&&a===r.id);return t?.dataKey}}),fi=L([si,di,Ra,pi,mi],(e,a,t,r,i)=>{var{chartData:s,dataStartIndex:c,dataEndIndex:d}=t;if(!(e==null||a==null||s==null||i==null||r==null)){var f=s.slice(c,d+1);return Ai({radiusAxis:e,angleAxis:a,displayedData:f,dataKey:r,bandSize:i})}}),vi=["id"];function gi(e,a){if(e==null)return{};var t,r,i=hi(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function hi(e,a){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function xt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function I(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?xt(Object(t),!0).forEach(function(r){Be(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Be(e,a,t){return(a=yi(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function yi(e){var a=xi(e,"string");return typeof a=="symbol"?a:a+""}function xi(e,a){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ie.apply(null,arguments)}function $e(e,a){return e&&e!=="none"?e:a}var bi=e=>{var{dataKey:a,name:t,stroke:r,fill:i,legendType:s,hide:c}=e;return[{inactive:c,dataKey:a,type:s,color:$e(r,i),value:It(t,a),payload:e}]};function Pi(e){var{dataKey:a,stroke:t,strokeWidth:r,fill:i,name:s,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:t,strokeWidth:r,fill:i,nameKey:void 0,dataKey:a,name:It(s,a),hide:c,type:d,color:$e(t,i),unit:""}}}function ji(e,a){var t;return n.isValidElement(e)?t=n.cloneElement(e,a):typeof e=="function"?t=e(a):t=n.createElement(Ct,ie({},a,{className:X("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),t}function Ai(e){var{radiusAxis:a,angleAxis:t,displayedData:r,dataKey:i,bandSize:s}=e,{cx:c,cy:d}=t,f=!1,g=[],h=t.type!=="number"?s??0:0;r.forEach((j,b)=>{var T=Xe(j,t.dataKey,b),O=Xe(j,i),V=t.scale(T)+h,U=Array.isArray(O)?La(O):O,E=Ye(U)?void 0:a.scale(U);Array.isArray(O)&&O.length>=2&&(f=!0),g.push(I(I({},K(c,d,E,V)),{},{name:T,value:O,cx:c,cy:d,radius:E,angle:V,payload:j}))});var x=[];return f&&g.forEach(j=>{if(Array.isArray(j.value)){var b=j.value[0],T=Ye(b)?void 0:a.scale(b);x.push(I(I({},j),{},{radius:T},K(c,d,T,j.angle)))}else x.push(j)}),{points:g,isRange:f,baseLinePoints:x}}function wi(e){var{points:a,props:t}=e,{dot:r,dataKey:i}=t;if(!r)return null;var{id:s}=t,c=gi(t,vi),d=G(c),f=Ga(r),g=a.map((h,x)=>{var j=I(I(I({key:"dot-".concat(x),r:3},d),f),{},{dataKey:i,cx:h.x,cy:h.y,index:x,payload:h});return ji(r,j)});return n.createElement(Z,{className:"recharts-radar-dots"},g)}function ki(e){var{showLabels:a,points:t,children:r}=e,i=t.map(s=>{var c={x:s.x,y:s.y,width:0,height:0};return I(I({},c),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return n.createElement(qa,{value:a?i:null},r)}function _i(e){var{points:a,baseLinePoints:t,props:r}=e;if(a==null)return null;var{shape:i,isRange:s,connectNulls:c}=r,d=h=>{var{onMouseEnter:x}=r;x&&x(r,h)},f=h=>{var{onMouseLeave:x}=r;x&&x(r,h)},g;return n.isValidElement(i)?g=n.cloneElement(i,I(I({},r),{},{points:a})):typeof i=="function"?g=i(I(I({},r),{},{points:a})):g=n.createElement(Tt,ie({},de(r),{onMouseEnter:d,onMouseLeave:f,points:a,baseLinePoints:s?t:void 0,connectNulls:c})),n.createElement(Z,{className:"recharts-radar-polygon"},g,n.createElement(wi,{props:r,points:a}))}var bt=(e,a,t)=>(r,i)=>{var s=e&&e[Math.floor(i*a)];return s?I(I({},r),{},{x:fe(s.x,r.x,t),y:fe(s.y,r.y,t)}):I(I({},r),{},{x:fe(r.cx,r.x,t),y:fe(r.cy,r.y,t)})};function Oi(e){var{props:a,previousPointsRef:t,previousBaseLinePointsRef:r}=e,{points:i,baseLinePoints:s,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:g,onAnimationEnd:h,onAnimationStart:x}=a,j=t.current,b=r.current,T=j&&j.length/i.length,O=b&&b.length/s.length,V=Ba(a,"recharts-radar-"),[U,E]=n.useState(!1),$=!U,ee=n.useCallback(()=>{typeof h=="function"&&h(),E(!1)},[h]),Y=n.useCallback(()=>{typeof x=="function"&&x(),E(!0)},[x]);return n.createElement(ki,{showLabels:$,points:i},n.createElement($a,{animationId:V,begin:d,duration:f,isActive:c,easing:g,key:"radar-".concat(V),onAnimationEnd:ee,onAnimationStart:Y},H=>{var S=H===1?i:i.map(bt(j,T,H)),te=H===1?s:s?.map(bt(b,O,H));return H>0&&(t.current=S,r.current=te),n.createElement(_i,{points:S,baseLinePoints:te,props:a})}),n.createElement(Fa,{label:a.label}),a.children)}function Ei(e){var a=n.useRef(void 0),t=n.useRef(void 0);return n.createElement(Oi,{props:e,previousPointsRef:a,previousBaseLinePointsRef:t})}var Si={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ka.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Ri extends n.PureComponent{render(){var{hide:a,className:t,points:r}=this.props;if(a||r==null)return null;var i=X("recharts-radar",t);return n.createElement(n.Fragment,null,n.createElement(Z,{className:i},n.createElement(Ei,this.props)),n.createElement(Ma,{points:r,mainColor:$e(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Di(e){var a=Nt(),t=q(r=>fi(r,e.radiusAxisId,e.angleAxisId,a,e.id));return n.createElement(Ri,ie({},e,{points:t?.points,baseLinePoints:t?.baseLinePoints,isRange:t?.isRange}))}class Fe extends n.PureComponent{render(){return n.createElement(Na,{id:this.props.id,type:"radar"},a=>n.createElement(n.Fragment,null,n.createElement(Ca,{type:"radar",id:a,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),n.createElement(Ia,{legendPayload:bi(this.props)}),n.createElement(Ta,{fn:Pi,args:this.props}),n.createElement(Di,ie({},this.props,{id:a}))))}}Be(Fe,"displayName","Radar");Be(Fe,"defaultProps",Si);var Ni=["axis"],Ci={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ii=n.forwardRef((e,a)=>{var t=Wa(e,Ci);return n.createElement(er,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ni,tooltipPayloadSearcher:za,categoricalChartProps:t,ref:a})});const Ss=()=>{const{user:e}=ta(),a=aa(),{toast:t}=la(),[r,i]=n.useState(!0),[s,c]=n.useState(!1),[d,f]=n.useState(null),[g,h]=n.useState(0),[x,j]=n.useState(!0),[b,T]=n.useState({avgGrade:0,totalActivities:0,completedActivities:0,ranking:null}),[O,V]=n.useState([]),[U,E]=n.useState([]),[$,ee]=n.useState([]),[Y,H]=n.useState([]),[S,te]=n.useState("all"),[w,oe]=n.useState("all"),[Q,Wt]=n.useState([]);n.useEffect(()=>{e?.id&&(zt(),we())},[e]);const we=async()=>{try{j(!0);const l=new Date;l.setHours(0,0,0,0);const{data:u,error:p}=await R.from("ai_recommendations_usage").select("id").eq("student_id",e.id).gte("created_at",l.toISOString());p?(B.error("[AI Usage] Erro ao buscar contador:",p),h(0)):h(u?.length||0)}catch(l){B.error("[AI Usage] Erro ao buscar contador:",l),h(0)}finally{j(!1)}},zt=async()=>{try{i(!0),await Promise.all([Ut(),Ht(),Zt(),Jt(),Xt(),Vt()])}catch(l){B.error("Erro ao carregar dados de desempenho:",l)}finally{i(!1)}},Vt=async()=>{try{const{data:l}=await R.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student"),u=l?.map(v=>v.class_id)||[],{data:p}=await R.from("classes").select("id, name, subject").in("id",u);Wt(p||[])}catch(l){B.error("Erro ao carregar turmas:",l)}},Ut=async()=>{try{const{data:l}=await R.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student");let u=l?.map(_=>_.class_id)||[];if(S!=="all"&&(u=u.filter(_=>_===S)),u.length===0){T({avgGrade:0,totalActivities:0,completedActivities:0,ranking:null});return}const{data:p}=await R.from("activity_class_assignments").select("activity_id").in("class_id",u),v=p?.map(_=>_.activity_id)||[],P=v.length;let m=R.from("submissions").select("activity_id, status, grade, submitted_at").eq("student_id",e.id).in("activity_id",v);if(w!=="all"){const _=new Date;let A=new Date;w==="week"?A.setDate(_.getDate()-7):w==="month"?A.setMonth(_.getMonth()-1):w==="semester"&&A.setMonth(_.getMonth()-6),m=m.gte("submitted_at",A.toISOString())}const{data:D}=await m,y=D?.length||0,C=D?.filter(_=>_.grade!==null)||[],k=C.length>0?C.reduce((_,A)=>_+parseFloat(A.grade),0)/C.length:0;T({avgGrade:k,totalActivities:P,completedActivities:y,ranking:null})}catch(l){B.error("Erro ao carregar stats:",l)}},Ht=async()=>{try{const{data:l}=await R.from("submissions").select("id, grade, feedback, submitted_at, status, activity_id").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!1}).limit(10),u=l?.map(A=>A.activity_id)||[],{data:p}=await R.from("activities").select("id, title, max_score").in("id",u),v={};p?.forEach(A=>{v[A.id]=A});const{data:P}=await R.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),m=P?.map(A=>A.class_id).filter(Boolean)||[],{data:D}=await R.from("classes").select("id, name").in("id",m),y={};D?.forEach(A=>{y[A.id]=A});const C={},k={};P?.forEach(A=>{C[A.activity_id]=y[A.class_id]?.name,k[A.activity_id]=A.class_id});const _=(l||[]).map(A=>({...A,activity_title:v[A.activity_id]?.title,max_score:v[A.activity_id]?.max_score,class_name:C[A.activity_id],class_id:k[A.activity_id]}));V(_)}catch(l){B.error("Erro ao carregar notas recentes:",l)}},Zt=async()=>{try{const{data:l}=await R.from("submissions").select("grade, submitted_at, activity_id, activity:activities(max_score)").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!0}).limit(20),u=l?.map(m=>m.activity_id)||[],{data:p}=await R.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),v={};p?.forEach(m=>{v[m.activity_id]=m.class_id});const P=(l||[]).map(m=>({date:rt(new Date(m.submitted_at),"dd/MM",{locale:it}),fullDate:m.submitted_at,nota:parseFloat(m.grade)||0,maxScore:m.activity?.max_score||10,activity_id:m.activity_id,class_id:v[m.activity_id]}));E(P)}catch(l){B.error("Erro ao carregar evoluÃ§Ã£o:",l)}},Jt=async()=>{try{const{data:l}=await R.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student"),u=l?.map(m=>m.class_id)||[],{data:p}=await R.from("classes").select("id, name, subject").in("id",u),v={};p?.forEach(m=>{v[m.id]=m});const P=await Promise.all((l||[]).map(async m=>{const{data:D}=await R.from("activity_class_assignments").select("activity_id").eq("class_id",m.class_id),y=D?.map(M=>M.activity_id)||[],{data:C}=await R.from("submissions").select("id, grade, submitted_at, activity_id").eq("student_id",e.id).in("activity_id",y).not("grade","is",null).order("submitted_at",{ascending:!0}),k=C?.map(M=>M.activity_id)||[],{data:_}=await R.from("activities").select("id, title, max_score").in("id",k),A={};_?.forEach(M=>{A[M.id]=M});const N=C?.map(M=>parseFloat(M.grade))||[],le=N.length>0?N.reduce((M,ea)=>M+ea,0)/N.length:0,Qt=(C||[]).map(M=>({date:rt(new Date(M.submitted_at),"dd/MM",{locale:it}),grade:parseFloat(M.grade)}));return{name:v[m.class_id]?.name||"Turma",media:le,history:Qt}}));ee(P.sort((m,D)=>D.media-m.media))}catch(l){B.error("Erro ao carregar desempenho por turma:",l)}},Xt=async()=>{try{const{data:l}=await R.from("submissions").select(`
          grade,
          submitted_at,
          activity_id,
          activity:activities(type, max_score)
        `).eq("student_id",e.id).not("grade","is",null),u=l?.map(m=>m.activity_id)||[],{data:p}=await R.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),v={};p?.forEach(m=>{v[m.activity_id]=m.class_id});const P=(l||[]).map(m=>({grade:parseFloat(m.grade),maxScore:parseFloat(m.activity?.max_score),type:m.activity?.type,submitted_at:m.submitted_at,class_id:v[m.activity_id]}));H(P)}catch(l){B.error("Erro ao carregar radar de habilidades:",l)}},Yt=async()=>{const l=`ai_recommendations_${e.id}`;try{c(!0);const u=localStorage.getItem(l);if(u){const{recommendations:y,timestamp:C}=JSON.parse(u),k=Date.now()-C,_=1800*1e3;if(k<_){f(y),c(!1),t({title:"âœ… RecomendaÃ§Ãµes carregadas",description:"Usando anÃ¡lise recente do cache"});return}}const p={avgGrade:b.avgGrade,totalActivities:b.totalActivities,completedActivities:b.completedActivities,recentGrades:O.slice(0,5).map(y=>({activityTitle:y.activity_title,grade:y.submission?.grade,maxScore:y.max_score,submittedAt:y.submission?.submitted_at})),classPerformance:$.map(y=>({className:y.name,averageGrade:y.media,totalActivities:y.totalActivities||0})),radarData:Y};t({title:"ðŸ¤– Gerando recomendaÃ§Ãµes...",description:"Aguarde enquanto a IA analisa seu desempenho"});const{data:v}=await R.auth.getSession(),P=v?.session?.access_token,m=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/ai-study-recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({studentId:e.id,performanceData:p})});let D;if(m.ok){const y=await m.json();if(y.limitReached){B.warn("[AI] Limite diÃ¡rio atingido:",y),c(!1),await we(),t({title:"â° Limite DiÃ¡rio Atingido",description:y.message||"VocÃª jÃ¡ gerou 3 recomendaÃ§Ãµes hoje. Tente novamente amanhÃ£!",variant:"destructive",duration:5e3});return}if(await we(),y.success&&y.recommendations&&Array.isArray(y.recommendations))D={strengths:y.recommendations.filter(k=>k.priority==="low"||k.priority==="medium").map(k=>k.description),improvements:y.recommendations.filter(k=>k.priority==="high").map(k=>k.description),tips:y.recommendations.map(k=>`ðŸŽ¯ ${k.title}: ${k.reason}`).slice(0,3)};else throw new Error("Resposta da IA sem recomendaÃ§Ãµes vÃ¡lidas")}else{B.warn("[AI] Usando fallback local - Edge Function falhou"),t({title:"â„¹ï¸ Usando anÃ¡lise local",description:"API de IA indisponÃ­vel. Gerando recomendaÃ§Ãµes com base nos seus dados.",duration:3e3});const y=$.filter(N=>N.media<7).sort((N,le)=>N.media-le.media),C=$.filter(N=>N.media>=8).sort((N,le)=>le.media-N.media),k=[];y.length>0?y.slice(0,2).forEach(N=>{k.push(`Revisar conceitos de ${N.name} onde as notas foram menores (mÃ©dia: ${N.media.toFixed(1)})`)}):k.push("Manter o ritmo de estudos atual"),O.some(N=>N.status==="draft")&&k.push("Completar atividades pendentes antes do prazo"),k.push("Participar mais das discussÃµes em sala");const _=[];b.avgGrade>=8?_.push("Ã“timo desempenho geral nas atividades"):b.avgGrade>=7?_.push("Bom desempenho nas atividades"):_.push("Mostrando esforÃ§o e dedicaÃ§Ã£o"),C.length>0&&C.slice(0,2).forEach(N=>{_.push(`Excelente em ${N.name} (mÃ©dia: ${N.media.toFixed(1)})`)}),(b.totalActivities>0?b.completedActivities/b.totalActivities*100:0)>=80&&_.push("ConsistÃªncia nas entregas dentro do prazo"),D={strengths:_,improvements:k,tips:["ðŸ“š Reserve 30min diÃ¡rios para revisÃ£o","âœï¸ Pratique mais questÃµes abertas","ðŸŽ¯ EstabeleÃ§a metas semanais de estudo","ðŸ‘¥ Forme grupos de estudo com colegas","â“ Tire dÃºvidas com professores"].slice(0,3)}}f(D),localStorage.setItem(l,JSON.stringify({recommendations:D,timestamp:Date.now()})),t({title:"âœ… RecomendaÃ§Ãµes geradas!",description:"Confira as sugestÃµes personalizadas abaixo"})}catch(u){B.error("Erro ao gerar recomendaÃ§Ãµes:",u),t({title:"âŒ Erro ao gerar recomendaÃ§Ãµes",description:"Tente novamente mais tarde",variant:"destructive"})}finally{c(!1)}};n.useMemo(()=>{if(!O.length)return b;let l=[...O];if(S!=="all"&&(l=l.filter(v=>v.class_id===S)),w!=="all"){const v=new Date;let P=new Date;w==="week"?P.setDate(v.getDate()-7):w==="month"?P.setMonth(v.getMonth()-1):w==="semester"&&P.setMonth(v.getMonth()-6),l=l.filter(m=>m.submitted_at&&new Date(m.submitted_at)>=P)}const u=l.filter(v=>v.grade!==null),p=u.length>0?u.reduce((v,P)=>v+parseFloat(P.grade),0)/u.length:0;return{...b,avgGrade:p,completedActivities:l.length}},[b,O,S,w]);const qe=n.useMemo(()=>{let l=[...U];if(S!=="all"&&(l=l.filter(u=>u.class_id===S)),w!=="all"){const u=new Date;let p=new Date;w==="week"?p.setDate(u.getDate()-7):w==="month"?p.setMonth(u.getMonth()-1):w==="semester"&&p.setMonth(u.getMonth()-6),l=l.filter(v=>{if(!v.fullDate)return!1;const P=new Date(v.fullDate);return P>=p&&P<=u})}return l},[U,S,w]),ke=n.useMemo(()=>{let l=[...$];return S!=="all"&&(l=l.filter(u=>{const p=Q.find(v=>v.id===S);return p&&u.name===p.name})),w!=="all"&&(l=l.map(u=>{const p=new Date;let v=new Date;w==="week"?v.setDate(p.getDate()-7):w==="month"?v.setMonth(p.getMonth()-1):w==="semester"&&v.setMonth(p.getMonth()-6);const P=(u.history||[]).filter(y=>!0),m=P.map(y=>y.grade),D=m.length>0?m.reduce((y,C)=>y+C,0)/m.length:0;return{...u,media:D,history:P}})),l.sort((u,p)=>p.media-u.media)},[$,S,w,Q]),Ge=n.useMemo(()=>{let l=[...Y];if(S!=="all"&&(l=l.filter(p=>p.class_id===S)),w!=="all"){const p=new Date;let v=new Date;w==="week"?v.setDate(p.getDate()-7):w==="month"?v.setMonth(p.getMonth()-1):w==="semester"&&v.setMonth(p.getMonth()-6),l=l.filter(P=>{if(!P.submitted_at)return!1;const m=new Date(P.submitted_at);return m>=v&&m<=p})}const u=[{skill:"Objetivas",value:0,count:0},{skill:"Abertas",value:0,count:0},{skill:"Mistas",value:0,count:0}];return l.forEach(p=>{const v=p.grade,P=p.maxScore,m=p.type;if(!v||!P||P===0)return;const D=v/P*100;m==="objective"?(u[0].value+=D,u[0].count++):m==="open"?(u[1].value+=D,u[1].count++):m==="mixed"&&(u[2].value+=D,u[2].count++)}),u.map(p=>({skill:p.skill,value:p.count>0?Math.round(p.value/p.count):0}))},[Y,S,w]);return r?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(ra,{size:"lg"})}):o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:[o.jsx(Ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:o.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-3",children:[o.jsx(_e,{className:"w-8 h-8 text-yellow-600"}),"Meu Desempenho"]}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Acompanhe suas notas e evoluÃ§Ã£o acadÃªmica"})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsx(sa,{onClick:Yt,disabled:s||b.totalActivities===0||g>=3,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:s?o.jsxs(o.Fragment,{children:[o.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):g>=3?o.jsxs(o.Fragment,{children:[o.jsx(ca,{className:"w-4 h-4 mr-2"}),"Limite DiÃ¡rio Atingido"]}):o.jsxs(o.Fragment,{children:[o.jsx(He,{className:"w-4 h-4 mr-2"}),"Gerar RecomendaÃ§Ãµes com IA"]})}),!x&&o.jsxs("span",{className:`text-sm ${g>=3?"text-red-600 dark:text-red-400 font-semibold":g>=2?"text-orange-600 dark:text-orange-400 font-medium":"text-slate-500 dark:text-slate-400"}`,children:[g,"/3 utilizadas hoje"]})]})]})}),d&&o.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:o.jsxs(ce,{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20 border-2 border-purple-200 dark:border-purple-800",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(He,{className:"w-6 h-6 text-purple-600"}),"RecomendaÃ§Ãµes Personalizadas da IA"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-green-700 dark:text-green-400 mb-3 flex items-center gap-2",children:[o.jsx(da,{className:"w-5 h-5"}),"Seus Pontos Fortes"]}),o.jsx("ul",{className:"space-y-2",children:d.strengths?.map((l,u)=>o.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-green-200 dark:border-green-800",children:["â€¢ ",l]},u))||o.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-orange-700 dark:text-orange-400 mb-3 flex items-center gap-2",children:[o.jsx(Ze,{className:"w-5 h-5"}),"Ãreas para Melhorar"]}),o.jsx("ul",{className:"space-y-2",children:d.improvements?.map((l,u)=>o.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:["â€¢ ",l]},u))||o.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[o.jsx(ua,{className:"w-5 h-5"}),"Dicas de Estudo"]}),o.jsx("ul",{className:"space-y-2",children:d.tips?.map((l,u)=>o.jsx("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:l},u))||o.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]})]})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[o.jsxs(We,{value:S,onValueChange:te,children:[o.jsx(ze,{className:"w-full md:w-64",children:o.jsx(Ve,{placeholder:"Todas as turmas"})}),o.jsxs(Ue,{children:[o.jsx(ae,{value:"all",children:"Todas as turmas"}),Q.map(l=>o.jsx(ae,{value:l.id,children:l.name},l.id))]})]}),o.jsxs(We,{value:w,onValueChange:oe,children:[o.jsx(ze,{className:"w-full md:w-64",children:o.jsx(Ve,{placeholder:"Todo o perÃ­odo"})}),o.jsxs(Ue,{children:[o.jsx(ae,{value:"all",children:"Todo o perÃ­odo"}),o.jsx(ae,{value:"week",children:"Ãšltima semana"}),o.jsx(ae,{value:"month",children:"Ãšltimo mÃªs"}),o.jsx(ae,{value:"semester",children:"Ãšltimo semestre"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx(pe,{icon:_e,value:b.avgGrade>0?b.avgGrade.toFixed(1):"--",label:"MÃ©dia Geral",gradient:"yellow"}),o.jsx(pe,{icon:Ze,value:b.completedActivities,label:"Atividades ConcluÃ­das",gradient:"green"}),o.jsx(pe,{icon:ma,value:b.totalActivities,label:"Total de Atividades",gradient:"blue"}),o.jsx(pe,{icon:pa,value:b.ranking||"--",label:"PosiÃ§Ã£o no Ranking",gradient:"purple"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[qe.length>0&&o.jsxs(ce,{className:"p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(fa,{className:"w-6 h-6 text-green-600"}),"EvoluÃ§Ã£o das Notas"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx(Oe,{width:"100%",height:300,className:"min-w-[400px]",children:o.jsxs(Va,{data:qe,margin:{top:5,right:20,left:0,bottom:5},children:[o.jsx(Qe,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(et,{dataKey:"date",stroke:"#64748b",tick:{fontSize:12}}),o.jsx(tt,{stroke:"#64748b",domain:[0,"auto"],tick:{fontSize:12}}),o.jsx(at,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),o.jsx(Ua,{type:"monotone",dataKey:"nota",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:6},name:"Nota"})]})})})]}),o.jsxs(ce,{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"ðŸ“ Ãšltimas Notas"}),O.length>0?o.jsx("div",{className:"space-y-4",children:O.map((l,u)=>o.jsx(oa,{grade:l,onViewDetails:()=>a(`/students/activities/${l.activity_id}`),index:u},l.id))}):o.jsx(na,{icon:_e,title:"Nenhuma nota ainda",description:"Complete suas atividades para ver suas notas aqui.",variant:"default"})]})]}),o.jsxs("div",{className:"space-y-8",children:[ke.length>0&&o.jsxs(ce,{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"ðŸ“Š Por Turma"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx(Oe,{width:"100%",height:Math.max(150,ke.length*50),className:"min-w-[300px]",children:o.jsxs(Ha,{data:ke,layout:"vertical",margin:{left:20,right:20,top:10,bottom:10},children:[o.jsx(Qe,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(et,{type:"number",stroke:"#64748b",domain:[0,10]}),o.jsx(tt,{type:"category",dataKey:"name",stroke:"#64748b",width:120,tick:{fontSize:12}}),o.jsx(at,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),o.jsx(Za,{dataKey:"media",fill:"#3b82f6",radius:[0,8,8,0],name:"MÃ©dia"})]})})})]}),Ge.length>0&&o.jsxs(ce,{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"ðŸŽ¯ Por Tipo"}),o.jsx(Oe,{width:"100%",height:220,children:o.jsxs(Ii,{data:Ge,margin:{top:10,right:10,bottom:10,left:10},children:[o.jsx(Lt,{stroke:"#e2e8f0"}),o.jsx(Ae,{dataKey:"skill",stroke:"#64748b",tick:{fontSize:12}}),o.jsx(Pe,{stroke:"#64748b",domain:[0,100]}),o.jsx(Fe,{name:"Desempenho",dataKey:"value",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6})]})})]})]})]})]})};export{Ss as default};
