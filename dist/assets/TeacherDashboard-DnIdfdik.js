import{a as _e,r,s as m,l as g,j as e,q as he,u as Ve,L as j}from"./main-XXuEaTDd.js";import{D as Le,a as Re,b as Be,c as He,d as Ue,e as We}from"./dialog-CAxGtlMo.js";import{B as n,m as v}from"./button-CnByYIhr.js";import{L as de}from"./label-BTofGEwk.js";import{S as Ye,a as Xe,b as Je,c as Ke,d as Qe}from"./select-81O4nd2V.js";import{I as we}from"./input-BsdcwXwo.js";import{u as Ze}from"./use-toast-nLXEkatJ.js";import{S as ye}from"./send-DaNDC1MG.js";import{U as ke}from"./users-DHSoS6td.js";import{C as D}from"./calendar-Dh85b9lX.js";import{C as Z}from"./clock-DxFS_FvX.js";import{X as et}from"./x-rANpGSmW.js";import{E as tt}from"./EventDetailsModal-BdI8XyzS.js";import{C as w}from"./card-BmX5EBcq.js";import{e as J}from"./SidebarPremium-eC0udO90.js";import{S as at}from"./StatsCard-DTvEOEjk.js";import{D as st}from"./DashboardHeader-BrNcgIGw.js";import{E as q}from"./EmptyState-BfX5_JuL.js";import"./dropdown-menu-EPJY_Fdk.js";import{a as rt}from"./addDays-pVIPqqUr.js";import{B as ce}from"./book-open-C2-Re7kr.js";import{T as it,F as me}from"./trending-up-B04abNi1.js";import{C as K}from"./chevron-right-DahHX28a.js";import{T as lt}from"./target-CmLpcK5A.js";import{V as Ne}from"./video-BpmMnI4Z.js";import{M as nt}from"./map-pin-BDiE9CoN.js";import{P as ge}from"./plus-DwYyBM8b.js";import{T as ot}from"./triangle-alert-DVQy4H13.js";import{C as dt}from"./circle-check-DMR9b9xr.js";import{C as ct}from"./chart-column-B4DM1V4B.js";import{f as Q}from"./format-BcFT9btV.js";import{p as mt}from"./pt-BR-CuGSKEGQ.js";import"./index-DlVMVqW0.js";import"./index-DCGojTwo.js";import"./index-BUvRw9fk.js";import"./index-eRwsCZ6_.js";import"./index-DV0dqyWC.js";import"./chevron-down-DeH9TE3A.js";import"./check-0NoJAfkQ.js";import"./chevron-up-D7LQlrSF.js";import"./redisCache-CRBUqEcJ.js";import"./user-DGN0W0vL.js";import"./square-pen-D5zcdnd8.js";import"./copy-BoG4sR38.js";import"./trash-2-yvc9XNef.js";import"./message-circle-Bnfe4kSM.js";import"./settings-BoPgazzK.js";import"./house-Cqu6JObC.js";import"./graduation-cap-CrHOTf4P.js";import"./index-BgsUcMRO.js";import"./index-D_6pv9Jf.js";import"./en-US-B6HbAA6N.js";const gt=({open:x,onClose:C,activity:E,onSuccess:y})=>{const{user:M}=_e(),{toast:p}=Ze(),[N,A]=r.useState([]),[T,ee]=r.useState(""),[o,P]=r.useState(""),[I,$]=r.useState("23:59"),[f,V]=r.useState(!1),[L,R]=r.useState(!1);r.useEffect(()=>{if(x&&M){B();const s=new Date;s.setDate(s.getDate()+7),P(s.toISOString().split("T")[0])}},[x,M]);const B=async()=>{try{R(!0);const{data:s,error:d}=await m.from("classes").select("id, name, subject, is_active").eq("created_by",M.id).eq("is_active",!0).order("name",{ascending:!0});if(d)throw d;A(s||[])}catch(s){g.error("Erro ao carregar turmas:",s),p({title:"Erro ao carregar turmas",description:s.message,variant:"destructive"})}finally{R(!1)}},te=async()=>{if(!T){p({title:"Selecione uma turma",description:"Escolha a turma para postar a atividade.",variant:"destructive"});return}if(!o){p({title:"Defina a data de entrega",description:"A data de entrega Ã© obrigatÃ³ria.",variant:"destructive"});return}try{V(!0);const s=`${o}T${I}:00`,{error:d}=await m.from("activities").update({due_date:s}).eq("id",E.id);if(d)throw g.error("Erro ao atualizar atividade:",d),d;const{data:ae,error:G}=await m.from("activity_class_assignments").insert({activity_id:E.id,class_id:T,assigned_at:new Date().toISOString()}).select().single();if(G)throw G;p({title:"âœ… Atividade postada!",description:"A atividade foi postada para a turma selecionada."}),y&&y(ae),C()}catch(s){g.error("Erro ao postar atividade:",s),p({title:"Erro ao postar atividade",description:s.message,variant:"destructive"})}finally{V(!1)}},z=()=>{f||(ee(""),P(""),$("23:59"),C())};return e.jsx(Le,{open:x,onOpenChange:z,children:e.jsxs(Re,{className:"max-w-md",children:[e.jsxs(Be,{children:[e.jsxs(He,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-600"}),"Postar Atividade"]}),e.jsx(Ue,{children:"Escolha a turma e defina a data de entrega para postar esta atividade."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Atividade:"}),e.jsx("p",{className:"font-semibold",children:E?.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"class",children:[e.jsx(ke,{className:"w-4 h-4 inline mr-1"}),"Turma *"]}),L?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(he,{size:"sm"})}):e.jsxs(Ye,{value:T,onValueChange:ee,children:[e.jsx(Xe,{id:"class",children:e.jsx(Je,{placeholder:"Selecione a turma..."})}),e.jsx(Ke,{children:N.map(s=>e.jsxs(Qe,{value:s.id,children:[s.name," ",s.subject&&`- ${s.subject}`]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"due-date",children:[e.jsx(D,{className:"w-4 h-4 inline mr-1"}),"Data de Entrega *"]}),e.jsx(we,{id:"due-date",type:"date",value:o,onChange:s=>P(s.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{htmlFor:"due-time",children:[e.jsx(Z,{className:"w-4 h-4 inline mr-1"}),"Hora de Entrega"]}),e.jsx(we,{id:"due-time",type:"time",value:I,onChange:s=>$(s.target.value)})]})]}),e.jsxs(We,{children:[e.jsxs(n,{variant:"outline",onClick:z,disabled:f,children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),e.jsx(n,{onClick:te,disabled:f||!T||!o,children:f?e.jsxs(e.Fragment,{children:[e.jsx(he,{size:"sm",className:"mr-2"}),"Postando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Postar Atividade"]})})]})]})})},ga=()=>{const{user:x}=_e(),C=Ve(),[E,y]=r.useState(!0),[M,p]=r.useState(null),[N,A]=r.useState(7),[T,ee]=r.useState("all"),[o,P]=r.useState({totalClasses:0,totalStudents:0,totalActivities:0,pendingGrading:0,avgGrade:0,todayCorrections:0}),[I,$]=r.useState([]),[f,V]=r.useState([]),[L,R]=r.useState([]),[B,te]=r.useState([]),[z,s]=r.useState([]),[d,ae]=r.useState([]),[G,Se]=r.useState([]),[De,se]=r.useState(!1),[Ce,re]=r.useState(null),[xe,ue]=r.useState(!1),[pe,be]=r.useState(null);r.useEffect(()=>{_()},[]);const _=async()=>{if(!x?.id){y(!1);return}try{y(!0),p(null),g.debug("[TeacherDashboard] Carregando dados...");const{data:t,error:i}=await m.from("classes").select(`
          *,
          class_members(count)
        `).eq("created_by",x.id).eq("is_active",!0);if(i)throw i;const c=t?.map(a=>({...a,student_count:a.class_members?.[0]?.count||0}))||[],{data:h,error:H}=await m.from("activities").select(`
          *,
          activity_class_assignments(class:classes(name))
        `).eq("created_by",x.id).order("created_at",{ascending:!1}).limit(10);if(H)throw H;const ie=h?.map(a=>({...a,class_name:a.activity_class_assignments?.[0]?.class?.name||"Sem turma"}))||[],F=h?.map(a=>a.id)||[],{data:U,error:k}=await m.from("submissions").select(`
          *,
          activity:activities(title),
          student:profiles!student_id(full_name)
        `).in("activity_id",F).eq("status","submitted").order("submitted_at",{ascending:!0}).limit(10);if(k)throw k;const Te=U?.map(a=>({...a,student_name:a.student?.full_name||"Aluno",activity_title:a.activity?.title||"Atividade"}))||[],{data:le,error:fe}=await m.from("submissions").select("grade").in("activity_id",F).not("grade","is",null);if(fe)throw fe;const Pe=le?.length>0?le.reduce((a,b)=>a+b.grade,0)/le.length:0,W=new Date;W.setHours(0,0,0,0);const Y=new Date(W);Y.setDate(Y.getDate()+1);const{data:Ie,error:je}=await m.from("submissions").select("id").in("activity_id",F).gte("graded_at",W.toISOString()).lt("graded_at",Y.toISOString());if(je)throw je;const S=new Date,X=new Date(S.getFullYear(),S.getMonth(),S.getDate(),0,0,0,0),ne=new Date(S.getFullYear(),S.getMonth(),S.getDate(),23,59,59,999),ze=rt(new Date,N);g.debug("[Dashboard] Buscando eventos de hoje:",{todayStart:X.toISOString(),todayEnd:ne.toISOString()});const{data:O,error:oe}=await m.from("calendar_events").select(`
          *,
          activity_assignments:activity_class_assignments(
            id,
            class_id,
            assigned_at
          )
        `).eq("created_by",x.id).gte("start_time",X.toISOString()).lte("start_time",ze.toISOString()).order("start_time",{ascending:!0});if(!oe&&O){g.debug("[Dashboard] Eventos retornados:",O.length);const a=O.filter(b=>{const l=new Date(b.start_time),u=l>=X&&l<=ne;return u&&g.debug("[Dashboard] Evento de hoje:",b.title,l.toISOString()),u});g.debug("[Dashboard] Eventos de hoje filtrados:",a.length),s(a),te(O.slice(0,4))}else oe&&g.error("[Dashboard] Erro ao buscar eventos:",oe);const{data:ve,error:Ge}=await m.from("submissions").select(`
          student_id,
          grade,
          student:profiles!student_id(full_name)
        `).in("activity_id",F).not("grade","is",null);if(!Ge&&ve){const a={};ve.forEach(l=>{a[l.student_id]||(a[l.student_id]={grades:[],name:l.student?.full_name||"Aluno"}),a[l.student_id].grades.push(l.grade)});const b=Object.entries(a).map(([l,u])=>({id:l,name:u.name,avgGrade:u.grades.reduce((Me,$e)=>Me+$e,0)/u.grades.length,totalActivities:u.grades.length})).filter(l=>l.avgGrade<6).sort((l,u)=>l.avgGrade-u.avgGrade).slice(0,10);ae(b)}const ht=O?.filter(a=>a.activity_id&&new Date(a.start_time)>=X&&new Date(a.start_time)<=ne)||[],{data:Fe,error:Oe}=await m.from("activities").select(`
          *,
          activity_assignments:activity_class_assignments(
            id,
            class_id,
            assigned_at
          )
        `).eq("created_by",x.id).gte("created_at",W.toISOString()).lt("created_at",Y.toISOString());Oe||Se(Fe||[]);const qe=c.reduce((a,b)=>a+(b.student_count||0),0);P({totalClasses:c.length,totalStudents:qe,totalActivities:h?.length||0,pendingGrading:U?.length||0,avgGrade:Number(Pe.toFixed(1)),todayCorrections:Ie?.length||0}),$(c.slice(0,5)),V(ie.slice(0,5)),R(Te),g.debug("[TeacherDashboard] Dados carregados com sucesso")}catch(t){g.error("Erro ao carregar dashboard:",t),p("Erro ao carregar dados do dashboard. Tente novamente.")}finally{y(!1)}},Ee=[{title:"Total de Turmas",value:o.totalClasses,icon:ce,gradient:"from-blue-600 to-cyan-600",bgColor:"bg-blue-50 dark:bg-blue-950/30",change:`${o.totalStudents} alunos`},{title:"Total de Alunos",value:o.totalStudents,icon:ke,gradient:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-50 dark:bg-cyan-950/30"},{title:"MÃ©dia Geral",value:o.avgGrade,icon:it,gradient:"from-emerald-500 to-teal-500",bgColor:"bg-emerald-50 dark:bg-emerald-950/30",change:o.avgGrade>=7?"Excelente":"Pode melhorar"},{title:"Aguardando CorreÃ§Ã£o",value:o.pendingGrading,icon:Z,gradient:"from-amber-500 to-orange-500",bgColor:"bg-amber-50 dark:bg-amber-950/30",change:`${o.todayCorrections} hoje`}],Ae=[{label:"Nova Turma",icon:ge,href:"/dashboard/classes/new",gradient:"from-blue-600 to-indigo-600"},{label:"Nova Atividade",icon:ge,href:"/dashboard/activities/new",gradient:"from-blue-600 to-cyan-600"},{label:"Ver Analytics",icon:ct,href:"/dashboard/analytics",gradient:"from-emerald-600 to-teal-600"}];return E?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(he,{size:"lg",text:"Carregando dashboard..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsx(st,{title:"Dashboard do Professor",subtitle:"Bem-vindo de volta! Aqui estÃ¡ um resumo das suas turmas e atividades.",role:"teacher"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Ee.map((t,i)=>e.jsx(at,{title:t.title,value:t.value,icon:t.icon,gradient:t.gradient,bgColor:t.bgColor,change:t.change,delay:i*.1},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"PrÃ³ximos Eventos"})]}),e.jsx(j,{to:"/dashboard/calendar",children:e.jsxs(n,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todos"}),e.jsx(K,{className:"w-4 h-4"})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(n,{size:"sm",variant:N===1?"default":"outline",onClick:()=>{A(1),_()},children:"Hoje"}),e.jsx(n,{size:"sm",variant:N===3?"default":"outline",onClick:()=>{A(3),_()},children:"3 dias"}),e.jsx(n,{size:"sm",variant:N===7?"default":"outline",onClick:()=>{A(7),_()},children:"7 dias"})]}),e.jsx("div",{className:"space-y-3",children:B.length>0?B.map((t,i)=>e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-600 to-cyan-500 rounded-lg flex flex-col items-center justify-center text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:Q(new Date(t.start_time),"d")}),e.jsx("div",{className:"text-xs uppercase",children:Q(new Date(t.start_time),"MMM",{locale:mt})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:Q(new Date(t.start_time),"HH:mm")}),e.jsx(J,{className:`mt-1 ${t.type==="meeting"?"bg-purple-100 text-purple-700":t.type==="activity"?"bg-orange-100 text-orange-700":t.type==="deadline"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:t.type==="event"?"Aula":t.type==="activity"?"Atividade":t.type==="meeting"?"ReuniÃ£o":t.type==="deadline"?"Prazo":"Evento"})]})]},t.id)):e.jsx(q,{icon:D,title:"Nenhum evento prÃ³ximo",description:"Seus prÃ³ximos eventos aparecerÃ£o aqui."})})]}),e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Agenda de Hoje"})]}),e.jsxs("div",{className:"space-y-4",children:[z.length>0?e.jsx("div",{className:"space-y-3",children:z.map((t,i)=>{const c=t.type==="meeting"||t.type==="reuniÃ£o",h=t.type==="activity"||t.type==="atividade",H=t.modality==="online",ie=t.modality==="presential",U=c?Ne:h?me:D;return e.jsx(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.1},onClick:()=>{be(t),ue(!0)},className:"p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 cursor-pointer transition-all bg-white dark:bg-slate-800 hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${c?"bg-purple-100 dark:bg-purple-900/30":h?"bg-orange-100 dark:bg-orange-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:e.jsx(U,{className:`w-5 h-5 ${c?"text-purple-600":h?"text-orange-600":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:t.title}),e.jsx(J,{className:`whitespace-nowrap ${c?"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300":h?"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"}`,children:c?"ðŸ“¹ ReuniÃ£o":h?"ðŸ“ Atividade":"ðŸ“… Evento"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 dark:text-slate-400 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-4 h-4"}),Q(new Date(t.start_time),"HH:mm")]}),c&&H&&t.meeting_link&&e.jsxs("a",{href:t.meeting_link,target:"_blank",rel:"noopener noreferrer",onClick:k=>k.stopPropagation(),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 hover:underline",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Entrar na reuniÃ£o"]}),c&&ie&&t.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(nt,{className:"w-4 h-4"}),t.location]})]}),t.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 line-clamp-1",children:t.description})]}),h&&t.activity_id&&e.jsx(n,{size:"sm",onClick:k=>{k.stopPropagation(),(!t.activity_assignments||t.activity_assignments.length===0)&&(re({id:t.activity_id,title:t.title}),se(!0))},disabled:t.activity_assignments&&t.activity_assignments.length>0,className:`shadow-md ${t.activity_assignments&&t.activity_assignments.length>0?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"} text-white`,children:t.activity_assignments&&t.activity_assignments.length>0?"Postado":"Postar"})]})},t.id)})}):e.jsx(q,{icon:D,title:"Nenhum evento hoje",description:"Sua agenda estÃ¡ livre hoje."}),G.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Atividades para Postar"}),G.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:t.title}),t.activity_assignments&&t.activity_assignments.length>0&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Postado em ",t.activity_assignments.length," turma",t.activity_assignments.length>1?"s":""]})]}),e.jsx(n,{size:"sm",disabled:t.activity_assignments&&t.activity_assignments.length>0,className:t.activity_assignments&&t.activity_assignments.length>0?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",onClick:()=>{(!t.activity_assignments||t.activity_assignments.length===0)&&(re(t),se(!0))},children:t.activity_assignments&&t.activity_assignments.length>0?"Postado":"Postar"})]},t.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Turmas Recentes"]}),e.jsx(j,{to:"/dashboard/classes",children:e.jsxs(n,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(K,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:I.length>0?I.map((t,i)=>e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},children:e.jsx(j,{to:`/dashboard/classes/${t.id}`,children:e.jsx(w,{className:"p-4 hover:shadow-md transition-all border-2 hover:border-blue-200 dark:hover:border-blue-800 bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${t.color||"from-blue-500 to-indigo-500"} flex items-center justify-center text-white font-bold`,children:t.name?.[0]||"T"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.subject||"Sem matÃ©ria"," â€¢ ",t.student_count||0," alunos"]})]})]}),e.jsx(n,{size:"sm",variant:"ghost",className:"whitespace-nowrap",children:"Ver Turma"})]})})})},t.id)):e.jsx(q,{icon:ce,title:"Nenhuma turma encontrada",description:"Crie sua primeira turma para comeÃ§ar a gerenciar suas aulas e atividades.",actionLabel:"Criar Primeira Turma",actionIcon:ge,action:()=>window.location.href="/dashboard/classes/new"})})]}),e.jsxs(w,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),"Atividades Recentes"]}),e.jsx(j,{to:"/dashboard/activities",children:e.jsxs(n,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(K,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:f.length>0?f.map((t,i)=>e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:t.class_name}),e.jsx("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),new Date(t.due_date).toLocaleDateString("pt-BR")]})})]}),e.jsx(J,{variant:t.status==="archived"?"secondary":new Date(t.due_date)<new Date?"destructive":"default",className:"whitespace-nowrap",children:t.status==="archived"?"Arquivada":new Date(t.due_date)<new Date?"Encerrada":"Aberta"})]})},t.id)):e.jsx(q,{icon:me,title:"Nenhuma atividade encontrada",description:"Suas atividades recentes aparecerÃ£o aqui."})})]})]}),d.length>0&&e.jsxs(w,{className:"p-6 mb-8 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20 border-2 border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/40",children:e.jsx(ot,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Alunos que Precisam de AtenÃ§Ã£o"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[d.length," aluno",d.length>1?"s":""," com desempenho abaixo de 6.0"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((t,i)=>e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:i*.05},className:"flex items-center gap-4 p-4 rounded-lg bg-white dark:bg-slate-900 border-2 border-yellow-200 dark:border-yellow-800 hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-white font-bold text-lg",children:t.name?.[0]||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(J,{className:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 text-xs",children:["MÃ©dia: ",t.avgGrade.toFixed(1)]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[t.totalActivities," atividade",t.totalActivities>1?"s":""]})]})]}),e.jsx(n,{size:"sm",variant:"outline",className:"whitespace-nowrap border-yellow-600 text-yellow-700 hover:bg-yellow-50",onClick:()=>C(`/dashboard/students/${t.id}`),children:"Ver Detalhes"})]},t.id))})]}),e.jsxs(w,{className:"p-6 mb-8 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"SubmissÃµes Pendentes de CorreÃ§Ã£o"]}),e.jsx(j,{to:"/dashboard/grading",children:e.jsxs(n,{variant:"ghost",size:"sm",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Ver Todas"}),e.jsx(K,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"space-y-3",children:L.length>0?L.map((t,i)=>e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-center justify-between p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all bg-white dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-white font-bold",children:t.student_name?.[0]||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.student_name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.activity_title}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Enviado em ",new Date(t.submitted_at).toLocaleDateString("pt-BR")]})]})]}),e.jsx(j,{to:`/dashboard/grading/${t.id}`,children:e.jsx(n,{size:"sm",className:"whitespace-nowrap bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white",children:"Corrigir Agora"})})]},t.id)):e.jsx(q,{icon:dt,title:"Nenhuma correÃ§Ã£o pendente!",description:"ParabÃ©ns! VocÃª estÃ¡ em dia com as correÃ§Ãµes. ðŸŽ‰"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Ae.map((t,i)=>e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(j,{to:t.href,children:e.jsxs(n,{size:"lg",className:`w-full whitespace-nowrap inline-flex items-center justify-center gap-2 bg-gradient-to-r ${t.gradient} hover:opacity-90 text-white h-16 text-lg`,children:[e.jsx(t.icon,{className:"w-6 h-6"}),e.jsx("span",{children:t.label})]})})},t.label))}),e.jsx(gt,{open:De,onClose:()=>{se(!1),re(null)},activity:Ce,onSuccess:t=>{console.log("âœ… Atividade postada:",t),_()}}),xe&&pe&&e.jsx(tt,{isOpen:xe,onClose:()=>{ue(!1),be(null)},event:pe,onEdit:()=>{C("/dashboard/calendar")},onDelete:()=>{_()}})]})};export{ga as default};
