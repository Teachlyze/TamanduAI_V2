import{d as Y,r as o,q as ht,a as Yt,u as Qt,s as S,l as B,j as n,p as ea,b as ta}from"./main-CzXMpjXe.js";import{S as pe}from"./StatCard-DsOWH6_o.js";import{C as ce}from"./card-BTOHZHKT.js";import{m as Fe,B as aa}from"./button-Dnvkx_Je.js";import{E as ra}from"./EmptyState-DQyHS83U.js";import{G as ia}from"./GradeCard-2zpgoEKh.js";import"./dialog-BOF5Uy8-.js";import{S as Ke,a as Ge,b as qe,c as ze,d as ae}from"./select-7sBaYMjw.js";import{u as sa}from"./use-toast-CTeziulW.js";import{S as _e}from"./star-CVxL32Mr.js";import{C as na}from"./circle-alert-NWXEuYxy.js";import{S as We}from"./sparkles-BVPkFfXR.js";import{C as oa}from"./circle-check-big-Cs0wgO6A.js";import{T as Ve}from"./target-CnQL5VTm.js";import{L as la}from"./lightbulb-CV-HtoDD.js";import{B as ca}from"./book-open-DmE2793b.js";import{T as da}from"./trophy-By5VmrWO.js";import{T as ua}from"./trending-up-BQt7X1H9.js";import{aZ as de,m as L,aE as xt,a_ as ma,ao as xe,a$ as bt,aC as Ie,b0 as fa,b1 as Pt,b2 as Ce,b3 as va,b4 as pa,b5 as ga,b6 as ya,b7 as ha,u as F,D as jt,Z as be,b8 as Pe,t as K,E as G,b9 as At,ba as wt,r as je,h as _t,bb as xa,bc as ba,bd as Pa,L as X,be as ja,bf as Aa,Q as kt,a as Ot,bg as Et,U as St,bh as wa,bi as _a,bj as ka,a7 as Rt,bk as Oa,bl as ye,q as Ea,bm as Sa,aq as Ue,R as Ra,v as Da,x as Na,y as Ia,o as Dt,G as Ca,bn as Ta,n as Ze,bo as Ma,a5 as He,z as La,J as Ba,M as $a,ai as Fa,B as ge,bp as Ka,V as Ga,W as ke,Y as qa,_ as Je,$ as Xe,a0 as Ye,X as Qe,a1 as za}from"./LineChart-B-hNa4W1.js";import{B as Wa,c as Va}from"./BarChart-CZ-GBNSR.js";import{a as Ua,b as Za,c as Ha,s as Ja,P as Xa}from"./PolarChart-DufRWkcn.js";import{f as et}from"./format-BcFT9btV.js";import{p as tt}from"./pt-BR-CuGSKEGQ.js";import"./badge-BYsVEm-v.js";import"./calendar-CKXbtU29.js";import"./message-square-BuI1D0YD.js";import"./SidebarPremium-CisyqOF_.js";import"./house-Byiee32G.js";import"./users-xUF4-Wbt.js";import"./file-text-DaGcLfjn.js";import"./graduation-cap-B-Dv4Kji.js";import"./chart-column-iyFjSldo.js";import"./message-circle-rrlqIsvy.js";import"./settings-BM8sKL77.js";import"./index-DtrkzmWq.js";import"./chevron-right-DpKMhJ61.js";import"./x-DF6W2AUE.js";import"./index-N9fWMuHy.js";import"./index-VWAVCbRK.js";import"./index-CSfy18lA.js";import"./index-D9F-hsl_.js";import"./chevron-down-DTSGKl7i.js";import"./check-cUGBO9da.js";import"./chevron-up-CDEj0Ifm.js";import"./index-BH5qIj1a.js";import"./en-US-B6HbAA6N.js";var Ya=["points","className","baseLinePoints","connectNulls"];function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},re.apply(null,arguments)}function Qa(e,t){if(e==null)return{};var a,r,i=er(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function er(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var at=e=>e&&e.x===+e.x&&e.y===+e.y,tr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return t.forEach(r=>{at(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),at(t[0])&&a[a.length-1].push(t[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},ue=(e,t)=>{var a=tr(e);t&&(a=[a.reduce((i,s)=>[...i,...s],[])]);var r=a.map(i=>i.reduce((s,l,d)=>"".concat(s).concat(d===0?"M":"L").concat(l.x,",").concat(l.y),"")).join("");return a.length===1?"".concat(r,"Z"):r},ar=(e,t,a)=>{var r=ue(e,a);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(ue(Array.from(t).reverse(),a).slice(1))},Nt=e=>{var{points:t,className:a,baseLinePoints:r,connectNulls:i}=e,s=Qa(e,Ya);if(!t||!t.length)return null;var l=Y("recharts-polygon",a);if(r&&r.length){var d=s.stroke&&s.stroke!=="none",p=ar(t,r,i);return o.createElement("g",{className:l},o.createElement("path",re({},de(s),{fill:p.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:p})),d?o.createElement("path",re({},de(s),{fill:"none",d:ue(t,i)})):null,d?o.createElement("path",re({},de(s),{fill:"none",d:ue(r,i)})):null)}var g=ue(t,i);return o.createElement("path",re({},de(s),{fill:g.slice(-1)==="Z"?s.fill:"none",className:l,d:g}))},Te=(e,t,a)=>{switch(t){case"angleAxis":return Ce(e,a);case"radiusAxis":return Pt(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Me=(e,t,a)=>{switch(t){case"angleAxis":return pa(e,a);case"radiusAxis":return va(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},ie=L([Te,xt,Ua,Me],ma),It=L([xe,Ha,ga,Ie],ya),se=L([xe,Te,xt,ie,Za,Me,bt,It,Ie],fa);L([xe,Te,ie,Me,bt,It,Ie],ha);var rr=(e,t)=>se(e,"angleAxis",t,!1),ir=L([rr],e=>{if(e)return e.map(t=>t.coordinate)}),sr=(e,t)=>se(e,"radiusAxis",t,!1),nr=L([sr],e=>{if(e)return e.map(t=>t.coordinate)}),or=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius"];function lr(e,t){if(e==null)return{};var a,r,i=cr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function cr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},$.apply(null,arguments)}function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?rt(Object(a),!0).forEach(function(r){dr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function dr(e,t,a){return(t=ur(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ur(e){var t=mr(e,"string");return typeof t=="symbol"?t:t+""}function mr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fr=(e,t,a,r)=>{var i="";return r.forEach((s,l)=>{var d=G(t,a,e,s);l?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},vr=e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:i,polarAngles:s,radialLines:l}=e;if(!s||!s.length||!l)return null;var d=me({stroke:"#ccc"},K(e));return o.createElement("g",{className:"recharts-polar-grid-angle"},s.map(p=>{var g=G(t,a,r,p),x=G(t,a,i,p);return o.createElement("line",$({key:"line-".concat(p)},d,{x1:g.x,y1:g.y,x2:x.x,y2:x.y}))}))},it=e=>{var{cx:t,cy:a,radius:r}=e,i=me({stroke:"#ccc",fill:"none"},K(e));return o.createElement("circle",$({},i,{className:Y("recharts-polar-grid-concentric-circle",e.className),cx:t,cy:a,r}))},st=e=>{var{radius:t}=e,a=me({stroke:"#ccc",fill:"none"},K(e));return o.createElement("path",$({},a,{className:Y("recharts-polar-grid-concentric-polygon",e.className),d:fr(t,e.cx,e.cy,e.polarAngles)}))},pr=e=>{var{polarRadius:t,gridType:a}=e;if(!t||!t.length)return null;var r=Math.max(...t),i=e.fill&&e.fill!=="none";return o.createElement("g",{className:"recharts-polar-grid-concentric"},i&&a==="circle"&&o.createElement(it,$({},e,{radius:r})),i&&a!=="circle"&&o.createElement(st,$({},e,{radius:r})),t.map((s,l)=>{var d=l;return a==="circle"?o.createElement(it,$({key:d},e,{fill:"none",radius:s})):o.createElement(st,$({key:d},e,{fill:"none",radius:s}))}))},Ct=e=>{var t,a,r,i,s,l,d,p,g,{gridType:x="polygon",radialLines:b=!0,angleAxisId:w=0,radiusAxisId:h=0,cx:C,cy:O,innerRadius:U,outerRadius:Z,polarAngles:q,polarRadius:z}=e,ee=lr(e,or),N=F(Pe),H=F(oe=>ir(oe,w)),E=F(oe=>nr(oe,h)),J=Array.isArray(q)?q:H,j=Array.isArray(z)?z:E;if(J==null||j==null)return null;var te=me(me({cx:(t=(a=N?.cx)!==null&&a!==void 0?a:C)!==null&&t!==void 0?t:0,cy:(r=(i=N?.cy)!==null&&i!==void 0?i:O)!==null&&r!==void 0?r:0,innerRadius:(s=(l=N?.innerRadius)!==null&&l!==void 0?l:U)!==null&&s!==void 0?s:0,outerRadius:(d=(p=N?.outerRadius)!==null&&p!==void 0?p:Z)!==null&&d!==void 0?d:0,polarAngles:J,polarRadius:j},ee),{},{zIndex:(g=ee.zIndex)!==null&&g!==void 0?g:jt.grid}),{outerRadius:ne}=te;return ne<=0?null:o.createElement(be,{zIndex:te.zIndex},o.createElement("g",{className:"recharts-polar-grid"},o.createElement(pr,$({gridType:x,radialLines:b},te,{polarAngles:J,polarRadius:j})),o.createElement(vr,$({gridType:x,radialLines:b},te,{polarAngles:J,polarRadius:j}))))};Ct.displayName="PolarGrid";var Oe={},Ee={},nt;function gr(){return nt||(nt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,r){if(a.length===0)return;let i=a[0],s=r(i);for(let l=1;l<a.length;l++){const d=a[l],p=r(d);p>s&&(s=p,i=d)}return i}e.maxBy=t})(Ee)),Ee}var ot;function yr(){return ot||(ot=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gr(),a=wt(),r=At();function i(s,l){if(s!=null)return t.maxBy(Array.from(s),r.iteratee(l??a.identity))}e.maxBy=i})(Oe)),Oe}var Se,lt;function hr(){return lt||(lt=1,Se=yr().maxBy),Se}var xr=hr();const br=ht(xr);var Re={},De={},ct;function Pr(){return ct||(ct=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,r){if(a.length===0)return;let i=a[0],s=r(i);for(let l=1;l<a.length;l++){const d=a[l],p=r(d);p<s&&(s=p,i=d)}return i}e.minBy=t})(De)),De}var dt;function jr(){return dt||(dt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pr(),a=wt(),r=At();function i(s,l){if(s!=null)return t.minBy(Array.from(s),r.iteratee(l??a.identity))}e.minBy=i})(Re)),Re}var Ne,ut;function Ar(){return ut||(ut=1,Ne=jr().minBy),Ne}var wr=Ar();const _r=ht(wr);var kr=["cx","cy","angle","axisLine"],Or=["angle","tickFormatter","stroke","tick"];function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(null,arguments)}function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?mt(Object(a),!0).forEach(function(r){Er(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Er(e,t,a){return(t=Sr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Sr(e){var t=Rr(e,"string");return typeof t=="symbol"?t:t+""}function Rr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tt(e,t){if(e==null)return{};var a,r,i=Dr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Dr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Nr="radiusAxis";function Ir(e){var t=_t();return o.useEffect(()=>(t(xa(e)),()=>{t(ba(e))})),null}var Cr=(e,t,a,r)=>{var{coordinate:i}=e;return G(a,r,i,t)},Tr=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},Mr=(e,t,a,r)=>{var i=br(r,l=>l.coordinate||0),s=_r(r,l=>l.coordinate||0);return{cx:t,cy:a,startAngle:e,endAngle:e,innerRadius:s?.coordinate||0,outerRadius:i?.coordinate||0,clockWise:!1}},Lr=(e,t)=>{var{cx:a,cy:r,angle:i,axisLine:s}=e,l=Tt(e,kr),d=t.reduce((b,w)=>[Math.min(b[0],w.coordinate),Math.max(b[1],w.coordinate)],[1/0,-1/0]),p=G(a,r,d[0],i),g=G(a,r,d[1],i),x=V(V(V({},K(l)),{},{fill:"none"},K(s)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return o.createElement("line",fe({className:"recharts-polar-radius-axis-line"},x))},Br=(e,t,a)=>{var r;return o.isValidElement(e)?r=o.cloneElement(e,t):typeof e=="function"?r=e(t):r=o.createElement(St,fe({},t,{className:"recharts-polar-radius-axis-tick-value"}),a),r},$r=(e,t)=>{var{angle:a,tickFormatter:r,stroke:i,tick:s}=e,l=Tt(e,Or),d=Tr(e.orientation),p=K(l),g=kt(s),x=t.map((b,w)=>{var h=Cr(b,e.angle,e.cx,e.cy),C=V(V(V(V({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(h.x,", ").concat(h.y,")")},p),{},{stroke:"none",fill:i},g),{},{index:w},h),{},{payload:b});return o.createElement(X,fe({className:Y("recharts-polar-radius-axis-tick",Et(s)),key:"tick-".concat(b.coordinate)},Ot(e,b,w)),Br(s,C,r?r(b.value,w):b.value))});return o.createElement(X,{className:"recharts-polar-radius-axis-ticks"},x)},Fr=e=>{var{radiusAxisId:t}=e,a=F(Pe),r=F(p=>ie(p,"radiusAxis",t)),i=F(p=>se(p,"radiusAxis",t,!1));if(a==null||!i||!i.length||r==null)return null;var s=V(V(V({},e),{},{scale:r},a),{},{radius:a.outerRadius}),{tick:l,axisLine:d}=s;return o.createElement(be,{zIndex:s.zIndex},o.createElement(X,{className:Y("recharts-polar-radius-axis",Nr,s.className)},d&&Lr(s,i),l&&$r(s,i),o.createElement(ja,Mr(s.angle,s.cx,s.cy,i),o.createElement(Aa,{label:s.label}),s.children)))};function Mt(e){var t=je(e,Pa);return o.createElement(o.Fragment,null,o.createElement(Ir,{domain:t.domain,id:t.radiusAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDataOverflow:t.allowDataOverflow,reversed:t.reversed,includeHidden:t.includeHidden,allowDecimals:t.allowDecimals,ticks:t.ticks,tickCount:t.tickCount,tick:t.tick}),o.createElement(Fr,t))}Mt.displayName="PolarRadiusAxis";var Kr=["children"];function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q.apply(null,arguments)}function ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(a),!0).forEach(function(r){Gr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ft(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Gr(e,t,a){return(t=qr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qr(e){var t=zr(e,"string");return typeof t=="symbol"?t:t+""}function zr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wr(e,t){if(e==null)return{};var a,r,i=Vr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Vr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var vt=1e-5,Ur=Math.cos(ye(45)),Zr="angleAxis";function Hr(e){var t=_t(),a=o.useMemo(()=>{var{children:s}=e,l=Wr(e,Kr);return l},[e]),r=F(s=>Ce(s,a.id)),i=a===r;return o.useEffect(()=>(t(wa(a)),()=>{t(_a(a))}),[t,a]),i?e.children:null}var Jr=(e,t)=>{var{cx:a,cy:r,radius:i,orientation:s,tickSize:l}=t,d=l||8,p=G(a,r,i,e.coordinate),g=G(a,r,i+(s==="inner"?-1:1)*d,e.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}},Xr=(e,t)=>{var a=Math.cos(ye(-e.coordinate));return a>vt?t==="outer"?"start":"end":a<-vt?t==="outer"?"end":"start":"middle"},Yr=e=>{var t=Math.cos(ye(-e.coordinate)),a=Math.sin(ye(-e.coordinate));return Math.abs(t)<=Ur?a>0?"start":"end":"middle"},Qr=e=>{var{cx:t,cy:a,radius:r,axisLineType:i,axisLine:s,ticks:l}=e;if(!s)return null;var d=W(W({},K(e)),{},{fill:"none"},K(s));if(i==="circle")return o.createElement(Oa,Q({className:"recharts-polar-angle-axis-line"},d,{cx:t,cy:a,r}));var p=l.map(g=>G(t,a,r,g.coordinate));return o.createElement(Nt,Q({className:"recharts-polar-angle-axis-line"},d,{points:p}))},ei=e=>{var{tick:t,tickProps:a,value:r}=e;return t?o.isValidElement(t)?o.cloneElement(t,a):typeof t=="function"?t(a):o.createElement(St,Q({},a,{className:"recharts-polar-angle-axis-tick-value"}),r):null},ti=e=>{var{tick:t,tickLine:a,tickFormatter:r,stroke:i,ticks:s}=e,l=K(e),d=kt(t),p=W(W({},l),{},{fill:"none"},K(a)),g=s.map((x,b)=>{var w=Jr(x,e),h=Xr(x,e.orientation),C=Yr(x),O=W(W(W({},l),{},{textAnchor:h,verticalAnchor:C,stroke:"none",fill:i},d),{},{index:b,payload:x,x:w.x2,y:w.y2});return o.createElement(X,Q({className:Y("recharts-polar-angle-axis-tick",Et(t)),key:"tick-".concat(x.coordinate)},Ot(e,x,b)),a&&o.createElement("line",Q({className:"recharts-polar-angle-axis-tick-line"},p,w)),o.createElement(ei,{tick:t,tickProps:O,value:r?r(x.value,b):x.value}))});return o.createElement(X,{className:"recharts-polar-angle-axis-ticks"},g)},ai=e=>{var{angleAxisId:t}=e,a=F(Pe),r=F(d=>ie(d,"angleAxis",t)),i=Rt(),s=F(d=>se(d,"angleAxis",t,i));if(a==null||!s||!s.length||r==null)return null;var l=W(W(W({},e),{},{scale:r},a),{},{radius:a.outerRadius,ticks:s});return o.createElement(be,{zIndex:l.zIndex},o.createElement(X,{className:Y("recharts-polar-angle-axis",Zr,l.className)},o.createElement(Qr,l),o.createElement(ti,l)))};function Lt(e){var t=je(e,ka);return o.createElement(Hr,{id:t.angleAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:t.reversed,includeHidden:!1,allowDecimals:t.allowDecimals,tickCount:t.tickCount,ticks:t.ticks,tick:t.tick,domain:t.domain},o.createElement(ai,t))}Lt.displayName="PolarAngleAxis";function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pt(Object(a),!0).forEach(function(r){ri(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ri(e,t,a){return(t=ii(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ii(e){var t=si(e,"string");return typeof t=="symbol"?t:t+""}function si(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bt=(e,t)=>ie(e,"radiusAxis",t),ni=L([Bt],e=>{if(e!=null)return{scale:e}}),oi=L([Pt,Bt],(e,t)=>{if(!(e==null||t==null))return he(he({},e),{},{scale:t})}),li=(e,t,a,r)=>se(e,"radiusAxis",t,r),$t=(e,t,a)=>Ce(e,a),Ft=(e,t,a)=>ie(e,"angleAxis",a),ci=L([$t,Ft],(e,t)=>{if(!(e==null||t==null))return he(he({},e),{},{scale:t})}),di=(e,t,a,r)=>se(e,"angleAxis",a,r),ui=L([$t,Ft,Pe],(e,t,a)=>{if(!(a==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:a.cx,cy:a.cy}}),mi=(e,t,a,r,i)=>i,fi=L([xe,oi,li,ci,di],(e,t,a,r,i)=>Sa(e,"radiusAxis")?Ue(t,a,!1):Ue(r,i,!1)),vi=L([Ja,mi],(e,t)=>{if(e!=null){var a=e.find(r=>r.type==="radar"&&t===r.id);return a?.dataKey}}),pi=L([ni,ui,Ea,vi,fi],(e,t,a,r,i)=>{var{chartData:s,dataStartIndex:l,dataEndIndex:d}=a;if(!(e==null||t==null||s==null||i==null||r==null)){var p=s.slice(l,d+1);return _i({radiusAxis:e,angleAxis:t,displayedData:p,dataKey:r,bandSize:i})}}),gi=["id"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ve.apply(null,arguments)}function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gt(Object(a),!0).forEach(function(r){yi(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function yi(e,t,a){return(t=hi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hi(e){var t=xi(e,"string");return typeof t=="symbol"?t:t+""}function xi(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bi(e,t){if(e==null)return{};var a,r,i=Pi(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Pi(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Le(e,t){return e&&e!=="none"?e:t}var ji=e=>{var{dataKey:t,name:a,stroke:r,fill:i,legendType:s,hide:l}=e;return[{inactive:l,dataKey:t,type:s,color:Le(r,i),value:Dt(a,t),payload:e}]};function Ai(e){var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:s,hide:l,tooltipType:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,nameKey:void 0,dataKey:t,name:Dt(s,t),hide:l,type:d,color:Le(a,i),unit:""}}}function wi(e){var{points:t,props:a}=e,{dot:r,dataKey:i}=a,{id:s}=a,l=bi(a,gi),d=K(l);return o.createElement(Ka,{points:t,dot:r,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:i,baseProps:d})}function _i(e){var{radiusAxis:t,angleAxis:a,displayedData:r,dataKey:i,bandSize:s}=e,{cx:l,cy:d}=a,p=!1,g=[],x=a.type!=="number"?s??0:0;r.forEach((w,h)=>{var C=Ze(w,a.dataKey,h),O=Ze(w,i),U=a.scale(C)+x,Z=Array.isArray(O)?Ma(O):O,q=He(Z)?0:t.scale(Z);Array.isArray(O)&&O.length>=2&&(p=!0),g.push(T(T({},G(l,d,q,U)),{},{name:C,value:O,cx:l,cy:d,radius:q,angle:U,payload:w}))});var b=[];return p&&g.forEach(w=>{if(Array.isArray(w.value)){var h=w.value[0],C=He(h)?0:t.scale(h);b.push(T(T({},w),{},{radius:C},G(l,d,C,w.angle)))}else b.push(w)}),{points:g,isRange:p,baseLinePoints:b}}function ki(e){var{showLabels:t,points:a,children:r}=e,i=a.map(s=>{var l,d={x:s.x,y:s.y,width:0,lowerWidth:0,upperWidth:0,height:0};return T(T({},d),{},{value:(l=s.value)!==null&&l!==void 0?l:"",payload:s.payload,parentViewBox:void 0,viewBox:d,fill:void 0})});return o.createElement(Fa,{value:t?i:void 0},r)}function Oi(e){var{points:t,baseLinePoints:a,props:r}=e;if(t==null)return null;var{shape:i,isRange:s,connectNulls:l}=r,d=x=>{var{onMouseEnter:b}=r;b&&b(r,x)},p=x=>{var{onMouseLeave:b}=r;b&&b(r,x)},g;return o.isValidElement(i)?g=o.cloneElement(i,T(T({},r),{},{points:t})):typeof i=="function"?g=i(T(T({},r),{},{points:t})):g=o.createElement(Nt,ve({},de(r),{onMouseEnter:d,onMouseLeave:p,points:t,baseLinePoints:s?a:void 0,connectNulls:l})),o.createElement(X,{className:"recharts-radar-polygon"},g,o.createElement(wi,{props:r,points:t}))}var yt=(e,t,a)=>(r,i)=>{var s=e&&e[Math.floor(i*t)];return s?T(T({},r),{},{x:ge(s.x,r.x,a),y:ge(s.y,r.y,a)}):T(T({},r),{},{x:ge(r.cx,r.x,a),y:ge(r.cy,r.y,a)})};function Ei(e){var{props:t,previousPointsRef:a,previousBaseLinePointsRef:r}=e,{points:i,baseLinePoints:s,isAnimationActive:l,animationBegin:d,animationDuration:p,animationEasing:g,onAnimationEnd:x,onAnimationStart:b}=t,w=a.current,h=r.current,C=w?w.length/i.length:1,O=h?h.length/s.length:1,U=La(t,"recharts-radar-"),[Z,q]=o.useState(!1),z=!Z,ee=o.useCallback(()=>{typeof x=="function"&&x(),q(!1)},[x]),N=o.useCallback(()=>{typeof b=="function"&&b(),q(!0)},[b]);return o.createElement(ki,{showLabels:z,points:i},o.createElement(Ba,{animationId:U,begin:d,duration:p,isActive:l,easing:g,key:"radar-".concat(U),onAnimationEnd:ee,onAnimationStart:N},H=>{var E=H===1?i:i.map(yt(w,C,H)),J=H===1?s:s?.map(yt(h,O,H));return H>0&&(a.current=E,r.current=J),o.createElement(Oi,{points:E,baseLinePoints:J,props:t})}),o.createElement($a,{label:t.label}),t.children)}function Si(e){var t=o.useRef(void 0),a=o.useRef(void 0);return o.createElement(Ei,{props:e,previousPointsRef:t,previousBaseLinePointsRef:a})}var Ri={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ca.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",zIndex:jt.area};function Di(e){var{hide:t,className:a,points:r}=e;if(t)return null;var i=Y("recharts-radar",a);return o.createElement(be,{zIndex:e.zIndex},o.createElement(X,{className:i},o.createElement(Si,e)),o.createElement(Ta,{points:r,mainColor:Le(e.stroke,e.fill),itemDataKey:e.dataKey,activeDot:e.activeDot}))}function Ni(e){var t=Rt(),a=F(r=>pi(r,e.radiusAxisId,e.angleAxisId,t,e.id));return a?.points==null?null:o.createElement(Di,ve({},e,{points:a?.points,baseLinePoints:a?.baseLinePoints,isRange:a?.isRange}))}function Kt(e){var t=je(e,Ri);return o.createElement(Ra,{id:t.id,type:"radar"},a=>o.createElement(o.Fragment,null,o.createElement(Da,{type:"radar",id:a,data:void 0,dataKey:t.dataKey,hide:t.hide,angleAxisId:t.angleAxisId,radiusAxisId:t.radiusAxisId}),o.createElement(Na,{legendPayload:ji(t)}),o.createElement(Ia,{fn:Ai,args:t}),o.createElement(Ni,ve({},t,{id:a}))))}Kt.displayName="Radar";var Ii=["axis"],Ci={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ti=o.forwardRef((e,t)=>{var a=je(e,Ci);return o.createElement(Xa,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ii,tooltipPayloadSearcher:Ga,categoricalChartProps:a,ref:t})});const Ss=()=>{const{user:e}=Yt(),t=Qt(),{toast:a}=sa(),[r,i]=o.useState(!0),[s,l]=o.useState(!1),[d,p]=o.useState(null),[g,x]=o.useState(0),[b,w]=o.useState(!0),[h,C]=o.useState({avgGrade:0,totalActivities:0,completedActivities:0,ranking:null}),[O,U]=o.useState([]),[Z,q]=o.useState([]),[z,ee]=o.useState([]),[N,H]=o.useState([]),[E,J]=o.useState("all"),[j,te]=o.useState("all"),[ne,oe]=o.useState([]);o.useEffect(()=>{e?.id&&(Gt(),Ae())},[e]);const Ae=async()=>{try{w(!0);const c=new Date;c.setHours(0,0,0,0);const{data:u,error:f}=await S.from("ai_recommendations_usage").select("id").eq("student_id",e.id).gte("created_at",c.toISOString());f?(B.error("[AI Usage] Erro ao buscar contador:",f),x(0)):x(u?.length||0)}catch(c){B.error("[AI Usage] Erro ao buscar contador:",c),x(0)}finally{w(!1)}},Gt=async()=>{try{i(!0),await Promise.all([zt(),Wt(),Vt(),Ut(),Zt(),qt()])}catch(c){B.error("Erro ao carregar dados de desempenho:",c)}finally{i(!1)}},qt=async()=>{try{const{data:c}=await S.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student"),u=c?.map(v=>v.class_id)||[],{data:f}=await S.from("classes").select("id, name, subject").in("id",u);oe(f||[])}catch(c){B.error("Erro ao carregar turmas:",c)}},zt=async()=>{try{const{data:c}=await S.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student");let u=c?.map(k=>k.class_id)||[];if(E!=="all"&&(u=u.filter(k=>k===E)),u.length===0){C({avgGrade:0,totalActivities:0,completedActivities:0,ranking:null});return}const{data:f}=await S.from("activity_class_assignments").select("activity_id").in("class_id",u),v=f?.map(k=>k.activity_id)||[],P=v.length;let m=S.from("submissions").select("activity_id, status, grade, submitted_at").eq("student_id",e.id).in("activity_id",v);if(j!=="all"){const k=new Date;let A=new Date;j==="week"?A.setDate(k.getDate()-7):j==="month"?A.setMonth(k.getMonth()-1):j==="semester"&&A.setMonth(k.getMonth()-6),m=m.gte("submitted_at",A.toISOString())}const{data:R}=await m,y=R?.length||0,I=R?.filter(k=>k.grade!==null)||[],_=I.length>0?I.reduce((k,A)=>k+parseFloat(A.grade),0)/I.length:0;C({avgGrade:_,totalActivities:P,completedActivities:y,ranking:null})}catch(c){B.error("Erro ao carregar stats:",c)}},Wt=async()=>{try{const{data:c}=await S.from("submissions").select("id, grade, feedback, submitted_at, status, activity_id").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!1}).limit(10),u=c?.map(A=>A.activity_id)||[],{data:f}=await S.from("activities").select("id, title, max_score").in("id",u),v={};f?.forEach(A=>{v[A.id]=A});const{data:P}=await S.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),m=P?.map(A=>A.class_id).filter(Boolean)||[],{data:R}=await S.from("classes").select("id, name").in("id",m),y={};R?.forEach(A=>{y[A.id]=A});const I={},_={};P?.forEach(A=>{I[A.activity_id]=y[A.class_id]?.name,_[A.activity_id]=A.class_id});const k=(c||[]).map(A=>({...A,activity_title:v[A.activity_id]?.title,max_score:v[A.activity_id]?.max_score,class_name:I[A.activity_id],class_id:_[A.activity_id]}));U(k)}catch(c){B.error("Erro ao carregar notas recentes:",c)}},Vt=async()=>{try{const{data:c}=await S.from("submissions").select("grade, submitted_at, activity_id, activity:activities(max_score)").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!0}).limit(20),u=c?.map(m=>m.activity_id)||[],{data:f}=await S.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),v={};f?.forEach(m=>{v[m.activity_id]=m.class_id});const P=(c||[]).map(m=>({date:et(new Date(m.submitted_at),"dd/MM",{locale:tt}),fullDate:m.submitted_at,nota:parseFloat(m.grade)||0,maxScore:m.activity?.max_score||10,activity_id:m.activity_id,class_id:v[m.activity_id]}));q(P)}catch(c){B.error("Erro ao carregar evoluÃ§Ã£o:",c)}},Ut=async()=>{try{const{data:c}=await S.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student"),u=c?.map(m=>m.class_id)||[],{data:f}=await S.from("classes").select("id, name, subject").in("id",u),v={};f?.forEach(m=>{v[m.id]=m});const P=await Promise.all((c||[]).map(async m=>{const{data:R}=await S.from("activity_class_assignments").select("activity_id").eq("class_id",m.class_id),y=R?.map(M=>M.activity_id)||[],{data:I}=await S.from("submissions").select("id, grade, submitted_at, activity_id").eq("student_id",e.id).in("activity_id",y).not("grade","is",null).order("submitted_at",{ascending:!0}),_=I?.map(M=>M.activity_id)||[],{data:k}=await S.from("activities").select("id, title, max_score").in("id",_),A={};k?.forEach(M=>{A[M.id]=M});const D=I?.map(M=>parseFloat(M.grade))||[],le=D.length>0?D.reduce((M,Xt)=>M+Xt,0)/D.length:0,Jt=(I||[]).map(M=>({date:et(new Date(M.submitted_at),"dd/MM",{locale:tt}),grade:parseFloat(M.grade)}));return{name:v[m.class_id]?.name||"Turma",media:le,history:Jt}}));ee(P.sort((m,R)=>R.media-m.media))}catch(c){B.error("Erro ao carregar desempenho por turma:",c)}},Zt=async()=>{try{const{data:c}=await S.from("submissions").select(`
          grade,
          submitted_at,
          activity_id,
          activity:activities(type, max_score)
        `).eq("student_id",e.id).not("grade","is",null),u=c?.map(m=>m.activity_id)||[],{data:f}=await S.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",u),v={};f?.forEach(m=>{v[m.activity_id]=m.class_id});const P=(c||[]).map(m=>({grade:parseFloat(m.grade),maxScore:parseFloat(m.activity?.max_score),type:m.activity?.type,submitted_at:m.submitted_at,class_id:v[m.activity_id]}));H(P)}catch(c){B.error("Erro ao carregar radar de habilidades:",c)}},Ht=async()=>{const c=`ai_recommendations_${e.id}`;try{l(!0);const u=localStorage.getItem(c);if(u){const{recommendations:y,timestamp:I}=JSON.parse(u),_=Date.now()-I,k=1800*1e3;if(_<k){p(y),l(!1),a({title:"âœ… RecomendaÃ§Ãµes carregadas",description:"Usando anÃ¡lise recente do cache"});return}}const f={avgGrade:h.avgGrade,totalActivities:h.totalActivities,completedActivities:h.completedActivities,recentGrades:O.slice(0,5).map(y=>({activityTitle:y.activity_title,grade:y.submission?.grade,maxScore:y.max_score,submittedAt:y.submission?.submitted_at})),classPerformance:z.map(y=>({className:y.name,averageGrade:y.media,totalActivities:y.totalActivities||0})),radarData:N};a({title:"ðŸ¤– Gerando recomendaÃ§Ãµes...",description:"Aguarde enquanto a IA analisa seu desempenho"});const{data:v}=await S.auth.getSession(),P=v?.session?.access_token,m=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/ai-study-recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({studentId:e.id,performanceData:f})});let R;if(m.ok){const y=await m.json();if(y.limitReached){B.warn("[AI] Limite diÃ¡rio atingido:",y),l(!1),await Ae(),a({title:"â° Limite DiÃ¡rio Atingido",description:y.message||"VocÃª jÃ¡ gerou 3 recomendaÃ§Ãµes hoje. Tente novamente amanhÃ£!",variant:"destructive",duration:5e3});return}if(await Ae(),y.success&&y.recommendations&&Array.isArray(y.recommendations))R={strengths:y.recommendations.filter(_=>_.priority==="low"||_.priority==="medium").map(_=>_.description),improvements:y.recommendations.filter(_=>_.priority==="high").map(_=>_.description),tips:y.recommendations.map(_=>`ðŸŽ¯ ${_.title}: ${_.reason}`).slice(0,3)};else throw new Error("Resposta da IA sem recomendaÃ§Ãµes vÃ¡lidas")}else{B.warn("[AI] Usando fallback local - Edge Function falhou"),a({title:"â„¹ï¸ Usando anÃ¡lise local",description:"API de IA indisponÃ­vel. Gerando recomendaÃ§Ãµes com base nos seus dados.",duration:3e3});const y=z.filter(D=>D.media<7).sort((D,le)=>D.media-le.media),I=z.filter(D=>D.media>=8).sort((D,le)=>le.media-D.media),_=[];y.length>0?y.slice(0,2).forEach(D=>{_.push(`Revisar conceitos de ${D.name} onde as notas foram menores (mÃ©dia: ${D.media.toFixed(1)})`)}):_.push("Manter o ritmo de estudos atual"),O.some(D=>D.status==="draft")&&_.push("Completar atividades pendentes antes do prazo"),_.push("Participar mais das discussÃµes em sala");const k=[];h.avgGrade>=8?k.push("Ã“timo desempenho geral nas atividades"):h.avgGrade>=7?k.push("Bom desempenho nas atividades"):k.push("Mostrando esforÃ§o e dedicaÃ§Ã£o"),I.length>0&&I.slice(0,2).forEach(D=>{k.push(`Excelente em ${D.name} (mÃ©dia: ${D.media.toFixed(1)})`)}),(h.totalActivities>0?h.completedActivities/h.totalActivities*100:0)>=80&&k.push("ConsistÃªncia nas entregas dentro do prazo"),R={strengths:k,improvements:_,tips:["ðŸ“š Reserve 30min diÃ¡rios para revisÃ£o","âœï¸ Pratique mais questÃµes abertas","ðŸŽ¯ EstabeleÃ§a metas semanais de estudo","ðŸ‘¥ Forme grupos de estudo com colegas","â“ Tire dÃºvidas com professores"].slice(0,3)}}p(R),localStorage.setItem(c,JSON.stringify({recommendations:R,timestamp:Date.now()})),a({title:"âœ… RecomendaÃ§Ãµes geradas!",description:"Confira as sugestÃµes personalizadas abaixo"})}catch(u){B.error("Erro ao gerar recomendaÃ§Ãµes:",u),a({title:"âŒ Erro ao gerar recomendaÃ§Ãµes",description:"Tente novamente mais tarde",variant:"destructive"})}finally{l(!1)}};o.useMemo(()=>{if(!O.length)return h;let c=[...O];if(E!=="all"&&(c=c.filter(v=>v.class_id===E)),j!=="all"){const v=new Date;let P=new Date;j==="week"?P.setDate(v.getDate()-7):j==="month"?P.setMonth(v.getMonth()-1):j==="semester"&&P.setMonth(v.getMonth()-6),c=c.filter(m=>m.submitted_at&&new Date(m.submitted_at)>=P)}const u=c.filter(v=>v.grade!==null),f=u.length>0?u.reduce((v,P)=>v+parseFloat(P.grade),0)/u.length:0;return{...h,avgGrade:f,completedActivities:c.length}},[h,O,E,j]);const Be=o.useMemo(()=>{let c=[...Z];if(E!=="all"&&(c=c.filter(u=>u.class_id===E)),j!=="all"){const u=new Date;let f=new Date;j==="week"?f.setDate(u.getDate()-7):j==="month"?f.setMonth(u.getMonth()-1):j==="semester"&&f.setMonth(u.getMonth()-6),c=c.filter(v=>{if(!v.fullDate)return!1;const P=new Date(v.fullDate);return P>=f&&P<=u})}return c},[Z,E,j]),we=o.useMemo(()=>{let c=[...z];return E!=="all"&&(c=c.filter(u=>{const f=ne.find(v=>v.id===E);return f&&u.name===f.name})),j!=="all"&&(c=c.map(u=>{const f=new Date;let v=new Date;j==="week"?v.setDate(f.getDate()-7):j==="month"?v.setMonth(f.getMonth()-1):j==="semester"&&v.setMonth(f.getMonth()-6);const P=(u.history||[]).filter(y=>!0),m=P.map(y=>y.grade),R=m.length>0?m.reduce((y,I)=>y+I,0)/m.length:0;return{...u,media:R,history:P}})),c.sort((u,f)=>f.media-u.media)},[z,E,j,ne]),$e=o.useMemo(()=>{let c=[...N];if(E!=="all"&&(c=c.filter(f=>f.class_id===E)),j!=="all"){const f=new Date;let v=new Date;j==="week"?v.setDate(f.getDate()-7):j==="month"?v.setMonth(f.getMonth()-1):j==="semester"&&v.setMonth(f.getMonth()-6),c=c.filter(P=>{if(!P.submitted_at)return!1;const m=new Date(P.submitted_at);return m>=v&&m<=f})}const u=[{skill:"Objetivas",value:0,count:0},{skill:"Abertas",value:0,count:0},{skill:"Mistas",value:0,count:0}];return c.forEach(f=>{const v=f.grade,P=f.maxScore,m=f.type;if(!v||!P||P===0)return;const R=v/P*100;m==="objective"?(u[0].value+=R,u[0].count++):m==="open"?(u[1].value+=R,u[1].count++):m==="mixed"&&(u[2].value+=R,u[2].count++)}),u.map(f=>({skill:f.skill,value:f.count>0?Math.round(f.value/f.count):0}))},[N,E,j]);return r?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(ea,{size:"lg"})}):n.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:[n.jsx(Fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:n.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-3",children:[n.jsx(_e,{className:"w-8 h-8 text-yellow-600"}),"Meu Desempenho"]}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Acompanhe suas notas e evoluÃ§Ã£o acadÃªmica"})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx(aa,{onClick:Ht,disabled:s||h.totalActivities===0||g>=3,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ta,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):g>=3?n.jsxs(n.Fragment,{children:[n.jsx(na,{className:"w-4 h-4 mr-2"}),"Limite DiÃ¡rio Atingido"]}):n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"w-4 h-4 mr-2"}),"Gerar RecomendaÃ§Ãµes com IA"]})}),!b&&n.jsxs("span",{className:`text-sm ${g>=3?"text-red-600 dark:text-red-400 font-semibold":g>=2?"text-orange-600 dark:text-orange-400 font-medium":"text-slate-500 dark:text-slate-400"}`,children:[g,"/3 utilizadas hoje"]})]})]})}),d&&n.jsx(Fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:n.jsxs(ce,{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20 border-2 border-purple-200 dark:border-purple-800",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[n.jsx(We,{className:"w-6 h-6 text-purple-600"}),"RecomendaÃ§Ãµes Personalizadas da IA"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-green-700 dark:text-green-400 mb-3 flex items-center gap-2",children:[n.jsx(oa,{className:"w-5 h-5"}),"Seus Pontos Fortes"]}),n.jsx("ul",{className:"space-y-2",children:d.strengths?.map((c,u)=>n.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-green-200 dark:border-green-800",children:["â€¢ ",c]},u))||n.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-orange-700 dark:text-orange-400 mb-3 flex items-center gap-2",children:[n.jsx(Ve,{className:"w-5 h-5"}),"Ãreas para Melhorar"]}),n.jsx("ul",{className:"space-y-2",children:d.improvements?.map((c,u)=>n.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:["â€¢ ",c]},u))||n.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[n.jsx(la,{className:"w-5 h-5"}),"Dicas de Estudo"]}),n.jsx("ul",{className:"space-y-2",children:d.tips?.map((c,u)=>n.jsx("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:c},u))||n.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]})]})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[n.jsxs(Ke,{value:E,onValueChange:J,children:[n.jsx(Ge,{className:"w-full md:w-64",children:n.jsx(qe,{placeholder:"Todas as turmas"})}),n.jsxs(ze,{children:[n.jsx(ae,{value:"all",children:"Todas as turmas"}),ne.map(c=>n.jsx(ae,{value:c.id,children:c.name},c.id))]})]}),n.jsxs(Ke,{value:j,onValueChange:te,children:[n.jsx(Ge,{className:"w-full md:w-64",children:n.jsx(qe,{placeholder:"Todo o perÃ­odo"})}),n.jsxs(ze,{children:[n.jsx(ae,{value:"all",children:"Todo o perÃ­odo"}),n.jsx(ae,{value:"week",children:"Ãšltima semana"}),n.jsx(ae,{value:"month",children:"Ãšltimo mÃªs"}),n.jsx(ae,{value:"semester",children:"Ãšltimo semestre"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsx(pe,{icon:_e,value:h.avgGrade>0?h.avgGrade.toFixed(1):"--",label:"MÃ©dia Geral",gradient:"yellow"}),n.jsx(pe,{icon:Ve,value:h.completedActivities,label:"Atividades ConcluÃ­das",gradient:"green"}),n.jsx(pe,{icon:ca,value:h.totalActivities,label:"Total de Atividades",gradient:"blue"}),n.jsx(pe,{icon:da,value:h.ranking||"--",label:"PosiÃ§Ã£o no Ranking",gradient:"purple"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[Be.length>0&&n.jsxs(ce,{className:"p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[n.jsx(ua,{className:"w-6 h-6 text-green-600"}),"EvoluÃ§Ã£o das Notas"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx(ke,{width:"100%",height:300,className:"min-w-[400px]",children:n.jsxs(qa,{data:Be,margin:{top:5,right:20,left:0,bottom:5},children:[n.jsx(Je,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),n.jsx(Xe,{dataKey:"date",stroke:"#64748b",tick:{fontSize:12}}),n.jsx(Ye,{stroke:"#64748b",domain:[0,"auto"],tick:{fontSize:12}}),n.jsx(Qe,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),n.jsx(za,{type:"monotone",dataKey:"nota",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:6},name:"Nota"})]})})})]}),n.jsxs(ce,{className:"p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"ðŸ“ Ãšltimas Notas"}),O.length>0?n.jsx("div",{className:"space-y-4",children:O.map((c,u)=>n.jsx(ia,{grade:c,onViewDetails:()=>t(`/students/activities/${c.activity_id}`),index:u},c.id))}):n.jsx(ra,{icon:_e,title:"Nenhuma nota ainda",description:"Complete suas atividades para ver suas notas aqui.",variant:"default"})]})]}),n.jsxs("div",{className:"space-y-8",children:[we.length>0&&n.jsxs(ce,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"ðŸ“Š Por Turma"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx(ke,{width:"100%",height:Math.max(150,we.length*50),className:"min-w-[300px]",children:n.jsxs(Wa,{data:we,layout:"vertical",margin:{left:20,right:20,top:10,bottom:10},children:[n.jsx(Je,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),n.jsx(Xe,{type:"number",stroke:"#64748b",domain:[0,10]}),n.jsx(Ye,{type:"category",dataKey:"name",stroke:"#64748b",width:120,tick:{fontSize:12}}),n.jsx(Qe,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),n.jsx(Va,{dataKey:"media",fill:"#3b82f6",radius:[0,8,8,0],name:"MÃ©dia"})]})})})]}),$e.length>0&&n.jsxs(ce,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"ðŸŽ¯ Por Tipo"}),n.jsx(ke,{width:"100%",height:220,children:n.jsxs(Ti,{data:$e,margin:{top:10,right:10,bottom:10,left:10},children:[n.jsx(Ct,{stroke:"#e2e8f0"}),n.jsx(Lt,{dataKey:"skill",stroke:"#64748b",tick:{fontSize:12}}),n.jsx(Mt,{stroke:"#64748b",domain:[0,100]}),n.jsx(Kt,{name:"Desempenho",dataKey:"value",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6})]})})]})]})]})]})};export{Ss as default};
