import{t as D,u as I,r as e,s as $,l as B,j as t,p as T}from"./main--zAWDl51.js";import{B as b,m as _}from"./button-C_V7g8cA.js";import{D as P,g as x}from"./DashboardHeader-CXdzO2BU.js";import{S as g}from"./StatsCard-mRekzbqi.js";import{E as F}from"./EmptyState-8gRtOYrE.js";import"./card-CLX4UMWo.js";import{A as q}from"./ActivityCard-DvzRCP8F.js";import{S as Q}from"./SearchInput-CWSsSs42.js";import"./dropdown-menu-D0mYKqvK.js";import"./input-Bs41O7Fb.js";import"./label-CISVKdgd.js";import{C as V}from"./classService-DDGixHj3.js";import{A as z}from"./arrow-left-Di5UEUQK.js";import{F as m}from"./file-text-B2IQk9lY.js";import{P as C}from"./plus-BNtwMxGF.js";import"./chevron-right-CHTWP7iA.js";import"./badge-DEf2O6Nf.js";import"./circle-alert-BtJGe8bW.js";import"./calendar-DeEHT-Ew.js";import"./users-C9tJN0-i.js";import"./clock-D8WWZ3gq.js";import"./search-CtXZRXuc.js";import"./x-CvZonSQM.js";import"./SidebarPremium-CfP5whq7.js";import"./index-CJgcaHTP.js";import"./house-CLldyvL4.js";import"./book-open-DyM283ur.js";import"./graduation-cap-D26J0z2u.js";import"./chart-column-C5QwmSZ5.js";import"./message-circle-CZexvp4h.js";import"./settings-C_eaHXhN.js";import"./index-Bvvn9rAe.js";import"./index-Bv89TW0t.js";import"./index-B6vL-k38.js";import"./index-CW7aGg6Q.js";import"./index-CnE12kOi.js";import"./check-VEyQrJQ_.js";const At=()=>{const{classId:s}=D(),r=I(),[j,v]=e.useState(!0),[n,S]=e.useState(null),[p,y]=e.useState([]),[f,h]=e.useState([]),[i,N]=e.useState(""),[u,A]=e.useState({total:0,active:0,closed:0});e.useEffect(()=>{w()},[s]),e.useEffect(()=>{k()},[p,i]);const w=async()=>{try{v(!0);const a=await V.getClassById(s);S(a);const{data:o,error:l}=await $.from("activity_class_assignments").select(`
          activity_id,
          activity:activities(*)
        `).eq("class_id",s);if(l)throw l;const d=o?.map(c=>c.activity).filter(Boolean)||[];y(d);const E=d.filter(c=>c.status==="active").length,L=d.filter(c=>c.status==="closed").length;A({total:d.length,active:E,closed:L})}catch(a){B.error("Erro ao carregar atividades:",a)}finally{v(!1)}},k=()=>{if(!i){h(p);return}const a=i.toLowerCase(),o=p.filter(l=>l.title?.toLowerCase().includes(a)||l.description?.toLowerCase().includes(a));h(o)};return j?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(T,{size:"lg",text:"Carregando atividades..."})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[t.jsxs(b,{variant:"ghost",onClick:()=>r(`/dashboard/classes/${s}`),className:"mb-4",children:[t.jsx(z,{className:"w-4 h-4 mr-2"}),"Voltar para Turma"]}),t.jsx(P,{title:`Atividades - ${n?.name||"Turma"}`,subtitle:n?.subject||"Sem matéria",role:"teacher"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx(g,{title:"Total de Atividades",value:u.total,icon:m,gradient:x.stats.activities,bgColor:"bg-emerald-50 dark:bg-emerald-950/30",delay:0}),t.jsx(g,{title:"Ativas",value:u.active,icon:m,gradient:x.success,bgColor:"bg-green-50 dark:bg-green-950/30",delay:.1}),t.jsx(g,{title:"Encerradas",value:u.closed,icon:m,gradient:"from-slate-500 to-slate-600",bgColor:"bg-slate-50 dark:bg-slate-950/30",delay:.2})]}),t.jsxs("div",{className:"flex gap-4 mb-8",children:[t.jsx("div",{className:"flex-1",children:t.jsx(Q,{placeholder:"Buscar atividade...",value:i,onChange:N})}),t.jsxs(b,{onClick:()=>r(`/dashboard/activities/create?classId=${s}`),className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white",children:[t.jsx(C,{className:"w-4 h-4 mr-2"}),"Nova Atividade"]})]}),f.length>0?t.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((a,o)=>t.jsx(q,{id:a.id,title:a.title,className:n?.name,dueDate:a.due_date,status:a.status||"draft",submissionCount:0,totalStudents:0,priority:"normal",delay:o*.05,onClick:()=>r(`/dashboard/activities/${a.id}/submissions`),actionLabel:"Ver Submissões",onAction:()=>r(`/dashboard/activities/${a.id}/submissions`)},a.id))}):t.jsx(F,{icon:m,title:i?"Nenhuma atividade encontrada":"Nenhuma atividade nesta turma",description:i?"Tente outro termo.":"Crie a primeira atividade para esta turma.",actionLabel:"Criar Atividade",actionIcon:C,action:()=>r(`/dashboard/activities/create?classId=${s}`)})]})};export{At as default};
