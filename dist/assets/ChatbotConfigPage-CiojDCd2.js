import{m as P,u as R,r as i,s as L,j as e,k as B}from"./main-XRKQFEIr.js";import{B as o}from"./button-D4bIZ4Ty.js";import{I as j}from"./input-BrWaMOrb.js";import{L as n}from"./label-_ADcUmGf.js";import{C as x}from"./card-BEk2G2Us.js";import{D as I}from"./DashboardHeader-B78p6TYW.js";import"./dropdown-menu-DyRCHyY4.js";import{C as $}from"./classService-CdCOAqzz.js";import{B as z}from"./bot-Bgah8qmE.js";import{A as v}from"./arrow-left-faOheEeC.js";import{S as G}from"./save-i4jRp2ou.js";import{A as T}from"./arrow-right-Br2on87o.js";import{R as M}from"./rocket-CAcRHIRY.js";import"./Combination-TYhCc4jv.js";import"./index-ysAnX8Hi.js";import"./index-B_kCUa_t.js";import"./chevron-right-C-DpTlMS.js";import"./check-Cifhij8e.js";import"./notificationOrchestrator-CAq-rZNW.js";const ce=()=>{const{classId:m}=P(),h=R(),[f,b]=i.useState(!0),[O,V]=i.useState(!1),[N,k]=i.useState(!1),[l,u]=i.useState(0),[c,p]=i.useState(1),[y,C]=i.useState(null),[g,w]=i.useState([]),[t,r]=i.useState({name:"",avatar:"ü§ñ",personality:"motivational",useEmojis:!0,useExamples:!0,encourage:!0,selectedActivities:[],selectedMaterials:[],canExplain:!0,canGiveExamples:!0,canAnswerDoubt:!0,canGiveHints:!1,canShowAnswers:!1,availability:"24/7",messagesLimit:10,language:"pt-BR"});i.useEffect(()=>{A()},[m]);const A=async()=>{try{b(!0);const s=await $.getClassById(m);C(s),r(d=>({...d,name:`Assistente de ${s.subject||s.name}`}));const{data:a}=await L.from("activity_class_assignments").select("activity:activities(*)").eq("class_id",m);w(a?.map(d=>d.activity).filter(Boolean)||[])}catch(s){console.error("Erro:",s)}finally{b(!1)}},S=s=>{r(a=>({...a,selectedActivities:a.selectedActivities.includes(s)?a.selectedActivities.filter(d=>d!==s):[...a.selectedActivities,s]}))},E=async()=>{k(!0),u(0);const s=setInterval(()=>{u(a=>a>=100?(clearInterval(s),setTimeout(()=>{alert("Chatbot ativado com sucesso!"),h(`/dashboard/chatbot/${m}/analytics`)},500),100):a+10)},300)},D=["ü§ñ","üéì","üìö","üí°","üß†","‚≠ê","üéØ","üöÄ"];return f?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(B,{size:"lg"})}):N?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(x,{className:"p-8 max-w-md w-full bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"w-16 h-16 mx-auto mb-4 text-blue-600 dark:text-blue-400 animate-pulse"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"üîÑ Treinando Assistente IA..."}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 h-4 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[e.jsxs("div",{className:l>=25?"text-green-600":"",children:[l>=25?"‚úÖ":"üîÑ"," Processando atividades selecionadas"]}),e.jsxs("div",{className:l>=50?"text-green-600":"",children:[l>=50?"‚úÖ":"üîÑ"," Indexando conte√∫dos"]}),e.jsxs("div",{className:l>=75?"text-green-600":"",children:[l>=75?"‚úÖ":"üîÑ"," Gerando base de conhecimento"]}),e.jsxs("div",{className:l>=100?"text-green-600":"",children:[l>=100?"‚úÖ":"‚è≥"," Otimizando respostas"]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-4",children:"Tempo estimado: 2-3 minutos"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"‚ÑπÔ∏è Voc√™ pode sair desta p√°gina. Notificaremos quando estiver pronto!"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(o,{variant:"ghost",onClick:()=>h("/dashboard/chatbot"),className:"mb-4",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(I,{title:`Configurar Chatbot - ${y?.name}`,subtitle:`Passo ${c} de 3`,role:"teacher"}),e.jsx("div",{className:"flex items-center justify-center gap-4 mb-8",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${c>=s?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-600"}`,children:s}),s<3&&e.jsx("div",{className:"w-12 h-1 bg-slate-200 dark:bg-slate-700 mx-2"})]},s))}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[c===1&&e.jsxs(x,{className:"p-8 bg-white dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"üé® Personalize seu Assistente"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Nome do Bot"}),e.jsx(j,{value:t.name,onChange:s=>r(a=>({...a,name:s.target.value})),placeholder:"Ex: Assistente de Matem√°tica"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Avatar/√çcone"}),e.jsx("div",{className:"flex gap-2 mt-2",children:D.map(s=>e.jsx("button",{onClick:()=>r(a=>({...a,avatar:s})),className:`text-4xl p-3 rounded-lg border-2 transition-all ${t.avatar===s?"border-blue-600 bg-blue-50 dark:bg-blue-950/30 scale-110":"border-slate-200 dark:border-slate-700 hover:scale-105"}`,children:s},s))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Personalidade"}),e.jsx("div",{className:"space-y-2 mt-2",children:[{value:"formal",label:"Formal e Acad√™mico"},{value:"friendly",label:"Amig√°vel e Casual"},{value:"motivational",label:"Encorajador e Motivacional"}].map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"personality",checked:t.personality===s.value,onChange:()=>r(a=>({...a,personality:s.value}))}),e.jsx("span",{children:s.label})]},s.value))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Tom de Voz"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.useEmojis,onChange:s=>r(a=>({...a,useEmojis:s.target.checked}))}),e.jsx("span",{children:"Usar emojis"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.useExamples,onChange:s=>r(a=>({...a,useExamples:s.target.checked}))}),e.jsx("span",{children:"Responder com exemplos pr√°ticos"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.encourage,onChange:s=>r(a=>({...a,encourage:s.target.checked}))}),e.jsx("span",{children:"Incentivar o aluno"})]})]})]})]})]}),c===2&&e.jsxs(x,{className:"p-8 bg-white dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"üìù Selecione as Atividades"}),e.jsx("div",{className:"space-y-4 mb-6",children:g.map(s=>e.jsx("label",{className:`block p-4 rounded-lg border-2 cursor-pointer transition-all ${t.selectedActivities.includes(s.id)?"border-blue-600 bg-blue-50 dark:bg-blue-950/30":"border-slate-200 dark:border-slate-700 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selectedActivities.includes(s.id),onChange:()=>S(s.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:s.title}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["üìÖ Prazo: ",s.due_date?new Date(s.due_date).toLocaleDateString("pt-BR"):"Sem prazo"]})]})]})},s.id))}),e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["Selecionadas: ",t.selectedActivities.length,"/",g.length," atividades",e.jsx("br",{}),"‚ö†Ô∏è Vers√£o FREE: At√© 10 atividades | üíé PRO: Atividades ilimitadas"]})})]}),c===3&&e.jsxs(x,{className:"p-8 bg-white dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"‚öôÔ∏è Como o Chatbot pode ajudar"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{children:"O chatbot poder√°:"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canExplain,onChange:s=>r(a=>({...a,canExplain:s.target.checked}))}),e.jsx("span",{children:"Explicar conceitos das atividades"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canGiveExamples,onChange:s=>r(a=>({...a,canGiveExamples:s.target.checked}))}),e.jsx("span",{children:"Dar exemplos similares"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canAnswerDoubt,onChange:s=>r(a=>({...a,canAnswerDoubt:s.target.checked}))}),e.jsx("span",{children:"Tirar d√∫vidas sobre o conte√∫do"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canGiveHints,onChange:s=>r(a=>({...a,canGiveHints:s.target.checked}))}),e.jsx("span",{children:"Dar dicas sobre as quest√µes"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canShowAnswers,onChange:s=>r(a=>({...a,canShowAnswers:s.target.checked}))}),e.jsx("span",{children:"Mostrar respostas corretas"})]})]})]}),e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["‚ö†Ô∏è O chatbot N√ÉO vai:",e.jsx("br",{}),"‚Ä¢ Fazer as atividades pelo aluno",e.jsx("br",{}),"‚Ä¢ Dar respostas diretas",e.jsx("br",{}),"‚Ä¢ Substituir o professor"]})}),e.jsxs("div",{children:[e.jsx(n,{children:"Limite de mensagens por aluno"}),e.jsx(j,{type:"number",value:t.messagesLimit,onChange:s=>r(a=>({...a,messagesLimit:parseInt(s.target.value)})),min:"1",max:"50"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"FREE: 10 mensagens/dia | üíé PRO: Mensagens ilimitadas"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(o,{variant:"outline",onClick:()=>p(s=>Math.max(1,s-1)),disabled:c===1,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",onClick:()=>{},children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Salvar Rascunho"]}),c<3?e.jsxs(o,{onClick:()=>p(s=>s+1),className:"bg-gradient-to-r from-blue-600 to-cyan-600",children:["Pr√≥ximo",e.jsx(T,{className:"w-4 h-4 ml-2"})]}):e.jsxs(o,{onClick:E,className:"bg-gradient-to-r from-blue-600 to-cyan-600",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Ativar Chatbot"]})]})]})]})]})};export{ce as default};
