import{c as f,k as z,u as L,r as i,s as R,j as e,i as I}from"./main-lplkbHVD.js";import{C as x,B as o}from"./card-5YVz_lXF.js";import{L as n,I as j}from"./label-DBO2dw6S.js";import{D as M}from"./dropdown-menu-CLtSaPLu.js";import{C as B}from"./classService-A23NyYzd.js";import{B as _}from"./bot-Dn6nxzHV.js";import{A as v}from"./arrow-left-I3JVuo4b.js";import{S as $}from"./save-Dxq_hMGv.js";import"./index-DaBmT7Zy.js";import"./chevron-right-BIopAIqH.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],T=f("arrow-right",G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],q=f("rocket",O),se=()=>{const{classId:m}=z(),h=L(),[k,p]=i.useState(!0),[H,V]=i.useState(!1),[N,y]=i.useState(!1),[l,u]=i.useState(0),[c,b]=i.useState(1),[C,w]=i.useState(null),[g,A]=i.useState([]),[t,r]=i.useState({name:"",avatar:"🤖",personality:"motivational",useEmojis:!0,useExamples:!0,encourage:!0,selectedActivities:[],selectedMaterials:[],canExplain:!0,canGiveExamples:!0,canAnswerDoubt:!0,canGiveHints:!1,canShowAnswers:!1,availability:"24/7",messagesLimit:10,language:"pt-BR"});i.useEffect(()=>{S()},[m]);const S=async()=>{try{p(!0);const s=await B.getClassById(m);w(s),r(d=>({...d,name:`Assistente de ${s.subject||s.name}`}));const{data:a}=await R.from("activity_class_assignments").select("activity:activities(*)").eq("class_id",m);A(a?.map(d=>d.activity).filter(Boolean)||[])}catch(s){console.error("Erro:",s)}finally{p(!1)}},E=s=>{r(a=>({...a,selectedActivities:a.selectedActivities.includes(s)?a.selectedActivities.filter(d=>d!==s):[...a.selectedActivities,s]}))},D=async()=>{y(!0),u(0);const s=setInterval(()=>{u(a=>a>=100?(clearInterval(s),setTimeout(()=>{alert("Chatbot ativado com sucesso!"),h(`/teacher/chatbot/${m}/analytics`)},500),100):a+10)},300)},P=["🤖","🎓","📚","💡","🧠","⭐","🎯","🚀"];return k?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(I,{size:"lg"})}):N?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(x,{className:"p-8 max-w-md w-full bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"w-16 h-16 mx-auto mb-4 text-purple-600 dark:text-purple-400 animate-pulse"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🔄 Treinando Assistente IA..."}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-4 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[e.jsxs("div",{className:l>=25?"text-green-600":"",children:[l>=25?"✅":"🔄"," Processando atividades selecionadas"]}),e.jsxs("div",{className:l>=50?"text-green-600":"",children:[l>=50?"✅":"🔄"," Indexando conteúdos"]}),e.jsxs("div",{className:l>=75?"text-green-600":"",children:[l>=75?"✅":"🔄"," Gerando base de conhecimento"]}),e.jsxs("div",{className:l>=100?"text-green-600":"",children:[l>=100?"✅":"⏳"," Otimizando respostas"]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-4",children:"Tempo estimado: 2-3 minutos"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"ℹ️ Você pode sair desta página. Notificaremos quando estiver pronto!"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(o,{variant:"ghost",onClick:()=>h("/teacher/chatbot"),className:"mb-4",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(M,{title:`Configurar Chatbot - ${C?.name}`,subtitle:`Passo ${c} de 3`,role:"teacher"}),e.jsx("div",{className:"flex items-center justify-center gap-4 mb-8",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${c>=s?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-600"}`,children:s}),s<3&&e.jsx("div",{className:"w-12 h-1 bg-slate-200 dark:bg-slate-700 mx-2"})]},s))}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[c===1&&e.jsxs(x,{className:"p-8 bg-white dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"🎨 Personalize seu Assistente"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Nome do Bot"}),e.jsx(j,{value:t.name,onChange:s=>r(a=>({...a,name:s.target.value})),placeholder:"Ex: Assistente de Matemática"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Avatar/Ícone"}),e.jsx("div",{className:"flex gap-2 mt-2",children:P.map(s=>e.jsx("button",{onClick:()=>r(a=>({...a,avatar:s})),className:`text-4xl p-3 rounded-lg border-2 transition-all ${t.avatar===s?"border-purple-600 bg-purple-50 dark:bg-purple-950/30 scale-110":"border-slate-200 dark:border-slate-700 hover:scale-105"}`,children:s},s))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Personalidade"}),e.jsx("div",{className:"space-y-2 mt-2",children:[{value:"formal",label:"Formal e Acadêmico"},{value:"friendly",label:"Amigável e Casual"},{value:"motivational",label:"Encorajador e Motivacional"}].map(s=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"personality",checked:t.personality===s.value,onChange:()=>r(a=>({...a,personality:s.value}))}),e.jsx("span",{children:s.label})]},s.value))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Tom de Voz"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.useEmojis,onChange:s=>r(a=>({...a,useEmojis:s.target.checked}))}),e.jsx("span",{children:"Usar emojis"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.useExamples,onChange:s=>r(a=>({...a,useExamples:s.target.checked}))}),e.jsx("span",{children:"Responder com exemplos práticos"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.encourage,onChange:s=>r(a=>({...a,encourage:s.target.checked}))}),e.jsx("span",{children:"Incentivar o aluno"})]})]})]})]})]}),c===2&&e.jsxs(x,{className:"p-8 bg-white dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"📝 Selecione as Atividades"}),e.jsx("div",{className:"space-y-4 mb-6",children:g.map(s=>e.jsx("label",{className:`block p-4 rounded-lg border-2 cursor-pointer transition-all ${t.selectedActivities.includes(s.id)?"border-purple-600 bg-purple-50 dark:bg-purple-950/30":"border-slate-200 dark:border-slate-700 hover:border-purple-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selectedActivities.includes(s.id),onChange:()=>E(s.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:s.title}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["📅 Prazo: ",s.due_date?new Date(s.due_date).toLocaleDateString("pt-BR"):"Sem prazo"]})]})]})},s.id))}),e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["Selecionadas: ",t.selectedActivities.length,"/",g.length," atividades",e.jsx("br",{}),"⚠️ Versão FREE: Até 10 atividades | 💎 PRO: Atividades ilimitadas"]})})]}),c===3&&e.jsxs(x,{className:"p-8 bg-white dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"⚙️ Como o Chatbot pode ajudar"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{children:"O chatbot poderá:"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canExplain,onChange:s=>r(a=>({...a,canExplain:s.target.checked}))}),e.jsx("span",{children:"Explicar conceitos das atividades"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canGiveExamples,onChange:s=>r(a=>({...a,canGiveExamples:s.target.checked}))}),e.jsx("span",{children:"Dar exemplos similares"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canAnswerDoubt,onChange:s=>r(a=>({...a,canAnswerDoubt:s.target.checked}))}),e.jsx("span",{children:"Tirar dúvidas sobre o conteúdo"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canGiveHints,onChange:s=>r(a=>({...a,canGiveHints:s.target.checked}))}),e.jsx("span",{children:"Dar dicas sobre as questões"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.canShowAnswers,onChange:s=>r(a=>({...a,canShowAnswers:s.target.checked}))}),e.jsx("span",{children:"Mostrar respostas corretas"})]})]})]}),e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["⚠️ O chatbot NÃO vai:",e.jsx("br",{}),"• Fazer as atividades pelo aluno",e.jsx("br",{}),"• Dar respostas diretas",e.jsx("br",{}),"• Substituir o professor"]})}),e.jsxs("div",{children:[e.jsx(n,{children:"Limite de mensagens por aluno"}),e.jsx(j,{type:"number",value:t.messagesLimit,onChange:s=>r(a=>({...a,messagesLimit:parseInt(s.target.value)})),min:"1",max:"50"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"FREE: 10 mensagens/dia | 💎 PRO: Mensagens ilimitadas"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(o,{variant:"outline",onClick:()=>b(s=>Math.max(1,s-1)),disabled:c===1,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",onClick:()=>{},children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Salvar Rascunho"]}),c<3?e.jsxs(o,{onClick:()=>b(s=>s+1),className:"bg-gradient-to-r from-purple-600 to-pink-600",children:["Próximo",e.jsx(T,{className:"w-4 h-4 ml-2"})]}):e.jsxs(o,{onClick:D,className:"bg-gradient-to-r from-purple-600 to-pink-600",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Ativar Chatbot"]})]})]})]})]})};export{se as default};
