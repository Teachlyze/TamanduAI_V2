import{c as y,u as S,a as w,r as c,s as A,j as t,i as B}from"./main-vCmkj0Ph.js";import{C as g,B as r,m as f}from"./card-QZFCDucj.js";import{B as _}from"./badge-DYNIDruK.js";import{S as d}from"./StatsCard-DsNwPDbG.js";import{D as E}from"./dropdown-menu-CRv4RkRy.js";import{E as P}from"./EmptyState-BSzsQ55S.js";import"./label-DA0WPkHe.js";import{B as p}from"./bot-Cd-T4Oov.js";import{M as T}from"./message-square-B_K00Q7Z.js";import{U as z}from"./users-D-Skvp4U.js";import{S as I}from"./star-B0g53agQ.js";import{C as M}from"./chart-column-CK2nVML9.js";import{P as q}from"./pause-DJGKx5dk.js";import{P as D}from"./play-DFzhwvj1.js";import"./chevron-right-DOiZ8o1C.js";import"./index-DF9gUw3L.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],x=y("settings",L),et=()=>{const n=S(),{user:m}=w(),[v,u]=c.useState(!0),[h,j]=c.useState([]),[l,N]=c.useState({activeBots:0,totalConversations:0,studentsServed:0,avgSatisfaction:0});c.useEffect(()=>{k()},[m]);const k=async()=>{if(m)try{u(!0);const{data:e}=await A.from("classes").select("id, name, subject, color").eq("created_by",m.id).eq("is_active",!0),s=(e||[]).map((o,a)=>({...o,chatbot:{status:a===0?"active":a===1?"paused":"not_configured",activitiesTrained:a===0?8:a===1?5:0,conversations:a===0?145:a===1?67:0,satisfaction:a===0?92:a===1?88:0}}));j(s);const i=s.filter(o=>o.chatbot.status==="active").length,b=s.reduce((o,a)=>o+a.chatbot.conversations,0);N({activeBots:i,totalConversations:b,studentsServed:Math.floor(b*.6),avgSatisfaction:i>0?90:0})}catch(e){console.error("Erro:",e)}finally{u(!1)}},C=e=>{const s={active:{label:"Ativo",color:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"},paused:{label:"Pausado",color:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"},not_configured:{label:"Não Configurado",color:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-400"}};return s[e]||s.not_configured};return v?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(B,{size:"lg"})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[t.jsx(E,{title:"Assistente IA para Turmas",subtitle:"Configure chatbots inteligentes para auxiliar seus alunos",role:"teacher",gradient:"from-purple-500 via-pink-500 to-rose-500"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx(d,{title:"Chatbots Ativos",value:l.activeBots,icon:p,gradient:"from-purple-500 to-pink-500",delay:0}),t.jsx(d,{title:"Conversas (30 dias)",value:l.totalConversations,icon:T,gradient:"from-pink-500 to-rose-500",delay:.1}),t.jsx(d,{title:"Alunos Atendidos",value:l.studentsServed,icon:z,gradient:"from-rose-500 to-orange-500",delay:.2}),t.jsx(d,{title:"Satisfação Média",value:`${l.avgSatisfaction}%`,icon:I,gradient:"from-amber-500 to-yellow-500",format:"text",delay:.3})]}),t.jsxs(g,{className:"p-6 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800 mb-8",children:[t.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-2",children:"❓ Como funciona o chatbot?"}),t.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"Configure um assistente IA para cada turma. O chatbot aprende com as atividades e materiais que você seleciona, e ajuda os alunos a tirarem dúvidas 24/7."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"📖 Documentação"}),t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"🎥 Ver Tutorial"})]})]}),h.length>0?t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((e,s)=>{const i=C(e.chatbot.status);return t.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},children:t.jsxs(g,{className:"p-6 hover:shadow-lg transition-shadow bg-white dark:bg-slate-900",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-1",children:e.name}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.subject||"Sem matéria"})]}),t.jsx(_,{className:i.color,children:i.label})]}),e.chatbot.status!=="not_configured"&&t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:e.chatbot.activitiesTrained}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Atividades"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-pink-600 dark:text-pink-400",children:e.chatbot.conversations}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Conversas"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:[e.chatbot.satisfaction,"%"]}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Satisfação"})]})]}),t.jsx("div",{className:"flex gap-2",children:e.chatbot.status==="not_configured"?t.jsxs(r,{onClick:()=>n(`/teacher/chatbot/${e.id}/config`),className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Configurar"]}):t.jsxs(t.Fragment,{children:[t.jsxs(r,{variant:"outline",onClick:()=>n(`/teacher/chatbot/${e.id}/config`),className:"flex-1",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Editar"]}),t.jsxs(r,{variant:"outline",onClick:()=>n(`/teacher/chatbot/${e.id}/analytics`),className:"flex-1",children:[t.jsx(M,{className:"w-4 h-4 mr-2"}),"Analytics"]}),t.jsx(r,{variant:"outline",size:"icon",className:e.chatbot.status==="active"?"text-amber-600":"text-green-600",children:e.chatbot.status==="active"?t.jsx(q,{className:"w-4 h-4"}):t.jsx(D,{className:"w-4 h-4"})})]})})]})},e.id)})}):t.jsx(P,{icon:p,title:"Nenhuma turma encontrada",description:"Crie uma turma para configurar seu primeiro chatbot IA",actionLabel:"Criar Turma",actionIcon:x,action:()=>n("/teacher/classes/new")})]})};export{et as default};
