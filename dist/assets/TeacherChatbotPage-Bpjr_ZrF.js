import{u as k,a as S,r as c,s as w,j as t,k as A}from"./main-PnoWv5mu.js";import{B as r,m as g}from"./button-B1az96ai.js";import{C as f}from"./card-DNyDBtwZ.js";import{B}from"./SidebarPremium-DbDmcmQG.js";import{S as d}from"./StatsCard-rzGomFX8.js";import{D as E}from"./DashboardHeader-CjwFRF49.js";import{E as _}from"./EmptyState-6R7lfM6O.js";import"./input-BGWMq9XA.js";import"./dropdown-menu-BDAIvG1Q.js";import"./label-DSOeyQ5r.js";import{B as v}from"./bot-DKN4m6U9.js";import{M as P}from"./message-square-CZ7vl3Ib.js";import{U as T}from"./users-CZvcSbj_.js";import{S as q}from"./star-CeWd8hIK.js";import{S as u}from"./settings-BAc4VZJo.js";import{C as z}from"./chart-column-Ba9dXnEb.js";import{P as D}from"./pause-DKD8a-fN.js";import{P as I}from"./play-CISFGpfT.js";import"./bell-jlu-i0nu.js";import"./book-open-BN8GTFXN.js";import"./trending-up-BnoBnv7_.js";import"./user-IPdw0V9z.js";import"./file-text-WNEYLkuB.js";import"./graduation-cap-BTPeK0uK.js";import"./index-DvZMkTcl.js";import"./x-7WqOwCJm.js";import"./tokens-BPdvztvj.js";import"./chevron-right-5LVKKztM.js";import"./index-CWQpaRb1.js";import"./check-8UqrO2_7.js";const xt=()=>{const n=k(),{user:m}=S(),[p,x]=c.useState(!0),[b,j]=c.useState([]),[l,N]=c.useState({activeBots:0,totalConversations:0,studentsServed:0,avgSatisfaction:0});c.useEffect(()=>{y()},[m]);const y=async()=>{if(m)try{x(!0);const{data:e}=await w.from("classes").select("id, name, subject, color").eq("created_by",m.id).eq("is_active",!0),s=(e||[]).map((i,a)=>({...i,chatbot:{status:a===0?"active":a===1?"paused":"not_configured",activitiesTrained:a===0?8:a===1?5:0,conversations:a===0?145:a===1?67:0,satisfaction:a===0?92:a===1?88:0}}));j(s);const o=s.filter(i=>i.chatbot.status==="active").length,h=s.reduce((i,a)=>i+a.chatbot.conversations,0);N({activeBots:o,totalConversations:h,studentsServed:Math.floor(h*.6),avgSatisfaction:o>0?90:0})}catch(e){console.error("Erro:",e)}finally{x(!1)}},C=e=>{const s={active:{label:"Ativo",color:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"},paused:{label:"Pausado",color:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"},not_configured:{label:"Não Configurado",color:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-400"}};return s[e]||s.not_configured};return p?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(A,{size:"lg"})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[t.jsx(E,{title:"Assistente IA para Turmas",subtitle:"Configure chatbots inteligentes para auxiliar seus alunos",role:"teacher",gradient:"from-blue-500 via-cyan-500 to-blue-600"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx(d,{title:"Chatbots Ativos",value:l.activeBots,icon:v,gradient:"from-blue-500 to-cyan-500",delay:0}),t.jsx(d,{title:"Conversas (30 dias)",value:l.totalConversations,icon:P,gradient:"from-cyan-500 to-blue-500",delay:.1}),t.jsx(d,{title:"Alunos Atendidos",value:l.studentsServed,icon:T,gradient:"from-rose-500 to-orange-500",delay:.2}),t.jsx(d,{title:"Satisfação Média",value:`${l.avgSatisfaction}%`,icon:q,gradient:"from-amber-500 to-yellow-500",format:"text",delay:.3})]}),t.jsxs(f,{className:"p-6 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800 mb-8",children:[t.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-2",children:"❓ Como funciona o chatbot?"}),t.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"Configure um assistente IA para cada turma. O chatbot aprende com as atividades e materiais que você seleciona, e ajuda os alunos a tirarem dúvidas 24/7."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"📖 Documentação"}),t.jsx(r,{variant:"outline",size:"sm",className:"text-blue-700",children:"🎥 Ver Tutorial"})]})]}),b.length>0?t.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map((e,s)=>{const o=C(e.chatbot.status);return t.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},children:t.jsxs(f,{className:"p-6 hover:shadow-lg transition-shadow bg-white dark:bg-slate-900",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-1",children:e.name}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.subject||"Sem matéria"})]}),t.jsx(B,{className:o.color,children:o.label})]}),e.chatbot.status!=="not_configured"&&t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:e.chatbot.activitiesTrained}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Atividades"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400",children:e.chatbot.conversations}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Conversas"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:[e.chatbot.satisfaction,"%"]}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Satisfação"})]})]}),t.jsx("div",{className:"flex gap-2",children:e.chatbot.status==="not_configured"?t.jsxs(r,{onClick:()=>n(`/teacher/chatbot/${e.id}/config`),className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),"Configurar"]}):t.jsxs(t.Fragment,{children:[t.jsxs(r,{variant:"outline",onClick:()=>n(`/teacher/chatbot/${e.id}/config`),className:"flex-1",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),"Editar"]}),t.jsxs(r,{variant:"outline",onClick:()=>n(`/teacher/chatbot/${e.id}/analytics`),className:"flex-1",children:[t.jsx(z,{className:"w-4 h-4 mr-2"}),"Analytics"]}),t.jsx(r,{variant:"outline",size:"icon",className:e.chatbot.status==="active"?"text-amber-600":"text-green-600",children:e.chatbot.status==="active"?t.jsx(D,{className:"w-4 h-4"}):t.jsx(I,{className:"w-4 h-4"})})]})})]})},e.id)})}):t.jsx(_,{icon:v,title:"Nenhuma turma encontrada",description:"Crie uma turma para configurar seu primeiro chatbot IA",actionLabel:"Criar Turma",actionIcon:u,action:()=>n("/teacher/classes/new")})]})};export{xt as default};
