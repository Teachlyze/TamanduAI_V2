import{u as D,b as P,r,s as _,l as $,j as e,q as z}from"./main-C5n3kzXQ.js";import{B}from"./button-CXfsJEZz.js";import{D as Q,g as C}from"./DashboardHeader-Bi7WU8Vg.js";import{S as p}from"./StatsCard-CYCecPlH.js";import{E as M}from"./EmptyState-C8gLCSAr.js";import"./card-CjtJprPz.js";import{A as R}from"./ActivityCard-CyoaIG9S.js";import{S as V}from"./SearchInput-USOYMVjM.js";import{F as H}from"./FilterBar-AnqOaGKl.js";import"./input-Bec_LEaF.js";import"./label-B7q1QW2O.js";import{F as j}from"./file-text-0s37oUXW.js";import{C as X}from"./circle-check-Ct3ReQO3.js";import{C as G}from"./circle-x-bjpqHVrd.js";import{m as y}from"./proxy-C-9wZx5L.js";import{P as S}from"./plus-ytK2DPwm.js";import"./chevron-right-avg7mug8.js";import"./badge-DIjZdJB4.js";import"./circle-alert--zWTLTwH.js";import"./calendar-BkZi9bLz.js";import"./users-Boys-rM5.js";import"./clock-DACORgp8.js";import"./search-bvx9xJte.js";import"./x-3ab3q3Ef.js";import"./dropdown-menu-CgW1-aRc.js";import"./index-B6XryYCt.js";import"./index-C2-paRPo.js";import"./index-CJbM7HGD.js";import"./index-CsW3l1Gu.js";import"./Combination-Chdg_-Wh.js";import"./SidebarPremium-D25G1dNT.js";import"./house-ZJXziqlE.js";import"./book-open-BP8V__Hw.js";import"./graduation-cap-DHgx-smk.js";import"./chart-column-5ubExldJ.js";import"./message-circle-oS8o50gZ.js";import"./settings-BnI-Y10b.js";import"./brain-Bn2z760B.js";import"./index-DJGNkgSL.js";import"./index-W2DwLdmL.js";import"./check-UVwrTgdR.js";import"./funnel-Ddw133cd.js";import"./chevron-down-CRExErKk.js";const _t=()=>{const n=D(),{user:d}=P(),[A,f]=r.useState(!0),[g,N]=r.useState([]),[m,k]=r.useState([]),[o,h]=r.useState(""),[s,v]=r.useState({status:null,classId:null,type:null}),[l,w]=r.useState({total:0,active:0,closed:0}),[b,E]=r.useState([]);r.useEffect(()=>{F()},[d]),r.useEffect(()=>{L()},[g,o,s]);const F=async()=>{if(d)try{f(!0);const{data:t,error:a}=await _.from("activities").select(`
          *,
          assignments:activity_class_assignments(
            class:classes(id, name)
          )
        `).eq("created_by",d.id).order("created_at",{ascending:!1});if(a)throw a;N(t||[]);const i=t?.filter(c=>c.status==="active").length||0,q=t?.filter(c=>c.status==="closed").length||0;w({total:t?.length||0,active:i,closed:q});const x=new Map;t?.forEach(c=>{c.assignments?.forEach(u=>{u.class&&x.set(u.class.id,u.class)})}),E(Array.from(x.values()))}catch(t){$.error("Erro ao carregar atividades:",t)}finally{f(!1)}},L=()=>{let t=[...g];if(o){const a=o.toLowerCase();t=t.filter(i=>i.title?.toLowerCase().includes(a)||i.description?.toLowerCase().includes(a))}s.status&&(t=t.filter(a=>a.status===s.status)),s.classId&&(t=t.filter(a=>a.assignments?.some(i=>i.class?.id===s.classId))),s.type&&(t=t.filter(a=>a.type===s.type)),k(t)},I=(t,a)=>{v(i=>({...i,[t]:a}))},T=()=>{v({status:null,classId:null,type:null}),h("")};return A?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(z,{size:"lg",text:"Carregando atividades..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsx(Q,{title:"Minhas Atividades",subtitle:`${l.total} atividade${l.total!==1?"s":""} criada${l.total!==1?"s":""}`,role:"teacher"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(p,{title:"Total de Atividades",value:l.total,icon:j,gradient:C.stats.activities,bgColor:"bg-emerald-50 dark:bg-emerald-950/30",delay:0}),e.jsx(p,{title:"Ativas",value:l.active,icon:X,gradient:C.success,bgColor:"bg-green-50 dark:bg-green-950/30",delay:.1}),e.jsx(p,{title:"Encerradas",value:l.closed,icon:G,gradient:"from-slate-500 to-slate-600",bgColor:"bg-slate-50 dark:bg-slate-950/30",delay:.2})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(V,{placeholder:"Buscar por título ou descrição...",value:o,onChange:h})}),e.jsx(H,{filters:[{key:"status",label:"Status",options:[{value:"active",label:"Ativas"},{value:"draft",label:"Rascunho"},{value:"closed",label:"Encerradas"}]},{key:"type",label:"Tipo",options:[{value:"assignment",label:"Tarefa"},{value:"quiz",label:"Quiz"},{value:"project",label:"Projeto"}]},...b.length>0?[{key:"classId",label:"Turma",options:b.map(t=>({value:t.id,label:t.name}))}]:[]],activeFilters:s,onFilterChange:I,onClearAll:T})]}),m.length>0?e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-20",children:m.map((t,a)=>{const i=t.assignments?.[0]?.class?.name||"Sem turma";return e.jsx(R,{id:t.id,title:t.title,className:i,dueDate:t.due_date,status:t.status||"draft",submissionCount:0,totalStudents:0,priority:"normal",delay:a*.05,onClick:()=>n(`/teacher/activities/${t.id}`),actionLabel:"Ver Detalhes",onAction:()=>n(`/teacher/activities/${t.id}`)},t.id)})}):e.jsx(M,{icon:j,title:o||s.status?"Nenhuma atividade encontrada":"Você ainda não criou nenhuma atividade",description:o||s.status?"Tente ajustar os filtros ou buscar por outro termo.":"Crie sua primeira atividade para começar a avaliar seus alunos.",actionLabel:"Criar Primeira Atividade",actionIcon:S,action:()=>n("/dashboard/activities/create")}),m.length>0&&e.jsx(y.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5},className:"fixed bottom-8 right-8 z-50",children:e.jsx(B,{onClick:()=>n("/dashboard/activities/create"),className:"w-16 h-16 rounded-full shadow-2xl bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white",children:e.jsx(S,{className:"w-8 h-8"})})})]})};export{_t as default};
