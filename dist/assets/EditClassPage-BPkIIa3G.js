import{c as y,r as i,j as e,k as E,u as T,i as S}from"./main-BYt0atFx.js";import{B as c,C as p}from"./card-OcUoX-wQ.js";import{L as j,I as v}from"./label-Co3Fv3aZ.js";import{C as B,a as C,D as A}from"./dropdown-menu-SP7CzJJe.js";import{C as D}from"./CopyButton-BkjOy7ww.js";import{C as u}from"./classService-DDEMbQ3F.js";import{A as F}from"./arrow-left-BLRXZrhk.js";import{S as L}from"./save-biAYLgGd.js";import{T as q}from"./trash-2-8IqO6dEf.js";import"./index-B8z1bzn5.js";import"./chevron-right-D-kejNpi.js";import"./index-XSWTJnEf.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],$=y("archive",I),M=({value:r="#3B82F6",onChange:o,label:h="Cor",presets:x=null,allowCustom:g=!0})=>{const[d,m]=i.useState(r),f=x||[{name:"Azul",color:"#3B82F6",gradient:"from-blue-500 to-blue-600"},{name:"Roxo",color:"#8B5CF6",gradient:"from-purple-500 to-purple-600"},{name:"Rosa",color:"#EC4899",gradient:"from-pink-500 to-pink-600"},{name:"Verde",color:"#10B981",gradient:"from-green-500 to-green-600"},{name:"Amarelo",color:"#F59E0B",gradient:"from-amber-500 to-amber-600"},{name:"Vermelho",color:"#EF4444",gradient:"from-red-500 to-red-600"},{name:"Indigo",color:"#6366F1",gradient:"from-indigo-500 to-indigo-600"},{name:"Teal",color:"#14B8A6",gradient:"from-teal-500 to-teal-600"},{name:"Laranja",color:"#F97316",gradient:"from-orange-500 to-orange-600"},{name:"Cyan",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Lime",color:"#84CC16",gradient:"from-lime-500 to-lime-600"},{name:"Slate",color:"#64748B",gradient:"from-slate-500 to-slate-600"}],l=s=>{o(s)},n=s=>{const b=s.target.value;m(b),o(b)};return e.jsxs("div",{children:[h&&e.jsx(j,{className:"text-sm font-semibold mb-3 block",children:h}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:f.map(s=>e.jsx("button",{type:"button",onClick:()=>l(s.color),className:`
              relative w-full aspect-square rounded-lg
              bg-gradient-to-br ${s.gradient}
              hover:scale-110 transition-transform
              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
              dark:focus:ring-offset-slate-900
            `,title:s.name,children:r===s.color&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-white dark:bg-slate-900 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(B,{className:"w-4 h-4 text-slate-900 dark:text-white"})})})},s.color))}),g&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"color",value:d,onChange:n,className:`
                w-full h-10 rounded-lg cursor-pointer
                border-2 ${C.border.default}
                focus:ring-2 focus:ring-blue-500 focus:border-blue-500
              `})}),e.jsx("div",{className:`
            flex-1 px-3 py-2 rounded-lg border ${C.border.default}
            bg-white dark:bg-slate-900 text-sm font-mono
            ${C.text.primary}
          `,children:d.toUpperCase()})]}),e.jsx("div",{className:"mt-4 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg shadow-md",style:{backgroundColor:r}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-1",children:"Cor Selecionada"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:r.toUpperCase()})]})]})})]})},Q=()=>{const{classId:r}=E(),o=T(),[h,x]=i.useState(!0),[g,d]=i.useState(!1),[m,f]=i.useState(null),[l,n]=i.useState({name:"",subject:"",description:"",color:"#3B82F6"});i.useEffect(()=>{s()},[r]);const s=async()=>{try{x(!0);const a=await u.getClassById(r);f(a),n({name:a.name||"",subject:a.subject||"",description:a.description||"",color:a.color||"#3B82F6"})}catch(a){console.error("Erro ao carregar turma:",a)}finally{x(!1)}},b=async()=>{try{d(!0),await u.updateClass(r,l),alert("Turma atualizada com sucesso!"),o(`/teacher/classes/${r}`)}catch(a){console.error("Erro ao salvar:",a),alert("Erro ao salvar. Tente novamente.")}finally{d(!1)}},N=async()=>{if(confirm("Tem certeza que deseja arquivar esta turma?"))try{await u.archiveClass(r),alert("Turma arquivada!"),o("/teacher/classes")}catch(a){console.error("Erro ao arquivar:",a),alert("Erro ao arquivar. Tente novamente.")}},w=async()=>{if(confirm("TEM CERTEZA? Esta ação não pode ser desfeita!"))try{await u.deleteClass(r),alert("Turma deletada!"),o("/teacher/classes")}catch(a){console.error("Erro ao deletar:",a),alert("Erro ao deletar. Tente novamente.")}},k=async()=>{try{const a=await u.generateInviteCode(r);f(t=>({...t,invite_code:a})),alert("Novo código gerado!")}catch(a){console.error("Erro:",a),alert("Erro ao gerar código.")}};return h?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(S,{size:"lg",text:"Carregando..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(c,{variant:"ghost",onClick:()=>o(`/teacher/classes/${r}`),className:"mb-4",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(A,{title:"Editar Turma",subtitle:m?.name||"",role:"teacher"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx(p,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Nome da Turma *"}),e.jsx(v,{value:l.name,onChange:a=>n(t=>({...t,name:a.target.value})),placeholder:"Ex: Matemática 3º Ano A"})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Matéria/Disciplina"}),e.jsx(v,{value:l.subject,onChange:a=>n(t=>({...t,subject:a.target.value})),placeholder:"Ex: Matemática"})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Descrição"}),e.jsx("textarea",{value:l.description,onChange:a=>n(t=>({...t,description:a.target.value})),placeholder:"Descrição da turma...",rows:4,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsx(M,{label:"Cor da Turma",value:l.color,onChange:a=>n(t=>({...t,color:a}))})]})}),e.jsxs(p,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Código de Convite"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{value:m?.invite_code||"",readOnly:!0}),e.jsx(D,{text:m?.invite_code||"",label:"Copiar"})]}),e.jsx(c,{variant:"outline",onClick:k,className:"w-full",children:"Gerar Novo Código"})]}),e.jsx(p,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(c,{onClick:b,disabled:g,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),g?"Salvando...":"Salvar"]}),e.jsx(c,{variant:"outline",onClick:()=>o(`/teacher/classes/${r}`),children:"Cancelar"})]})}),e.jsxs(p,{className:"p-6 bg-white dark:bg-slate-900 border-red-200 dark:border-red-800",children:[e.jsx("h3",{className:"font-bold text-red-600 dark:text-red-400 mb-4",children:"Zona de Perigo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(c,{variant:"outline",onClick:N,className:"w-full text-amber-600 border-amber-300",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Arquivar Turma"]}),e.jsxs(c,{variant:"outline",onClick:w,className:"w-full text-red-600 border-red-300",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Excluir Turma"]})]})]})]})]})};export{Q as default};
