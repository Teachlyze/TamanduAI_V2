import{j as e,b as fe,r as l,s as d,l as m,h as Ne,u as _e,q as we}from"./main-C5n3kzXQ.js";import{C as q}from"./card-CjtJprPz.js";import{A as ye}from"./ActivityCard-CXr2imJh.js";import{B as Q}from"./badge-DIjZdJB4.js";import{E as F}from"./EmptyState-cekabAEp.js";import{B as C}from"./button-CXfsJEZz.js";import"./dialog-D4cdgt_6.js";import{m as b}from"./proxy-C-9wZx5L.js";import{D as ke}from"./download-BdAT_7E0.js";import{F as me}from"./file-BgpsRQh8.js";import{F as K}from"./file-text-0s37oUXW.js";import{I as Ce,A as B,a as T,b as $,M as ue}from"./avatar-DcZJfT_O.js";import{V as Se}from"./video-CCS1Gj6m.js";import{f as Ee}from"./format-BdDrz3ZT.js";import{p as X}from"./pt-BR-C6XVmIDX.js";import{T as De,a as Ae,b as M,c as P}from"./tabs-Bmzwt0Jl.js";import{T as Fe}from"./textarea-Dh8BS5CN.js";import{u as Me}from"./use-toast-BTst2Jag.js";import{H as Pe}from"./heart-CnuZ5Wl0.js";import{M as qe}from"./message-circle-oS8o50gZ.js";import{T as Ie}from"./trash-2-DPp_jma0.js";import{S as Le}from"./send-DzpqTpR9.js";import{f as te}from"./formatDistanceToNow-CR6k5j2z.js";import{A as ze}from"./arrow-left-CPZhu65i.js";import{B as he}from"./book-open-BP8V__Hw.js";import{S as xe}from"./star-DcZ05FcA.js";import{U as pe}from"./users-Boys-rM5.js";import"./differenceInHours-CxKvrqrP.js";import"./getRoundingMethod-D0I6Z7xl.js";import"./en-US-ChNhCS9W.js";import"./index-B6XryYCt.js";import"./index-CsW3l1Gu.js";import"./Combination-Chdg_-Wh.js";import"./SidebarPremium-D25G1dNT.js";import"./house-ZJXziqlE.js";import"./graduation-cap-DHgx-smk.js";import"./calendar-BkZi9bLz.js";import"./chart-column-5ubExldJ.js";import"./settings-BnI-Y10b.js";import"./brain-Bn2z760B.js";import"./index-DJGNkgSL.js";import"./chevron-right-avg7mug8.js";import"./x-3ab3q3Ef.js";import"./index-CyfUhPn4.js";import"./index-W2DwLdmL.js";import"./index-C2-paRPo.js";import"./index-CJbM7HGD.js";import"./constructNow-DqwG0NnQ.js";import"./differenceInCalendarMonths-ka4FvHlb.js";import"./endOfDay-B-zzKHwV.js";import"./endOfMonth-rhMYNEE8.js";const Be=t=>t?t.includes("pdf")?K:t.includes("image")?Ce:t.includes("video")?Se:me:me,Te=t=>t?t.includes("pdf")?"from-red-500 to-red-600":t.includes("image")?"from-purple-500 to-pink-500":t.includes("video")?"from-blue-500 to-cyan-500":t.includes("document")||t.includes("word")?"from-blue-600 to-indigo-600":t.includes("sheet")||t.includes("excel")?"from-green-500 to-green-600":"from-slate-500 to-slate-600":"from-slate-500 to-slate-600",$e=t=>t?t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB":"",Ve=({material:t,index:S=0})=>{const o=i=>i?.includes("image"),x=i=>i?.includes("video"),g=()=>o(t.file_type)||x(t.file_type),v=Be(t.file_type),E=Te(t.file_type);return e.jsx(e.Fragment,{children:e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.05},children:e.jsxs(q,{className:"p-6 hover:shadow-xl transition-all group",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${E} flex items-center justify-center flex-shrink-0 shadow-md group-hover:scale-110 transition-transform`,children:e.jsx(v,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1 truncate",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400 mb-3",children:[t.created_at&&e.jsx("span",{children:Ee(new Date(t.created_at),"dd/MM/yyyy",{locale:X})}),t.file_size&&e.jsxs("span",{children:["• ",$e(t.file_size)]})]}),g()&&t.file_url&&e.jsxs("div",{className:"mt-3",children:[o(t.file_type)&&e.jsx(b.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"relative rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800",children:e.jsx("img",{src:t.file_url,alt:t.title,className:"w-full h-auto max-h-[360px] object-contain",loading:"lazy"})}),x(t.file_type)&&e.jsx(b.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"relative rounded-lg overflow-hidden bg-black",children:e.jsxs("video",{controls:!0,className:"w-full h-auto max-h-[360px]",controlsList:"nodownload",children:[e.jsx("source",{src:t.file_url,type:t.file_type}),"Seu navegador não suporta o elemento de vídeo."]})})]}),t.file_url?e.jsx("div",{className:"mt-3",children:e.jsx("a",{href:t.file_url,target:"_blank",rel:"noopener noreferrer",download:!0,children:e.jsxs(C,{size:"sm",className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Baixar"]})})}):e.jsx(C,{size:"sm",variant:"outline",className:"mt-3",disabled:!0,children:"Indisponível"})]})]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:t.tags.map((i,N)=>e.jsx(Q,{variant:"outline",className:"text-xs",children:i},N))})]})})})},Ge=({post:t,onUpdate:S})=>{const{user:o}=fe(),{toast:x}=Me(),[g,v]=l.useState(!1),[E,i]=l.useState(0),[N,j]=l.useState(0),[I,D]=l.useState([]),[_,L]=l.useState(""),[w,V]=l.useState(!1),[G,z]=l.useState(!1),[U,y]=l.useState(!1);l.useEffect(()=>{R()},[t.id]),l.useEffect(()=>{w&&Y()},[w]);const R=async()=>{try{const{data:s}=await d.from("post_likes").select("user_id").eq("post_id",t.id);i(s?.length||0),v(s?.some(u=>u.user_id===o.id)||!1);const{count:r}=await d.from("post_comments").select("id",{count:"exact",head:!0}).eq("post_id",t.id);j(r||0)}catch(s){m.error("Erro ao carregar contagens:",s)}},Y=async()=>{try{y(!0);const{data:s}=await d.from("post_likes").select("user_id").eq("post_id",t.id);i(s?.length||0),v(s?.some(u=>u.user_id===o.id)||!1);const{data:r}=await d.from("post_comments").select("id, content, created_at, author_id").eq("post_id",t.id).order("created_at",{ascending:!0});if(r){const u=[...new Set(r.map(h=>h.author_id))],{data:p}=await d.from("profiles").select("id, full_name, avatar_url").in("id",u),n={};p?.forEach(h=>{n[h.id]=h});const A=r.map(h=>({...h,author:n[h.author_id]}));D(A)}}catch(s){m.error("Erro ao carregar interações:",s)}finally{y(!1)}},O=async()=>{try{if(g){const{error:s}=await d.from("post_likes").delete().eq("post_id",t.id).eq("user_id",o.id);if(s)throw s;v(!1),i(r=>Math.max(0,r-1))}else{const{error:s}=await d.from("post_likes").upsert({post_id:t.id,user_id:o.id},{onConflict:"post_id,user_id",ignoreDuplicates:!1});if(s&&s.code!=="23505")throw s;v(!0),i(r=>r+1)}}catch(s){if(s.code==="23505"||s.message?.includes("duplicate")){m.debug("Like já existe (esperado)");return}m.error("Erro ao curtir:",s),x({title:"❌ Erro",description:"Não foi possível curtir o post",variant:"destructive"})}},H=async()=>{if(_.trim())try{z(!0);const{data:s,error:r}=await d.from("post_comments").insert({post_id:t.id,author_id:o.id,content:_.trim()}).select().single();if(r)throw r;const{data:u}=await d.from("profiles").select("id, full_name, avatar_url").eq("id",o.id).single();D(p=>[...p,{...s,author:u}]),j(p=>p+1),L(""),x({title:"✅ Comentário enviado!",description:"Seu comentário foi publicado"})}catch(s){m.error("Erro ao comentar:",s),x({title:"❌ Erro",description:"Não foi possível enviar o comentário",variant:"destructive"})}finally{z(!1)}},Z=async s=>{try{await d.from("post_comments").delete().eq("id",s).eq("author_id",o.id),D(r=>r.filter(u=>u.id!==s)),j(r=>Math.max(0,r-1)),x({title:"✅ Comentário removido",description:"Seu comentário foi deletado"})}catch(r){m.error("Erro ao deletar comentário:",r),x({title:"❌ Erro",description:"Não foi possível deletar o comentário",variant:"destructive"})}};return e.jsxs(q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsxs(B,{className:"w-12 h-12",children:[e.jsx(T,{src:t.creator?.avatar_url||t.author?.avatar_url}),e.jsx($,{children:(t.creator?.full_name||t.author?.full_name||"P")[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:t.creator?.full_name||t.author?.full_name||"Professor"}),e.jsx(Q,{variant:"secondary",children:"Professor"}),e.jsx("span",{className:"text-sm text-slate-500",children:te(new Date(t.created_at),{locale:X,addSuffix:!0})})]}),t.title&&e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:t.title}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.content||t.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:O,className:g?"text-red-600":"",children:[e.jsx(Pe,{className:`w-5 h-5 mr-2 ${g?"fill-current":""}`}),E>0&&e.jsx("span",{className:"ml-1",children:E})]}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>V(!w),children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),N>0&&e.jsx("span",{className:"ml-1",children:N})]})]}),w&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 space-y-4",children:[U?e.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Carregando..."}):I.length>0?e.jsx("div",{className:"space-y-3",children:I.map(s=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(B,{className:"w-8 h-8",children:[e.jsx(T,{src:s.author?.avatar_url}),e.jsx($,{children:s.author?.full_name?.[0]||"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-semibold text-sm",children:s.author?.full_name||"Usuário"}),s.author_id===o.id&&e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>Z(s.id),className:"h-6 w-6 p-0",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s.content})]}),e.jsx("span",{className:"text-xs text-slate-500 mt-1 block",children:te(new Date(s.created_at),{locale:X,addSuffix:!0})})]})]},s.id))}):e.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Nenhum comentário ainda"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(B,{className:"w-8 h-8",children:[e.jsx(T,{src:o.user_metadata?.avatar_url}),e.jsx($,{children:o.user_metadata?.full_name?.[0]||"V"})]}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(Fe,{value:_,onChange:s=>L(s.target.value),placeholder:"Escreva um comentário...",className:"min-h-[60px]"}),e.jsx(C,{onClick:H,disabled:G||!_.trim(),size:"sm",children:e.jsx(Le,{className:"w-4 h-4"})})]})]})]})]})},Gs=()=>{const{classId:t}=Ne(),{user:S}=fe(),o=_e(),[x,g]=l.useState(!0),[v,E]=l.useState("feed"),[i,N]=l.useState(null),[j,I]=l.useState([]),[D,_]=l.useState([]),[L,w]=l.useState([]),[V,G]=l.useState([]),[z,U]=l.useState([]),[y,R]=l.useState({pendingActivities:0,avgGrade:0,studentsCount:0}),Y=async()=>{try{const{data:s}=await d.auth.getSession(),r=s?.session?.access_token,u=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/get-class-data-optimized",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({classId:t})});if(!u.ok)throw new Error("Edge Function falhou");const n=(await u.json()).data,A=[...n.posts||[],...(n.discussions||[]).map(c=>({...c,title:c.title,description:c.description,content:c.description,creator:c.author,created_at:c.created_at}))],h=(n.activities||[]).filter(c=>c.status==="published");N({...n.classInfo,teacher_name:n.classInfo?.teacher?.full_name||"Professor",teacher_avatar:n.classInfo?.teacher?.avatar_url,teacher_email:n.classInfo?.teacher?.email}),I(A),w(n.library||[]),_(h),U((n.members||[]).filter(c=>c.role==="student")),G([]),R(c=>({...c,studentsCount:(n.members||[]).filter(W=>W.role==="student").length,pendingActivities:h.length})),m.debug("[ClassDetails][Fallback EF] Dados aplicados",{posts:A.length,materials:(n.library||[]).length,activities:h.length,students:(n.members||[]).filter(c=>c.role==="student").length})}catch(s){m.error("[ClassDetails][Fallback EF] Erro ao buscar:",s)}};l.useEffect(()=>{S?.id&&t&&O()},[S,t]);const O=async()=>{try{g(!0);const{data:s,error:r}=await d.from("classes").select(`
          *,
          teacher:profiles!created_by(id, full_name, avatar_url, email)
        `).eq("id",t).single();if(r)throw m.error("[ClassDetails] Erro classes:",r),r;const{data:u,error:p}=await d.from("class_members").select(`
          id,
          user_id,
          is_archived,
          user:profiles!user_id(id, full_name, email, avatar_url, role)
        `).eq("class_id",t),n=u?.filter(a=>!a.is_archived)||[];if(p)throw m.error("[ClassDetails] Erro members:",p),p;const A=s?.teacher?.id,h=n.filter(a=>a.user?.role?a.user.role==="student":a.user_id!==A).map(a=>({id:a.user?.id||a.user_id,full_name:a.user?.full_name||null,email:a.user?.email||null,avatar_url:a.user?.avatar_url||null})).filter(a=>!!a.id),{data:c,error:W}=await d.from("class_posts").select(`
          *,
          creator:profiles!created_by(id, full_name, avatar_url)
        `).eq("class_id",t).order("created_at",{ascending:!1});W&&m.error("[ClassDetails] Erro posts:",W);const{data:ae,error:re}=await d.from("class_materials").select("*").eq("class_id",t).order("created_at",{ascending:!1});re&&m.error("[ClassDetails] Erro materials:",re);const{data:ge,error:ie}=await d.from("activity_class_assignments").select(`
          activity_id,
          assigned_at,
          activity:activities(*)
        `).eq("class_id",t);ie&&m.error("[ClassDetails] Erro assignments:",ie);const J=(ge?.map(a=>a.activity).filter(Boolean)||[]).filter(a=>a.status==="published"),ve=J.map(a=>a.id),{data:le,error:ne}=await d.from("submissions").select("activity_id, status, grade, submitted_at").eq("student_id",S.id).in("activity_id",ve);ne&&m.error("[ClassDetails] Erro submissions:",ne);const je=new Map((le||[]).map(a=>[a.activity_id,a])),oe=(le||[]).filter(a=>a.grade!==null&&a.grade!==void 0).map(a=>{const f=J.find(k=>k.id===a.activity_id)||{};return{id:`${a.activity_id}`,activity_title:f.title||"Atividade",grade:Number(a.grade),max_score:Number(f.max_score)||100,feedback:f.feedback||null}}),ee=oe,ce=ee.length>0?ee.reduce((a,f)=>a+Number(f.grade),0)/ee.length:null,de=J.map(a=>{const f=je.get(a.id),k=!!f,se=!k&&a.due_date&&new Date(a.due_date)<new Date;return{...a,submission:f,hasSubmission:k,isCompleted:k&&f.status==="graded",isPending:!k&&!se,isLate:se,status:k?f.status==="graded"?"completed":"submitted":se?"late":"pending"}}),be=de.filter(a=>a.isPending).length;if(n.length===0&&(c?.length||0)===0&&(ae?.length||0)===0&&J.length===0){m.warn("[ClassDetails] Dados vazios possivelmente por RLS, usando fallback Edge Function"),await Y();return}N({...s,teacher_name:s.teacher?.full_name||"Professor",teacher_avatar:s.teacher?.avatar_url,teacher_email:s.teacher?.email}),I(c||[]),_(de),w(ae||[]),U(h),G(oe),R({pendingActivities:be,avgGrade:ce!==null?ce:0,studentsCount:h.length})}catch(s){m.error("Erro ao carregar dados da turma:",s)}finally{g(!1)}};if(x&&!i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(we,{size:"lg"})});const H={blue:"from-blue-600 to-cyan-500",green:"from-green-600 to-emerald-500",purple:"from-purple-600 to-pink-500",orange:"from-orange-600 to-amber-500",red:"from-red-600 to-rose-500"},Z=H[i?.color]||H.blue;return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:[e.jsxs(C,{variant:"ghost",onClick:()=>o("/students/classes"),className:"mb-4",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Voltar para Turmas"]}),e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`bg-gradient-to-r ${Z} rounded-2xl p-8 mb-8 text-white shadow-xl relative overflow-hidden`,children:[e.jsx("div",{className:"absolute -right-16 -bottom-16 opacity-10",children:e.jsx(he,{className:"w-64 h-64"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"mb-3 bg-white/20 text-white border-white/30",children:i?.subject||"Matéria"}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:i?.name}),i?.description&&e.jsx("p",{className:"text-white/90 text-lg max-w-2xl",children:i.description})]}),e.jsx(q,{className:"p-4 bg-white/10 backdrop-blur border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(B,{className:"w-12 h-12 border-2 border-white",children:[e.jsx(T,{src:i?.teacher_avatar}),e.jsx($,{className:"bg-white/20 text-white",children:i?.teacher_name?.[0]||"P"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Professor(a)"}),e.jsx("p",{className:"font-bold text-white",children:i?.teacher_name})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:y.pendingActivities}),e.jsx("p",{className:"text-sm text-white/80",children:"Atividades Pendentes"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:y.avgGrade>0?y.avgGrade.toFixed(1):"--"}),e.jsx("p",{className:"text-sm text-white/80",children:"Média de Notas"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:y.studentsCount}),e.jsx("p",{className:"text-sm text-white/80",children:"Alunos na Turma"})]})]})})]})]})]}),e.jsxs(De,{value:v,onValueChange:E,children:[e.jsxs(Ae,{className:"mb-6",children:[e.jsx(M,{value:"feed",children:"Feed"}),e.jsx(M,{value:"announcements",children:"Comunicados"}),e.jsx(M,{value:"activities",children:"Atividades"}),e.jsx(M,{value:"materials",children:"Materiais"}),e.jsx(M,{value:"grades",children:"Notas"}),e.jsx(M,{value:"students",children:"Alunos"})]}),e.jsx(P,{value:"feed",children:j.length>0?e.jsx("div",{className:"space-y-4",children:j.map((s,r)=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsx(Ge,{post:s,onUpdate:O})},s.id))}):e.jsx(F,{icon:K,title:"Nenhum post ainda",description:"Não há posts publicados nesta turma ainda."})}),e.jsx(P,{value:"announcements",children:j.filter(s=>s.category==="announcement"||s.type==="announcement").length>0?e.jsx("div",{className:"space-y-4",children:j.filter(s=>s.category==="announcement"||s.type==="announcement").map((s,r)=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsx(q,{className:"p-6 border-l-4 border-l-orange-500",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(ue,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:s.title||"Comunicado Importante"}),e.jsx(Q,{className:"bg-orange-100 text-orange-700",children:"Comunicado"}),e.jsx("span",{className:"text-sm text-slate-500",children:te(new Date(s.created_at),{locale:X,addSuffix:!0})})]}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:s.content||s.description})]})]})})},s.id))}):e.jsx(F,{icon:ue,title:"Nenhum comunicado",description:"Não há comunicados importantes nesta turma ainda."})}),e.jsx(P,{value:"activities",children:D.length>0?e.jsx("div",{className:"space-y-4",children:D.map((s,r)=>e.jsx(ye,{activity:s,onStart:()=>o(`/students/activities/${s.id}`),onView:()=>o(`/students/activities/${s.id}`),index:r},s.id))}):e.jsx(F,{icon:K,title:"Nenhuma atividade",description:"Não há atividades disponíveis nesta turma ainda."})}),e.jsx(P,{value:"materials",children:L.length>0?e.jsx("div",{className:"space-y-4",children:L.map((s,r)=>e.jsx(Ve,{material:s,index:r},s.id))}):e.jsx(F,{icon:he,title:"Nenhum material",description:"Não há materiais disponíveis nesta turma ainda."})}),e.jsx(P,{value:"grades",children:V.length>0?e.jsx("div",{className:"space-y-4",children:V.map((s,r)=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsx(q,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-2",children:s.activity_title}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:parseFloat(s.grade).toFixed(1)}),e.jsxs("span",{className:"text-slate-500",children:["/",s.max_score]})]}),e.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${parseFloat(s.grade)/s.max_score*100}%`}})})]}),s.feedback&&e.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Feedback do Professor:"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.feedback})]})]})})})},s.id))}):e.jsx(F,{icon:xe,title:"Nenhuma nota ainda",description:"Você ainda não possui notas nesta turma."})}),e.jsx(P,{value:"students",children:z.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map((s,r)=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsx(q,{className:"p-4 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(B,{className:"w-12 h-12",children:[e.jsx(T,{src:s.avatar_url}),e.jsx($,{className:"bg-blue-100 text-blue-600",children:(s.full_name||s.name)?.[0]||"A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:s.full_name||s.name||"Aluno"}),e.jsx("p",{className:"text-sm text-slate-500",children:s.email||"Sem email"})]})]})})},s.id))}):e.jsx(F,{icon:pe,title:"Nenhum aluno",description:"Não há alunos nesta turma ainda."})})]})]})};export{Gs as default};
