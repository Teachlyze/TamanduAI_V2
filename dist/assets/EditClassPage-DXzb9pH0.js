import{r as c,j as e,o as E,u as T,l as u,m as S}from"./main-BXI8jImK.js";import{B as i}from"./button-DhJSXayK.js";import{I as C}from"./input-YtE9-IyT.js";import{L as v}from"./label-DZTyMoK9.js";import{C as j}from"./card-Dts-jKab.js";import{c as N,D as A}from"./DashboardHeader-BC80IxDW.js";import"./dropdown-menu-7nHS86TP.js";import{C as B}from"./CopyButton-D-m9P04P.js";import{C as D}from"./check-P2w7Pyl_.js";import{C as h}from"./classService-CqU2_ZO3.js";import{A as F}from"./arrow-left-Bdb18hWQ.js";import{S as q}from"./save-X-LtD5pM.js";import{A as L}from"./archive-B_LTTO2m.js";import{T as $}from"./trash-2-CYDlaDtE.js";import"./index-laUz9pSU.js";import"./index-D63a-v4Z.js";import"./Combination-7NRWB7dp.js";import"./index-PCXR_M5s.js";import"./chevron-right-DFiBXpQq.js";import"./index-Cyt6Mlq7.js";import"./copy-DrYuqgQt.js";import"./notificationOrchestrator-CpvKfpRq.js";const I=({value:r="#3B82F6",onChange:o,label:x="Cor",presets:g=null,allowCustom:f=!0})=>{const[d,m]=c.useState(r),b=g||[{name:"Azul",color:"#3B82F6",gradient:"from-blue-500 to-blue-600"},{name:"Ciano",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Azul Escuro",color:"#1E40AF",gradient:"from-blue-700 to-blue-800"},{name:"Verde",color:"#10B981",gradient:"from-green-500 to-green-600"},{name:"Amarelo",color:"#F59E0B",gradient:"from-amber-500 to-amber-600"},{name:"Vermelho",color:"#EF4444",gradient:"from-red-500 to-red-600"},{name:"Indigo",color:"#6366F1",gradient:"from-indigo-500 to-indigo-600"},{name:"Teal",color:"#14B8A6",gradient:"from-teal-500 to-teal-600"},{name:"Laranja",color:"#F97316",gradient:"from-orange-500 to-orange-600"},{name:"Cyan",color:"#06B6D4",gradient:"from-cyan-500 to-cyan-600"},{name:"Lime",color:"#84CC16",gradient:"from-lime-500 to-lime-600"},{name:"Slate",color:"#64748B",gradient:"from-slate-500 to-slate-600"}],l=s=>{o(s)},n=s=>{const p=s.target.value;m(p),o(p)};return e.jsxs("div",{children:[x&&e.jsx(v,{className:"text-sm font-semibold mb-3 block",children:x}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:b.map(s=>e.jsx("button",{type:"button",onClick:()=>l(s.color),className:`
              relative w-full aspect-square rounded-lg
              bg-gradient-to-br ${s.gradient}
              hover:scale-110 transition-transform
              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
              dark:focus:ring-offset-slate-900
            `,title:s.name,children:r===s.color&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-white dark:bg-slate-900 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(D,{className:"w-4 h-4 text-slate-900 dark:text-white"})})})},s.color))}),f&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"color",value:d,onChange:n,className:`
                w-full h-10 rounded-lg cursor-pointer
                border-2 ${N.border.default}
                focus:ring-2 focus:ring-blue-500 focus:border-blue-500
              `})}),e.jsx("div",{className:`
            flex-1 px-3 py-2 rounded-lg border ${N.border.default}
            bg-white dark:bg-slate-900 text-sm font-mono
            ${N.text.primary}
          `,children:d.toUpperCase()})]}),e.jsx("div",{className:"mt-4 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg shadow-md",style:{backgroundColor:r}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-1",children:"Cor Selecionada"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:r.toUpperCase()})]})]})})]})},oe=()=>{const{classId:r}=E(),o=T(),[x,g]=c.useState(!0),[f,d]=c.useState(!1),[m,b]=c.useState(null),[l,n]=c.useState({name:"",subject:"",description:"",color:"#3B82F6"});c.useEffect(()=>{s()},[r]);const s=async()=>{try{g(!0);const a=await h.getClassById(r);b(a),n({name:a.name||"",subject:a.subject||"",description:a.description||"",color:a.color||"#3B82F6"})}catch(a){u.error("Erro ao carregar turma:",a)}finally{g(!1)}},p=async()=>{try{d(!0),await h.updateClass(r,l),alert("Turma atualizada com sucesso!"),o(`/dashboard/classes/${r}`)}catch(a){u.error("Erro ao salvar:",a),alert("Erro ao salvar. Tente novamente.")}finally{d(!1)}},w=async()=>{if(confirm("Tem certeza que deseja arquivar esta turma?"))try{await h.archiveClass(r),alert("Turma arquivada!"),o("/dashboard/classes")}catch(a){u.error("Erro ao arquivar:",a),alert("Erro ao arquivar. Tente novamente.")}},y=async()=>{if(confirm("TEM CERTEZA? Esta ação não pode ser desfeita!"))try{await h.deleteClass(r),alert("Turma deletada!"),o("/dashboard/classes")}catch(a){u.error("Erro ao deletar:",a),alert("Erro ao deletar. Tente novamente.")}},k=async()=>{try{const a=await h.generateInviteCode(r);b(t=>({...t,invite_code:a})),alert("Novo código gerado!")}catch(a){u.error("Erro:",a),alert("Erro ao gerar código.")}};return x?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(S,{size:"lg",text:"Carregando..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsxs(i,{variant:"ghost",onClick:()=>o(`/dashboard/classes/${r}`),className:"mb-4",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx(A,{title:"Editar Turma",subtitle:m?.name||"",role:"teacher"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx(j,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Nome da Turma *"}),e.jsx(C,{value:l.name,onChange:a=>n(t=>({...t,name:a.target.value})),placeholder:"Ex: Matemática 3º Ano A"})]}),e.jsxs("div",{children:[e.jsx(v,{children:"Matéria/Disciplina"}),e.jsx(C,{value:l.subject,onChange:a=>n(t=>({...t,subject:a.target.value})),placeholder:"Ex: Matemática"})]}),e.jsxs("div",{children:[e.jsx(v,{children:"Descrição"}),e.jsx("textarea",{value:l.description,onChange:a=>n(t=>({...t,description:a.target.value})),placeholder:"Descrição da turma...",rows:4,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsx(I,{label:"Cor da Turma",value:l.color,onChange:a=>n(t=>({...t,color:a}))})]})}),e.jsxs(j,{className:"p-6 bg-white dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Código de Convite"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(C,{value:m?.invite_code||"",readOnly:!0}),e.jsx(B,{text:m?.invite_code||"",label:"Copiar"})]}),e.jsx(i,{variant:"outline",onClick:k,className:"w-full",children:"Gerar Novo Código"})]}),e.jsx(j,{className:"p-6 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(i,{onClick:p,disabled:f,className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),f?"Salvando...":"Salvar"]}),e.jsx(i,{variant:"outline",onClick:()=>o(`/dashboard/classes/${r}`),children:"Cancelar"})]})}),e.jsxs(j,{className:"p-6 bg-white dark:bg-slate-900 border-red-200 dark:border-red-800",children:[e.jsx("h3",{className:"font-bold text-red-600 dark:text-red-400 mb-4",children:"Zona de Perigo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{variant:"outline",onClick:w,className:"w-full text-amber-600 border-amber-300",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Arquivar Turma"]}),e.jsxs(i,{variant:"outline",onClick:y,className:"w-full text-red-600 border-red-300",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Excluir Turma"]})]})]})]})]})};export{oe as default};
