import{e as Y,r as o,t as dt,b as ut,s as B,l as ae,u as Ct,j as s,q as Lt,a as Mt}from"./main-BtydHokz.js";import{u as Bt,S as me}from"./useStudentEvolutionData-D9vBp56k.js";import{u as $t}from"./useRedisCache-DrYpCXTH.js";import{m as Ft}from"./activityTypes-DUA9p2jj.js";import{f as Kt}from"./format-B5colFmK.js";import{p as Gt}from"./pt-BR-D0BJ_iDf.js";import{C as se}from"./card-BLN8IVBT.js";import{B as zt}from"./button-pkZcz0fw.js";import{E as qt}from"./EmptyState-Dl2p8Yg2.js";import{G as Wt}from"./GradeCard-DJgT6H09.js";import"./dialog-BI66C03T.js";import{S as Te,a as Ce,b as Le,c as Me,d as te}from"./select-D2GCnsr7.js";import{u as Vt}from"./use-toast-BD7ojcJx.js";import{m as Be}from"./proxy-BKNTM3tf.js";import{S as Pe}from"./star-C-keNCTw.js";import{C as Ut}from"./circle-alert-COBXyI8K.js";import{S as $e}from"./sparkles-HF3LVzbg.js";import{C as Zt}from"./circle-check-big-odCM7i_Y.js";import{T as Fe}from"./target-CSz03Okn.js";import{L as Ht}from"./lightbulb-DjFwVRjd.js";import{B as Jt}from"./book-open-BQJiPDff.js";import{T as Xt}from"./trophy-D4fYfEaE.js";import{T as Yt}from"./trending-up-C5ypBnjG.js";import{P as oe,c as L,aO as mt,b7 as Qt,s as ge,b8 as ft,aM as Se,b9 as ea,ba as pt,bb as Re,bc as ta,bd as aa,be as ra,bf as ia,bg as na,v as K,D as vt,Z as ye,bh as he,O as G,aF as z,bi as gt,bj as yt,r as xe,a2 as ht,bk as sa,bl as oa,bm as la,L as X,bn as ca,bo as da,ad as xt,ae as bt,bp as Pt,aK as At,bq as ua,br as ma,bs as fa,u as jt,bt as pa,bu as pe,aB as va,i as ga,h as Ke,R as ya,aC as ha,aD as xa,m as wt,n as ba,V as Pa,A as Aa,z as Ge,bv as ja,I as ze,E as wa,J as ka,M as Ea,N as Oa,H as fe,T as _a,X as Sa,Y as Ae,_ as qe,$ as We,a0 as Ve,a1 as Ue}from"./CartesianChart-B4b88xjZ.js";import{L as Ra,a as Da}from"./LineChart-Zy-lH0MG.js";import{B as Na,a as Ia}from"./BarChart-D0_ywCL3.js";import{a as Ta,b as Ca,c as La,s as Ma,P as Ba}from"./PolarChart-CUzkXeS7.js";import"./en-US-DaE-csDX.js";import"./badge-DpVvk9bK.js";import"./calendar-xkfkZRmm.js";import"./message-square-BdnFgPQV.js";import"./index-BRR_QA-l.js";import"./index-C0ZNntAv.js";import"./Combination-DK-gSie6.js";import"./SidebarPremium-BEHUuQck.js";import"./house-dUPObbYn.js";import"./users-CntpuLnR.js";import"./file-text-GwBv-P3B.js";import"./graduation-cap-Bm5psu3Q.js";import"./chart-column-B3n9ZMAW.js";import"./message-circle-DTeSrK_w.js";import"./settings-BNGXdjmZ.js";import"./brain-DIkHdpFj.js";import"./index-BpBd5wiB.js";import"./chevron-right-Bh44L5jc.js";import"./x-BtLVjj0F.js";import"./index-DOzlJ45Y.js";import"./index-sWFH3d_M.js";import"./index-C35Ckziv.js";import"./chevron-down-BPlSfXS4.js";import"./check-B1zY7uXK.js";import"./chevron-up-B8VCb_df.js";import"./index-B1zfdoK7.js";var $a=["points","className","baseLinePoints","connectNulls"];function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},re.apply(null,arguments)}function Fa(e,t){if(e==null)return{};var a,r,i=Ka(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ka(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Ze=e=>e&&e.x===+e.x&&e.y===+e.y,Ga=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return t.forEach(r=>{Ze(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),Ze(t[0])&&a[a.length-1].push(t[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},le=(e,t)=>{var a=Ga(e);t&&(a=[a.reduce((i,n)=>[...i,...n],[])]);var r=a.map(i=>i.reduce((n,l,c)=>"".concat(n).concat(c===0?"M":"L").concat(l.x,",").concat(l.y),"")).join("");return a.length===1?"".concat(r,"Z"):r},za=(e,t,a)=>{var r=le(e,a);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(le(Array.from(t).reverse(),a).slice(1))},kt=e=>{var{points:t,className:a,baseLinePoints:r,connectNulls:i}=e,n=Fa(e,$a);if(!t||!t.length)return null;var l=Y("recharts-polygon",a);if(r&&r.length){var c=n.stroke&&n.stroke!=="none",d=za(t,r,i);return o.createElement("g",{className:l},o.createElement("path",re({},oe(n),{fill:d.slice(-1)==="Z"?n.fill:"none",stroke:"none",d})),c?o.createElement("path",re({},oe(n),{fill:"none",d:le(t,i)})):null,c?o.createElement("path",re({},oe(n),{fill:"none",d:le(r,i)})):null)}var g=le(t,i);return o.createElement("path",re({},oe(n),{fill:g.slice(-1)==="Z"?n.fill:"none",className:l,d:g}))},De=(e,t,a)=>{switch(t){case"angleAxis":return Re(e,a);case"radiusAxis":return pt(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Ne=(e,t,a)=>{switch(t){case"angleAxis":return aa(e,a);case"radiusAxis":return ta(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},ie=L([De,mt,Ta,Ne],Qt),Et=L([ge,La,ra,Se],ia),ne=L([ge,De,mt,ie,Ca,Ne,ft,Et,Se],ea),qa=L([ne],e=>{if(e){var t=new Map;return e.forEach(a=>{var r=(a.coordinate+360)%360;t.has(r)||t.set(r,a)}),Array.from(t.values())}});L([ge,De,ie,Ne,ft,Et,Se],na);var Wa=(e,t)=>ne(e,"angleAxis",t,!1),Va=L([Wa],e=>{if(e)return e.map(t=>t.coordinate)}),Ua=(e,t)=>ne(e,"radiusAxis",t,!1),Za=L([Ua],e=>{if(e)return e.map(t=>t.coordinate)}),Ha=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius"];function Ja(e,t){if(e==null)return{};var a,r,i=Xa(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Xa(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F.apply(null,arguments)}function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?He(Object(a),!0).forEach(function(r){Ya(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ya(e,t,a){return(t=Qa(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qa(e){var t=er(e,"string");return typeof t=="symbol"?t:t+""}function er(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tr=(e,t,a,r)=>{var i="";return r.forEach((n,l)=>{var c=z(t,a,e,n);l?i+="L ".concat(c.x,",").concat(c.y):i+="M ".concat(c.x,",").concat(c.y)}),i+="Z",i},ar=e=>{var{cx:t,cy:a,innerRadius:r,outerRadius:i,polarAngles:n,radialLines:l}=e;if(!n||!n.length||!l)return null;var c=ce({stroke:"#ccc"},G(e));return o.createElement("g",{className:"recharts-polar-grid-angle"},n.map(d=>{var g=z(t,a,r,d),P=z(t,a,i,d);return o.createElement("line",F({key:"line-".concat(d)},c,{x1:g.x,y1:g.y,x2:P.x,y2:P.y}))}))},Je=e=>{var{cx:t,cy:a,radius:r}=e,i=ce({stroke:"#ccc",fill:"none"},G(e));return o.createElement("circle",F({},i,{className:Y("recharts-polar-grid-concentric-circle",e.className),cx:t,cy:a,r}))},Xe=e=>{var{radius:t}=e,a=ce({stroke:"#ccc",fill:"none"},G(e));return o.createElement("path",F({},a,{className:Y("recharts-polar-grid-concentric-polygon",e.className),d:tr(t,e.cx,e.cy,e.polarAngles)}))},rr=e=>{var{polarRadius:t,gridType:a}=e;if(!t||!t.length)return null;var r=Math.max(...t),i=e.fill&&e.fill!=="none";return o.createElement("g",{className:"recharts-polar-grid-concentric"},i&&a==="circle"&&o.createElement(Je,F({},e,{radius:r})),i&&a!=="circle"&&o.createElement(Xe,F({},e,{radius:r})),t.map((n,l)=>{var c=l;return a==="circle"?o.createElement(Je,F({key:c},e,{fill:"none",radius:n})):o.createElement(Xe,F({key:c},e,{fill:"none",radius:n}))}))},Ot=e=>{var t,a,r,i,n,l,c,d,g,{gridType:P="polygon",radialLines:h=!0,angleAxisId:b=0,radiusAxisId:_=0,cx:p,cy:A,innerRadius:m,outerRadius:E,polarAngles:v,polarRadius:k}=e,u=Ja(e,Ha),O=K(he),D=K(H=>Va(H,b)),$=K(H=>Za(H,_)),M=Array.isArray(v)?v:D,U=Array.isArray(k)?k:$;if(M==null||U==null)return null;var Z=ce(ce({cx:(t=(a=O?.cx)!==null&&a!==void 0?a:p)!==null&&t!==void 0?t:0,cy:(r=(i=O?.cy)!==null&&i!==void 0?i:A)!==null&&r!==void 0?r:0,innerRadius:(n=(l=O?.innerRadius)!==null&&l!==void 0?l:m)!==null&&n!==void 0?n:0,outerRadius:(c=(d=O?.outerRadius)!==null&&d!==void 0?d:E)!==null&&c!==void 0?c:0,polarAngles:M,polarRadius:U},u),{},{zIndex:(g=u.zIndex)!==null&&g!==void 0?g:vt.grid}),{outerRadius:T}=Z;return T<=0?null:o.createElement(ye,{zIndex:Z.zIndex},o.createElement("g",{className:"recharts-polar-grid"},o.createElement(rr,F({gridType:P,radialLines:h},Z,{polarAngles:M,polarRadius:U})),o.createElement(ar,F({gridType:P,radialLines:h},Z,{polarAngles:M,polarRadius:U}))))};Ot.displayName="PolarGrid";var je={},we={},Ye;function ir(){return Ye||(Ye=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,r){if(a.length===0)return;let i=a[0],n=r(i);for(let l=1;l<a.length;l++){const c=a[l],d=r(c);d>n&&(n=d,i=c)}return i}e.maxBy=t})(we)),we}var Qe;function nr(){return Qe||(Qe=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ir(),a=yt(),r=gt();function i(n,l){if(n!=null)return t.maxBy(Array.from(n),r.iteratee(l??a.identity))}e.maxBy=i})(je)),je}var ke,et;function sr(){return et||(et=1,ke=nr().maxBy),ke}var or=sr();const lr=dt(or);var Ee={},Oe={},tt;function cr(){return tt||(tt=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,r){if(a.length===0)return;let i=a[0],n=r(i);for(let l=1;l<a.length;l++){const c=a[l],d=r(c);d<n&&(n=d,i=c)}return i}e.minBy=t})(Oe)),Oe}var at;function dr(){return at||(at=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cr(),a=yt(),r=gt();function i(n,l){if(n!=null)return t.minBy(Array.from(n),r.iteratee(l??a.identity))}e.minBy=i})(Ee)),Ee}var _e,rt;function ur(){return rt||(rt=1,_e=dr().minBy),_e}var mr=ur();const fr=dt(mr);var pr=["cx","cy","angle","axisLine"],vr=["angle","tickFormatter","stroke","tick"];function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},de.apply(null,arguments)}function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?it(Object(a),!0).forEach(function(r){gr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function gr(e,t,a){return(t=yr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yr(e){var t=hr(e,"string");return typeof t=="symbol"?t:t+""}function hr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _t(e,t){if(e==null)return{};var a,r,i=xr(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function xr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var br="radiusAxis";function Pr(e){var t=ht();return o.useEffect(()=>(t(sa(e)),()=>{t(oa(e))})),null}var Ar=(e,t,a,r)=>{var{coordinate:i}=e;return z(a,r,i,t)},jr=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},wr=(e,t,a,r)=>{var i=lr(r,l=>l.coordinate||0),n=fr(r,l=>l.coordinate||0);return{cx:t,cy:a,startAngle:e,endAngle:e,innerRadius:n?.coordinate||0,outerRadius:i?.coordinate||0,clockWise:!1}},kr=(e,t)=>{var{cx:a,cy:r,angle:i,axisLine:n}=e,l=_t(e,pr),c=t.reduce((h,b)=>[Math.min(h[0],b.coordinate),Math.max(h[1],b.coordinate)],[1/0,-1/0]),d=z(a,r,c[0],i),g=z(a,r,c[1],i),P=V(V(V({},G(l)),{},{fill:"none"},G(n)),{},{x1:d.x,y1:d.y,x2:g.x,y2:g.y});return o.createElement("line",de({className:"recharts-polar-radius-axis-line"},P))},Er=(e,t,a)=>{var r;return o.isValidElement(e)?r=o.cloneElement(e,t):typeof e=="function"?r=e(t):r=o.createElement(At,de({},t,{className:"recharts-polar-radius-axis-tick-value"}),a),r},Or=(e,t)=>{var{angle:a,tickFormatter:r,stroke:i,tick:n}=e,l=_t(e,vr),c=jr(e.orientation),d=G(l),g=xt(n),P=t.map((h,b)=>{var _=Ar(h,e.angle,e.cx,e.cy),p=V(V(V(V({textAnchor:c,transform:"rotate(".concat(90-a,", ").concat(_.x,", ").concat(_.y,")")},d),{},{stroke:"none",fill:i},g),{},{index:b},_),{},{payload:h});return o.createElement(X,de({className:Y("recharts-polar-radius-axis-tick",Pt(n)),key:"tick-".concat(h.coordinate)},bt(e,h,b)),Er(n,p,r?r(h.value,b):h.value))});return o.createElement(X,{className:"recharts-polar-radius-axis-ticks"},P)},_r=e=>{var{radiusAxisId:t}=e,a=K(he),r=K(d=>ie(d,"radiusAxis",t)),i=K(d=>ne(d,"radiusAxis",t,!1));if(a==null||!i||!i.length||r==null)return null;var n=V(V(V({},e),{},{scale:r},a),{},{radius:a.outerRadius}),{tick:l,axisLine:c}=n;return o.createElement(ye,{zIndex:n.zIndex},o.createElement(X,{className:Y("recharts-polar-radius-axis",br,n.className)},c&&kr(n,i),l&&Or(n,i),o.createElement(ca,wr(n.angle,n.cx,n.cy,i),o.createElement(da,{label:n.label}),n.children)))};function St(e){var t=xe(e,la);return o.createElement(o.Fragment,null,o.createElement(Pr,{domain:t.domain,id:t.radiusAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDataOverflow:t.allowDataOverflow,reversed:t.reversed,includeHidden:t.includeHidden,allowDecimals:t.allowDecimals,ticks:t.ticks,tickCount:t.tickCount,tick:t.tick}),o.createElement(_r,t))}St.displayName="PolarRadiusAxis";var Sr=["children"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ee.apply(null,arguments)}function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nt(Object(a),!0).forEach(function(r){Rr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Rr(e,t,a){return(t=Dr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Dr(e){var t=Nr(e,"string");return typeof t=="symbol"?t:t+""}function Nr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ir(e,t){if(e==null)return{};var a,r,i=Tr(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Tr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var st=1e-5,Cr=Math.cos(pe(45)),Lr="angleAxis";function Mr(e){var t=ht(),a=o.useMemo(()=>{var{children:n}=e,l=Ir(e,Sr);return l},[e]),r=K(n=>Re(n,a.id)),i=a===r;return o.useEffect(()=>(t(ua(a)),()=>{t(ma(a))}),[t,a]),i?e.children:null}var Br=(e,t)=>{var{cx:a,cy:r,radius:i,orientation:n,tickSize:l}=t,c=l||8,d=z(a,r,i,e.coordinate),g=z(a,r,i+(n==="inner"?-1:1)*c,e.coordinate);return{x1:d.x,y1:d.y,x2:g.x,y2:g.y}},$r=(e,t)=>{var a=Math.cos(pe(-e.coordinate));return a>st?t==="outer"?"start":"end":a<-st?t==="outer"?"end":"start":"middle"},Fr=e=>{var t=Math.cos(pe(-e.coordinate)),a=Math.sin(pe(-e.coordinate));return Math.abs(t)<=Cr?a>0?"start":"end":"middle"},Kr=e=>{var{cx:t,cy:a,radius:r,axisLineType:i,axisLine:n,ticks:l}=e;if(!n)return null;var c=W(W({},G(e)),{},{fill:"none"},G(n));if(i==="circle")return o.createElement(pa,ee({className:"recharts-polar-angle-axis-line"},c,{cx:t,cy:a,r}));var d=l.map(g=>z(t,a,r,g.coordinate));return o.createElement(kt,ee({className:"recharts-polar-angle-axis-line"},c,{points:d}))},Gr=e=>{var{tick:t,tickProps:a,value:r}=e;return t?o.isValidElement(t)?o.cloneElement(t,a):typeof t=="function"?t(a):o.createElement(At,ee({},a,{className:"recharts-polar-angle-axis-tick-value"}),r):null},zr=e=>{var{tick:t,tickLine:a,tickFormatter:r,stroke:i,ticks:n}=e,l=G(e),c=xt(t),d=W(W({},l),{},{fill:"none"},G(a)),g=n.map((P,h)=>{var b=Br(P,e),_=$r(P,e.orientation),p=Fr(P),A=W(W(W({},l),{},{textAnchor:_,verticalAnchor:p,stroke:"none",fill:i},c),{},{index:h,payload:P,x:b.x2,y:b.y2});return o.createElement(X,ee({className:Y("recharts-polar-angle-axis-tick",Pt(t)),key:"tick-".concat(P.coordinate)},bt(e,P,h)),a&&o.createElement("line",ee({className:"recharts-polar-angle-axis-tick-line"},d,b)),o.createElement(Gr,{tick:t,tickProps:A,value:r?r(P.value,h):P.value}))});return o.createElement(X,{className:"recharts-polar-angle-axis-ticks"},g)},qr=e=>{var{angleAxisId:t}=e,a=K(he),r=K(c=>ie(c,"angleAxis",t)),i=jt(),n=K(c=>qa(c,"angleAxis",t,i));if(a==null||!n||!n.length||r==null)return null;var l=W(W(W({},e),{},{scale:r},a),{},{radius:a.outerRadius,ticks:n});return o.createElement(ye,{zIndex:l.zIndex},o.createElement(X,{className:Y("recharts-polar-angle-axis",Lr,l.className)},o.createElement(Kr,l),o.createElement(zr,l)))};function Rt(e){var t=xe(e,fa);return o.createElement(Mr,{id:t.angleAxisId,scale:t.scale,type:t.type,dataKey:t.dataKey,unit:void 0,name:t.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:t.reversed,includeHidden:!1,allowDecimals:t.allowDecimals,tickCount:t.tickCount,ticks:t.ticks,tick:t.tick,domain:t.domain},o.createElement(qr,t))}Rt.displayName="PolarAngleAxis";function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ot(Object(a),!0).forEach(function(r){Wr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Wr(e,t,a){return(t=Vr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Vr(e){var t=Ur(e,"string");return typeof t=="symbol"?t:t+""}function Ur(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dt=(e,t)=>ie(e,"radiusAxis",t),Zr=L([Dt],e=>{if(e!=null)return{scale:e}}),Hr=L([pt,Dt],(e,t)=>{if(!(e==null||t==null))return ve(ve({},e),{},{scale:t})}),Jr=(e,t,a,r)=>ne(e,"radiusAxis",t,r),Nt=(e,t,a)=>Re(e,a),It=(e,t,a)=>ie(e,"angleAxis",a),Xr=L([Nt,It],(e,t)=>{if(!(e==null||t==null))return ve(ve({},e),{},{scale:t})}),Yr=(e,t,a,r)=>ne(e,"angleAxis",a,r),Qr=L([Nt,It,he],(e,t,a)=>{if(!(a==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:a.cx,cy:a.cy}}),ei=(e,t,a,r,i)=>i,ti=L([ge,Hr,Jr,Xr,Yr],(e,t,a,r,i)=>ga(e,"radiusAxis")?Ke(t,a,!1):Ke(r,i,!1)),ai=L([Ma,ei],(e,t)=>{if(e!=null){var a=e.find(r=>r.type==="radar"&&t===r.id);return a?.dataKey}}),ri=L([Zr,Qr,va,ai,ti],(e,t,a,r,i)=>{var{chartData:n,dataStartIndex:l,dataEndIndex:c}=a;if(!(e==null||t==null||n==null||i==null||r==null)){var d=n.slice(l,c+1);return fi({radiusAxis:e,angleAxis:t,displayedData:d,dataKey:r,bandSize:i})}}),ii=["id"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ue.apply(null,arguments)}function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(a),!0).forEach(function(r){ni(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ni(e,t,a){return(t=si(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function si(e){var t=oi(e,"string");return typeof t=="symbol"?t:t+""}function oi(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function li(e,t){if(e==null)return{};var a,r,i=ci(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ci(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Ie(e,t){return e&&e!=="none"?e:t}var di=e=>{var{dataKey:t,name:a,stroke:r,fill:i,legendType:n,hide:l}=e;return[{inactive:l,dataKey:t,type:n,color:Ie(r,i),value:wt(a,t),payload:e}]},ui=o.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:n,hide:l,tooltipType:c}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,nameKey:void 0,dataKey:t,name:wt(n,t),hide:l,type:c,color:Ie(a,i),unit:""}};return o.createElement(ba,{tooltipEntrySettings:d})});function mi(e){var{points:t,props:a}=e,{dot:r,dataKey:i}=a,{id:n}=a,l=li(a,ii),c=G(l);return o.createElement(_a,{points:t,dot:r,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:i,baseProps:c})}function fi(e){var{radiusAxis:t,angleAxis:a,displayedData:r,dataKey:i,bandSize:n}=e,{cx:l,cy:c}=a,d=!1,g=[],P=a.type!=="number"?n??0:0;r.forEach((b,_)=>{var p=Ge(b,a.dataKey,_),A=Ge(b,i),m=a.scale(p)+P,E=Array.isArray(A)?ja(A):A,v=ze(E)?0:t.scale(E);Array.isArray(A)&&A.length>=2&&(d=!0),g.push(C(C({},z(l,c,v,m)),{},{name:p,value:A,cx:l,cy:c,radius:v,angle:m,payload:b}))});var h=[];return d&&g.forEach(b=>{if(Array.isArray(b.value)){var _=b.value[0],p=ze(_)?0:t.scale(_);h.push(C(C({},b),{},{radius:p},z(l,c,p,b.angle)))}else h.push(b)}),{points:g,isRange:d,baseLinePoints:h}}function pi(e){var{showLabels:t,points:a,children:r}=e,i=a.map(n=>{var l,c={x:n.x,y:n.y,width:0,lowerWidth:0,upperWidth:0,height:0};return C(C({},c),{},{value:(l=n.value)!==null&&l!==void 0?l:"",payload:n.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return o.createElement(Oa,{value:t?i:void 0},r)}function vi(e){var{points:t,baseLinePoints:a,props:r}=e;if(t==null)return null;var{shape:i,isRange:n,connectNulls:l}=r,c=P=>{var{onMouseEnter:h}=r;h&&h(r,P)},d=P=>{var{onMouseLeave:h}=r;h&&h(r,P)},g;return o.isValidElement(i)?g=o.cloneElement(i,C(C({},r),{},{points:t})):typeof i=="function"?g=i(C(C({},r),{},{points:t})):g=o.createElement(kt,ue({},oe(r),{onMouseEnter:c,onMouseLeave:d,points:t,baseLinePoints:n?a:void 0,connectNulls:l})),o.createElement(X,{className:"recharts-radar-polygon"},g,o.createElement(mi,{props:r,points:t}))}var ct=(e,t,a)=>(r,i)=>{var n=e&&e[Math.floor(i*t)];return n?C(C({},r),{},{x:fe(n.x,r.x,a),y:fe(n.y,r.y,a)}):C(C({},r),{},{x:fe(r.cx,r.x,a),y:fe(r.cy,r.y,a)})};function gi(e){var{props:t,previousPointsRef:a,previousBaseLinePointsRef:r}=e,{points:i,baseLinePoints:n,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:g,onAnimationEnd:P,onAnimationStart:h}=t,b=a.current,_=r.current,p=b?b.length/i.length:1,A=_?_.length/n.length:1,m=wa(t,"recharts-radar-"),[E,v]=o.useState(!1),k=!E,u=o.useCallback(()=>{typeof P=="function"&&P(),v(!1)},[P]),O=o.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]);return o.createElement(pi,{showLabels:k,points:i},o.createElement(ka,{animationId:m,begin:c,duration:d,isActive:l,easing:g,key:"radar-".concat(m),onAnimationEnd:u,onAnimationStart:O},D=>{var $=D===1?i:i.map(ct(b,p,D)),M=D===1?n:n?.map(ct(_,A,D));return D>0&&(a.current=$,r.current=M),o.createElement(vi,{points:$,baseLinePoints:M,props:t})}),o.createElement(Ea,{label:t.label}),t.children)}function yi(e){var t=o.useRef(void 0),a=o.useRef(void 0);return o.createElement(gi,{props:e,previousPointsRef:t,previousBaseLinePointsRef:a})}var hi={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Pa.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",zIndex:vt.area};function xi(e){var{hide:t,className:a,points:r}=e;if(t)return null;var i=Y("recharts-radar",a);return o.createElement(ye,{zIndex:e.zIndex},o.createElement(X,{className:i},o.createElement(yi,e)),o.createElement(Aa,{points:r,mainColor:Ie(e.stroke,e.fill),itemDataKey:e.dataKey,activeDot:e.activeDot}))}function bi(e){var t=jt(),a=K(r=>ri(r,e.radiusAxisId,e.angleAxisId,t,e.id));return a?.points==null?null:o.createElement(xi,ue({},e,{points:a?.points,baseLinePoints:a?.baseLinePoints,isRange:a?.isRange}))}function Tt(e){var t=xe(e,hi);return o.createElement(ya,{id:t.id,type:"radar"},a=>o.createElement(o.Fragment,null,o.createElement(ha,{type:"radar",id:a,data:void 0,dataKey:t.dataKey,hide:t.hide,angleAxisId:t.angleAxisId,radiusAxisId:t.radiusAxisId}),o.createElement(xa,{legendPayload:di(t)}),o.createElement(ui,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),o.createElement(bi,ue({},t,{id:a}))))}Tt.displayName="Radar";var Pi=["axis"],Ai={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ji=o.forwardRef((e,t)=>{var a=xe(e,Ai);return o.createElement(Ba,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Pi,tooltipPayloadSearcher:Sa,categoricalChartProps:a,ref:t})});const wi=()=>{const{user:e}=ut(),t=o.useCallback(async()=>{if(!e?.id)return null;try{const{data:r,error:i}=await B.from("class_members").select("class_id").eq("user_id",e.id).eq("role","student");if(i)throw i;const n=r?.map(p=>p.class_id)||[];let l=[];const c={};if(n.length>0){const{data:p,error:A}=await B.from("classes").select("id, name, subject").in("id",n);if(A)throw A;l=p||[],l.forEach(m=>{c[m.id]=m})}let d=[],g=[];if(n.length>0){const{data:p,error:A}=await B.from("activity_class_assignments").select("activity_id, class_id").in("class_id",n);if(A)throw A;d=p||[];const m=new Set;d.forEach(E=>{E.activity_id&&m.add(E.activity_id)}),g=Array.from(m)}let P={avgGrade:0,totalActivities:0,completedActivities:0,ranking:null};if(g.length>0){const{data:p,error:A}=await B.from("submissions").select("activity_id, status, grade, submitted_at").eq("student_id",e.id).in("activity_id",g);if(A)throw A;const m=p?.length||0,E=(p||[]).filter(k=>k.grade!==null);P={avgGrade:E.length>0?E.reduce((k,u)=>k+parseFloat(u.grade),0)/E.length:0,totalActivities:g.length,completedActivities:m,ranking:null}}let h=[];{const{data:p,error:A}=await B.from("submissions").select("id, grade, feedback, submitted_at, status, activity_id").eq("student_id",e.id).not("grade","is",null).order("submitted_at",{ascending:!1}).limit(10);if(A)throw A;const m=p?.map(u=>u.activity_id).filter(Boolean)||[],E={};if(m.length>0){const{data:u,error:O}=await B.from("activities").select("id, title, max_score").in("id",m);if(O)throw O;(u||[]).forEach(D=>{E[D.id]=D})}const v={},k={};d.forEach(u=>{m.includes(u.activity_id)&&(v[u.activity_id]=c[u.class_id]?.name,k[u.activity_id]=u.class_id)}),h=(p||[]).map(u=>({...u,activity_title:E[u.activity_id]?.title,max_score:E[u.activity_id]?.max_score,class_name:v[u.activity_id],class_id:k[u.activity_id]}))}let b=[];if(n.length>0&&g.length>0){const{data:p,error:A}=await B.from("submissions").select("id, grade, submitted_at, activity_id").eq("student_id",e.id).in("activity_id",g).not("grade","is",null).order("submitted_at",{ascending:!0});if(A)throw A;const{data:m,error:E}=await B.from("activities").select("id, title, max_score").in("id",g);if(E)throw E;const v={};(m||[]).forEach(u=>{v[u.id]=u});const k={};d.forEach(u=>{!u.class_id||!u.activity_id||(k[u.class_id]||(k[u.class_id]=new Set),k[u.class_id].add(u.activity_id))}),b=(n||[]).map(u=>{const O=c[u],D=k[u]||new Set,$=(p||[]).filter(T=>D.has(T.activity_id)),M=$.map(T=>parseFloat(T.grade)),U=M.length>0?M.reduce((T,H)=>T+H,0)/M.length:0,Z=($||[]).map(T=>({date:Kt(new Date(T.submitted_at),"dd/MM",{locale:Gt}),grade:parseFloat(T.grade)}));return{name:O?.name||"Turma",media:U,history:Z}}).sort((u,O)=>O.media-u.media)}let _=[];{const{data:p,error:A}=await B.from("submissions").select(`
            grade,
            submitted_at,
            activity_id,
            activity:activities(type, max_score)
          `).eq("student_id",e.id).not("grade","is",null);if(A)throw A;const m=p?.map(v=>v.activity_id).filter(Boolean)||[],E={};if(m.length>0){const{data:v,error:k}=await B.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",m);if(k)throw k;(v||[]).forEach(u=>{u.activity_id&&(E[u.activity_id]=u.class_id)})}_=(p||[]).map(v=>({grade:parseFloat(v.grade),maxScore:v.activity?.max_score!=null?parseFloat(v.activity.max_score):null,type:Ft(v.activity?.type),submitted_at:v.submitted_at,class_id:E[v.activity_id]}))}return{stats:P,recentGrades:h,classPerformance:b,radarData:_,classes:l}}catch(r){throw ae.error("[useStudentPerformanceData] Erro geral:",r),r}},[e?.id]),a=e?.id?`student:performance-page:${e.id}`:null;return $t(a,t,{ttl:600,enabled:!!a,staleTime:120*1e3})},En=()=>{const{user:e}=ut(),t=Ct(),{toast:a}=Vt(),[r,i]=o.useState(!1),[n,l]=o.useState(null),[c,d]=o.useState(0),[g,P]=o.useState(!0),{data:h}=Bt(),{data:b,loading:_}=wi(),[p,A]=o.useState("all"),[m,E]=o.useState("all"),v=b?.stats||{avgGrade:0,totalActivities:0,completedActivities:0,ranking:null},k=b?.recentGrades||[],u=b?.classPerformance||[],O=b?.radarData||[],D=b?.classes||[];o.useEffect(()=>{e?.id&&$()},[e]);const $=async()=>{try{P(!0);const f=new Date;f.setHours(0,0,0,0);const{data:y,error:x}=await B.from("ai_recommendations_usage").select("id").eq("student_id",e.id).gte("created_at",f.toISOString());x?(ae.error("[AI Usage] Erro ao buscar contador:",x),d(0)):d(y?.length||0)}catch(f){ae.error("[AI Usage] Erro ao buscar contador:",f),d(0)}finally{P(!1)}},M=async()=>{const f=`ai_recommendations_${e.id}`;try{i(!0);const y=localStorage.getItem(f);if(y){const{recommendations:w,timestamp:Q}=JSON.parse(y),R=Date.now()-Q,J=1800*1e3;if(R<J){l(w),i(!1),a({title:"âœ… RecomendaÃ§Ãµes carregadas",description:"Usando anÃ¡lise recente do cache"});return}}const x={avgGrade:v.avgGrade,totalActivities:v.totalActivities,completedActivities:v.completedActivities,recentGrades:k.slice(0,5).map(w=>({activityTitle:w.activity_title,grade:w.submission?.grade,maxScore:w.max_score,submittedAt:w.submission?.submitted_at})),classPerformance:u.map(w=>({className:w.name,averageGrade:w.media,totalActivities:w.totalActivities||0})),radarData:O};a({title:"ðŸ¤– Gerando recomendaÃ§Ãµes...",description:"Aguarde enquanto a IA analisa seu desempenho"});const{data:j}=await B.auth.getSession(),S=j?.session?.access_token,N=await fetch("https://wapbwaimkurbuihatmix.supabase.co/functions/v1/ai-study-recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({studentId:e.id,performanceData:x})});let q;if(N.ok){const w=await N.json();if(w.limitReached){ae.warn("[AI] Limite diÃ¡rio atingido:",w),i(!1),await $(),a({title:"â° Limite DiÃ¡rio Atingido",description:w.message||"VocÃª jÃ¡ gerou 3 recomendaÃ§Ãµes hoje. Tente novamente amanhÃ£!",variant:"destructive",duration:5e3});return}if(await $(),w.success&&w.recommendations&&Array.isArray(w.recommendations))q={strengths:w.recommendations.filter(R=>R.priority==="low"||R.priority==="medium").map(R=>R.description),improvements:w.recommendations.filter(R=>R.priority==="high").map(R=>R.description),tips:w.recommendations.map(R=>`ðŸŽ¯ ${R.title}: ${R.reason}`).slice(0,3)};else throw new Error("Resposta da IA sem recomendaÃ§Ãµes vÃ¡lidas")}else{ae.warn("[AI] Usando fallback local - Edge Function falhou"),a({title:"â„¹ï¸ Usando anÃ¡lise local",description:"API de IA indisponÃ­vel. Gerando recomendaÃ§Ãµes com base nos seus dados.",duration:3e3});const w=u.filter(I=>I.media<7).sort((I,be)=>I.media-be.media),Q=u.filter(I=>I.media>=8).sort((I,be)=>be.media-I.media),R=[];w.length>0?w.slice(0,2).forEach(I=>{R.push(`Revisar conceitos de ${I.name} onde as notas foram menores (mÃ©dia: ${I.media.toFixed(1)})`)}):R.push("Manter o ritmo de estudos atual"),k.some(I=>I.status==="draft")&&R.push("Completar atividades pendentes antes do prazo"),R.push("Participar mais das discussÃµes em sala");const J=[];v.avgGrade>=8?J.push("Ã“timo desempenho geral nas atividades"):v.avgGrade>=7?J.push("Bom desempenho nas atividades"):J.push("Mostrando esforÃ§o e dedicaÃ§Ã£o"),Q.length>0&&Q.slice(0,2).forEach(I=>{J.push(`Excelente em ${I.name} (mÃ©dia: ${I.media.toFixed(1)})`)}),(v.totalActivities>0?v.completedActivities/v.totalActivities*100:0)>=80&&J.push("ConsistÃªncia nas entregas dentro do prazo"),q={strengths:J,improvements:R,tips:["ðŸ“š Reserve 30min diÃ¡rios para revisÃ£o","âœï¸ Pratique mais questÃµes abertas","ðŸŽ¯ EstabeleÃ§a metas semanais de estudo","ðŸ‘¥ Forme grupos de estudo com colegas","â“ Tire dÃºvidas com professores"].slice(0,3)}}l(q),localStorage.setItem(f,JSON.stringify({recommendations:q,timestamp:Date.now()})),a({title:"âœ… RecomendaÃ§Ãµes geradas!",description:"Confira as sugestÃµes personalizadas abaixo"})}catch(y){ae.error("Erro ao gerar recomendaÃ§Ãµes:",y),a({title:"âŒ Erro ao gerar recomendaÃ§Ãµes",description:"Tente novamente mais tarde",variant:"destructive"})}finally{i(!1)}};o.useMemo(()=>{if(!k.length)return v;let f=[...k];if(p!=="all"&&(f=f.filter(j=>j.class_id===p)),m!=="all"){const j=new Date;let S=new Date;m==="week"?S.setDate(j.getDate()-7):m==="month"?S.setMonth(j.getMonth()-1):m==="semester"&&S.setMonth(j.getMonth()-6),f=f.filter(N=>N.submitted_at&&new Date(N.submitted_at)>=S)}const y=f.filter(j=>j.grade!==null),x=y.length>0?y.reduce((j,S)=>j+parseFloat(S.grade),0)/y.length:0;return{...v,avgGrade:x,completedActivities:f.length}},[v,k,p,m]);const U=Array.isArray(h)?h:[],Z=o.useMemo(()=>{let f=[...U];if(p!=="all"&&(f=f.filter(y=>y.class_id===p)),m!=="all"){const y=new Date;let x=new Date;m==="week"?x.setDate(y.getDate()-7):m==="month"?x.setMonth(y.getMonth()-1):m==="semester"&&x.setMonth(y.getMonth()-6),f=f.filter(j=>{if(!j.fullDate)return!1;const S=new Date(j.fullDate);return S>=x&&S<=y})}return f},[U,p,m]),T=o.useMemo(()=>{let f=[...u];return p!=="all"&&(f=f.filter(y=>{const x=D.find(j=>j.id===p);return x&&y.name===x.name})),m!=="all"&&(f=f.map(y=>{const x=new Date;let j=new Date;m==="week"?j.setDate(x.getDate()-7):m==="month"?j.setMonth(x.getMonth()-1):m==="semester"&&j.setMonth(x.getMonth()-6);const S=(y.history||[]).filter(w=>!0),N=S.map(w=>w.grade),q=N.length>0?N.reduce((w,Q)=>w+Q,0)/N.length:0;return{...y,media:q,history:S}})),f.sort((y,x)=>x.media-y.media)},[u,p,m,D]),H=o.useMemo(()=>{let f=[...O];if(p!=="all"&&(f=f.filter(x=>x.class_id===p)),m!=="all"){const x=new Date;let j=new Date;m==="week"?j.setDate(x.getDate()-7):m==="month"?j.setMonth(x.getMonth()-1):m==="semester"&&j.setMonth(x.getMonth()-6),f=f.filter(S=>{if(!S.submitted_at)return!1;const N=new Date(S.submitted_at);return N>=j&&N<=x})}const y=[{skill:"Objetivas",value:0,count:0},{skill:"Abertas",value:0,count:0},{skill:"Mistas",value:0,count:0}];return f.forEach(x=>{const j=x.grade,S=x.maxScore,N=x.type;if(!j||!S||S===0)return;const q=j/S*100;N==="closed"?(y[0].value+=q,y[0].count++):N==="open"?(y[1].value+=q,y[1].count++):N==="mixed"&&(y[2].value+=q,y[2].count++)}),y.map(x=>({skill:x.skill,value:x.count>0?Math.round(x.value/x.count):0}))},[O,p,m]);return _?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(Lt,{size:"lg"})}):s.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:[s.jsx(Be.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:s.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-3",children:[s.jsx(Pe,{className:"w-8 h-8 text-yellow-600"}),"Meu Desempenho"]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Acompanhe suas notas e evoluÃ§Ã£o acadÃªmica"})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsx(zt,{onClick:M,disabled:r||v.totalActivities===0||c>=3,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):c>=3?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Limite DiÃ¡rio Atingido"]}):s.jsxs(s.Fragment,{children:[s.jsx($e,{className:"w-4 h-4 mr-2"}),"Gerar RecomendaÃ§Ãµes com IA"]})}),!g&&s.jsxs("span",{className:`text-sm ${c>=3?"text-red-600 dark:text-red-400 font-semibold":c>=2?"text-orange-600 dark:text-orange-400 font-medium":"text-slate-500 dark:text-slate-400"}`,children:[c,"/3 utilizadas hoje"]})]})]})}),n&&s.jsx(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:s.jsxs(se,{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20 border-2 border-purple-200 dark:border-purple-800",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[s.jsx($e,{className:"w-6 h-6 text-purple-600"}),"RecomendaÃ§Ãµes Personalizadas da IA"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-green-700 dark:text-green-400 mb-3 flex items-center gap-2",children:[s.jsx(Zt,{className:"w-5 h-5"}),"Seus Pontos Fortes"]}),s.jsx("ul",{className:"space-y-2",children:n.strengths?.map((f,y)=>s.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-green-200 dark:border-green-800",children:["â€¢ ",f]},y))||s.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-orange-700 dark:text-orange-400 mb-3 flex items-center gap-2",children:[s.jsx(Fe,{className:"w-5 h-5"}),"Ãreas para Melhorar"]}),s.jsx("ul",{className:"space-y-2",children:n.improvements?.map((f,y)=>s.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:["â€¢ ",f]},y))||s.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[s.jsx(Ht,{className:"w-5 h-5"}),"Dicas de Estudo"]}),s.jsx("ul",{className:"space-y-2",children:n.tips?.map((f,y)=>s.jsx("li",{className:"text-sm text-slate-700 dark:text-slate-300 bg-white/70 dark:bg-slate-900/50 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:f},y))||s.jsx("li",{className:"text-sm text-slate-500",children:"Carregando..."})})]})]})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[s.jsxs(Te,{value:p,onValueChange:A,children:[s.jsx(Ce,{className:"w-full md:w-64",children:s.jsx(Le,{placeholder:"Todas as turmas"})}),s.jsxs(Me,{children:[s.jsx(te,{value:"all",children:"Todas as turmas"}),D.map(f=>s.jsx(te,{value:f.id,children:f.name},f.id))]})]}),s.jsxs(Te,{value:m,onValueChange:E,children:[s.jsx(Ce,{className:"w-full md:w-64",children:s.jsx(Le,{placeholder:"Todo o perÃ­odo"})}),s.jsxs(Me,{children:[s.jsx(te,{value:"all",children:"Todo o perÃ­odo"}),s.jsx(te,{value:"week",children:"Ãšltima semana"}),s.jsx(te,{value:"month",children:"Ãšltimo mÃªs"}),s.jsx(te,{value:"semester",children:"Ãšltimo semestre"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[s.jsx(me,{icon:Pe,value:v.avgGrade>0?v.avgGrade.toFixed(1):"--",label:"MÃ©dia Geral",gradient:"yellow"}),s.jsx(me,{icon:Fe,value:v.completedActivities,label:"Atividades ConcluÃ­das",gradient:"green"}),s.jsx(me,{icon:Jt,value:v.totalActivities,label:"Total de Atividades",gradient:"blue"}),s.jsx(me,{icon:Xt,value:v.ranking||"--",label:"PosiÃ§Ã£o no Ranking",gradient:"purple"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8 mb-6 md:mb-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4 md:space-y-6 lg:space-y-8",children:[Z.length>0&&s.jsxs(se,{className:"p-4 sm:p-6",children:[s.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-4 sm:mb-6 flex items-center gap-2",children:[s.jsx(Yt,{className:"w-6 h-6 text-green-600"}),"EvoluÃ§Ã£o das Notas"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx(Ae,{width:"100%",height:300,className:"min-w-[400px]",children:s.jsxs(Ra,{data:Z,margin:{top:5,right:20,left:0,bottom:5},children:[s.jsx(qe,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(We,{dataKey:"date",stroke:"#64748b",tick:{fontSize:12}}),s.jsx(Ve,{stroke:"#64748b",domain:[0,"auto"],tick:{fontSize:12}}),s.jsx(Ue,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),s.jsx(Da,{type:"monotone",dataKey:"nota",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:6},name:"Nota"})]})})})]}),s.jsxs(se,{className:"p-4 sm:p-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-4 sm:mb-6",children:"Ãšltimas Notas"}),k.length>0?s.jsx("div",{className:"space-y-4",children:k.map((f,y)=>s.jsx(Wt,{grade:f,onViewDetails:()=>t(`/students/activities/${f.activity_id}`),index:y},f.id))}):s.jsx(qt,{icon:Pe,title:"Nenhuma nota ainda",description:"Complete suas atividades para ver suas notas aqui.",variant:"default"})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 lg:space-y-8",children:[T.length>0&&s.jsxs(se,{className:"p-4 sm:p-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white mb-4 sm:mb-6",children:"Por Turma"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx(Ae,{width:"100%",height:Math.max(150,T.length*50),className:"min-w-[300px]",children:s.jsxs(Na,{data:T,layout:"vertical",margin:{left:20,right:20,top:10,bottom:10},children:[s.jsx(qe,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(We,{type:"number",stroke:"#64748b",domain:[0,10]}),s.jsx(Ve,{type:"category",dataKey:"name",stroke:"#64748b",width:120,tick:{fontSize:12}}),s.jsx(Ue,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px"}}),s.jsx(Ia,{dataKey:"media",fill:"#3b82f6",radius:[0,8,8,0],name:"MÃ©dia"})]})})})]}),H.length>0&&s.jsxs(se,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Por Tipo"}),s.jsx(Ae,{width:"100%",height:220,children:s.jsxs(ji,{data:H,margin:{top:10,right:10,bottom:10,left:10},children:[s.jsx(Ot,{stroke:"#e2e8f0"}),s.jsx(Rt,{dataKey:"skill",stroke:"#64748b",tick:{fontSize:12}}),s.jsx(St,{stroke:"#64748b",domain:[0,100]}),s.jsx(Tt,{name:"Desempenho",dataKey:"value",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6})]})})]})]})]})]})};export{En as default};
