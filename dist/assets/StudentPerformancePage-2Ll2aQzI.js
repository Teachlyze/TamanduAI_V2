import{a as x,r,s as h,j as e,k as j}from"./main-Cr4CeQqJ.js";import{C as v}from"./card-CvoT5xff.js";import{S as d}from"./StatsCard-CEAHNeHe.js";import{D as b}from"./dropdown-menu-W1Sf6eM2.js";import"./button-VDnOzUX8.js";import"./input-DJYxsXYr.js";import"./label-Cj0ah_CE.js";import{C as y}from"./chart-column-DHMA61nx.js";import{A as C}from"./award-D3JSnlDV.js";import{T as A}from"./trending-up-DrjQbBkU.js";import{R as k,L as S,C as G,X as D,Y as N,T as R,a as E}from"./LineChart-BbsIrSBE.js";import"./chevron-right-D9YOEkTh.js";import"./index-Zvo5G3yJ.js";import"./check-BNbB6Qjw.js";const J=()=>{const{user:a}=x(),[l,t]=r.useState(!0),[o,m]=r.useState({avgGrade:0,totalActivities:0,completionRate:0}),[c,u]=r.useState([]);r.useEffect(()=>{a?.id?p():t(!1)},[a]);const p=async()=>{if(!a?.id){t(!1);return}try{t(!0);const{data:s}=await h.from("submissions").select("grade, submitted_at, activity:activities(title, max_score)").eq("student_id",a.id).not("grade","is",null),i=s?.filter(n=>n.grade!==null)||[],g=i.length>0?i.reduce((n,f)=>n+f.grade,0)/i.length:0;m({avgGrade:g.toFixed(1),totalActivities:s?.length||0,completionRate:85}),u([{name:"Jan",nota:7.5},{name:"Fev",nota:8.2},{name:"Mar",nota:7.8},{name:"Abr",nota:8.5},{name:"Mai",nota:9}])}catch(s){console.error("Erro:",s)}finally{t(!1)}};return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(j,{size:"lg"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-6",children:[e.jsx(b,{title:"Meu Desempenho",subtitle:"Acompanhe sua evolução acadêmica",role:"student"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(d,{title:"Média Geral",value:o.avgGrade,icon:y,gradient:"from-blue-500 to-cyan-500",delay:0}),e.jsx(d,{title:"Atividades Concluídas",value:o.totalActivities,icon:C,gradient:"from-green-500 to-emerald-500",delay:.1}),e.jsx(d,{title:"Taxa de Conclusão",value:`${o.completionRate}%`,icon:A,gradient:"from-purple-500 to-pink-500",format:"text",delay:.2})]}),e.jsxs(v,{className:"p-6 bg-white dark:bg-slate-900 mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Evolução de Notas"}),e.jsx(k,{width:"100%",height:300,children:e.jsxs(S,{data:c,children:[e.jsx(G,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"name"}),e.jsx(N,{domain:[0,10]}),e.jsx(R,{}),e.jsx(E,{type:"monotone",dataKey:"nota",stroke:"#3B82F6",strokeWidth:2})]})})]})]})};export{J as default};
