import{j as a,b,r as g,s as m,l as x}from"./main-BSajwT7t.js";import{C as p}from"./card-Bocxgg1Q.js";import{m as u}from"./proxy-Bb-A2TUD.js";import{u as f}from"./useRedisCache-Bcf7HeY8.js";import{f as v}from"./format-B5colFmK.js";import{p as y}from"./pt-BR-D0BJ_iDf.js";const N=({icon:l,value:s,label:d,gradient:r,trend:t})=>{const i={blue:"from-blue-600 to-cyan-500",orange:"from-orange-600 to-amber-500",green:"from-green-600 to-emerald-500",yellow:"from-yellow-600 to-orange-500",purple:"from-purple-600 to-pink-500",slate:"from-slate-600 to-slate-800"},o={blue:"bg-blue-100 dark:bg-blue-900/30",orange:"bg-orange-100 dark:bg-orange-900/30",green:"bg-emerald-100 dark:bg-emerald-900/30",yellow:"bg-yellow-100 dark:bg-yellow-900/30",purple:"bg-purple-100 dark:bg-purple-900/30",slate:"bg-slate-100 dark:bg-slate-800"},e={blue:"text-blue-600 dark:text-blue-400",orange:"text-orange-600 dark:text-orange-400",green:"text-emerald-600 dark:text-emerald-400",yellow:"text-yellow-600 dark:text-yellow-400",purple:"text-purple-600 dark:text-purple-400",slate:"text-slate-600 dark:text-slate-400"};return a.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.05,y:-5},transition:{type:"spring",stiffness:300,damping:20},children:a.jsxs(p,{className:"p-4 sm:p-6 relative overflow-hidden border-2 border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all hover:shadow-xl",children:[a.jsx("div",{className:`absolute inset-0 opacity-5 bg-gradient-to-br ${i[r]||i.blue}`}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[l&&a.jsx("div",{className:`p-2 sm:p-3 rounded-xl ${o[r]||o.blue}`,children:a.jsx(l,{className:`w-5 h-5 sm:w-6 sm:h-6 ${e[r]||e.blue}`})}),t!=null&&a.jsxs(u.span,{initial:{scale:0},animate:{scale:1},className:`text-sm font-bold px-2 py-1 rounded-full ${t>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}`,children:[t>0?"↗":t<0?"↘":"→"," ",Math.abs(t),"%"]})]}),a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white mb-1",children:s}),a.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:d})]})]})})},E=(l=20)=>{const{user:s}=b(),d=g.useCallback(async()=>{if(!s?.id)return[];try{const{data:r,error:t}=await m.from("submissions").select(`
          grade,
          submitted_at,
          activity_id,
          activity:activities(max_score)
        `).eq("student_id",s.id).not("grade","is",null).order("submitted_at",{ascending:!0}).limit(l);if(t)throw t;const i=(r||[]).map(e=>e.activity_id).filter(Boolean);let o={};if(i.length>0){const{data:e,error:n}=await m.from("activity_class_assignments").select("activity_id, class_id").in("activity_id",i);if(n)throw n;(e||[]).forEach(c=>{o[c.activity_id]=c.class_id})}return(r||[]).map(e=>({date:v(new Date(e.submitted_at),"dd/MM",{locale:y}),fullDate:e.submitted_at,nota:parseFloat(e.grade)||0,maxScore:e.activity?.max_score||10,activity_id:e.activity_id,class_id:o[e.activity_id]}))}catch(r){return x.error("[useStudentEvolutionData] Error:",r),[]}},[s?.id,l]);return f(`student:evolution:${s?.id}:${l}`,d,{ttl:300,enabled:!!s?.id,staleTime:60*1e3})};export{N as S,E as u};
